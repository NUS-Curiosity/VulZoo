
Date: Wed, 5 Jul 2017 17:47:11 +0100
From: Simon McVittie <smcv@...ian.org>
To: oss-security@...ts.openwall.com
Subject: Re: systemd fails to parse user that should run
 service

On Wed, 05 Jul 2017 at 11:48:43 -0400, Daniel Micay wrote:
> It seems some distributions get useradd/userdel from somewhere else.

shadow and util-linux have a lot of overlap. Fedora has historically
used util-linux for as much as possible; Debian has historically used
shadow, but is gradually moving towards util-linux because in practice
it's more actively maintained; other distributions I don't know. The
major user-visible difference has usually been differing su behaviour.

> Maybe you have adduser from shadow? It'd be funny if they had different
> rules enforced even for adduser vs. useradd...

In Debian and its derivatives there are certainly different rules. useradd
is the mechanism layer, and adduser is a Debian-specific policy layer (for
instance adduser rejects weird/inadvisable usernames unless given an option
to force them).

    S
