
Date: Thu, 21 Jun 2018 14:51:51 +0200
From: Lukas Odzioba <lukas.odzioba@...il.com>
To: oss-security@...ts.openwall.com
Subject: Re: Intel hyper-threading security issues

2018-06-21 13:54 GMT+02:00 Sven Schwedas <sven.schwedas@....at>:
> Hotplug doesn't seem differentiate between HT threads and physical
> cores, will setting maxcpus=2 on a 2 cores+HT machine reliably disable
> HT, or can it disable one core and keep HT active on the other?

It depends on machine/BIOS. IIRC usually "non ht" logical cpus are
enumerated in in SRAT before ht siblings (kernel goes over this table
and boots cpus untill maxcpus is reached), so it will work fine, but I
don't think it is standardized in any way.
In /proc/cpuinfo among other things you have 1) Linux processor
number, 2) apicid 3) core id and the task is to disable minimal number
of cpus to make core id unique among those which are online.
Of course it doesn't disable HT in any way, just removes certain
logical cpus from scheduler.

Thanks,
Lukas
