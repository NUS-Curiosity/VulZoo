
Date: Mon, 21 Jan 2008 17:04:27 +0000
From: David Malone <dwmalone@...hs.tcd.ie>
To: Florian Weimer <fweimer@....de>
Cc: Tavis Ormandy <taviso@....lonestar.org>,
	bugtraq@...urityfocus.com
Subject: Re: common dns misconfiguration can lead to "same site" scripting

On Mon, Jan 21, 2008 at 09:25:08AM +0100, Florian Weimer wrote:

> | Note that all domains that contain hosts should have a "localhost" A
> | record in them.

> That RFC was obsoleted by RFC 1912 in 1996, so there's no RFC
> conformance issue if you omit the domain names.  But it explains why
> there are so many zones that contain them.

I've always assumed that the reasoning for this is as "localhost"
looks like an unqualified domain name, the search path in resolv.conf/...
will be applied. To avoid having to walk the entire search path
every time localhost is resolved, it is easier to make sure that
localhost is in the domain that is looked up first. This still seems
like a valid thing to do, rather than a misconfiguration.

Would it make sense to update RFC 2109's rules to special case
records resolving to 127.0.0.1 or ::1 (or, more generally, any
address space that is not considered globally unique) unless both
names resolve to addresses in the same block.

	David.
