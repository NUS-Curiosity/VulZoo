
Date: Fri, 18 Feb 2005 21:31:42 -0500 (EST)
From: "David F. Skoll" <dfs@...ringpenguin.com>
To: Maciej Soltysiak <maciej@...tysiak.com>
Cc: bugtraq@...urityfocus.com
Subject: Re: Dangers of discarding duplicated messages


On Fri, 18 Feb 2005, Maciej Soltysiak wrote:

> Developers: Consider using checksum of the email messages, not only the
>             Message-ID to distinguish between duplicated messages.

We have a product that needs to detect duplicate messages (retransmissions
in the face of temporary SMTP failures.)  Obviously, we'd never use
the Message-ID for this.  Less obviously, you can't always use a hash
because some mailers actually change the message body on each retransmission!

For example, Lotus Domino appears to store the e-mail in some internal
format, and generates a new MIME message on each retransmission.  Each
generated message has different MIME boundary delimiters.

So we have to calculate a "modified" hash and ignore bits of the message
that mutate.

--
David.


