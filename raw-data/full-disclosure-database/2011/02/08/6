
Date: Mon, 7 Feb 2011 16:49:05 -0800
From: coderman <coderman@...il.com>
To: "Cal Leeming [Simplicity Media Ltd]" <cal.leeming@...plicitymedialtd.co.uk>
Cc: full-disclosure@...ts.grok.org.uk, Valdis.Kletnieks@...edu
Subject: Re: "IO wait chains" in Linux??

On Mon, Feb 7, 2011 at 4:38 PM, Cal Leeming [Simplicity Media Ltd]
<cal.leeming@...plicitymedialtd.co.uk> wrote:
> ... IO wait / deadlocking was the bane of myÂ existence for the entire
> of 2010 whilst attempting to try out technologies such as DRBD, XFS, OCFS2
> in a HA environment

in this case, there are a suite of tools for the kit. general idiom is
setup measurement and load injection, then executive to define peak /
best capacity configuration. (hah, so simple!)

iozone for disk / storage subsystem measurements. ex.:
iozone -e -i0 -i1 -i2 -i8 -+n -r 16k -s32g -t1
iozone -e -i0 -i1 -i2 -i8 -+n -r 16k -s32g -t2
iozone -e -i0 -i1 -i2 -i8 -+n -r 16k -s32g -t4
iozone -e -i0 -i1 -i2 -i8 -+n -r 16k -s32g -t8
iozone -e -i0 -i1 -i2 -i8 -+n -r 16k -s32g -t...

for memory use ramdisk based block, or native initramfs, or other
memory backed loops and paging.

oprofile / kprobes /sysprof help with measurement rather than load injection.
 http://www.daimi.au.dk/~sandmann/sysprof/
 http://oprofile.sourceforge.net/examples/
 http://oprofile.sourceforge.net/examples/ - Introduction to KProbes


network load injection / measurement is another beast, perhaps someone
else can fill in that huge expanse of tangents.

best regards,

_______________________________________________
Full-Disclosure - We believe in it.
Charter: http://lists.grok.org.uk/full-disclosure-charter.html
Hosted and sponsored by Secunia - http://secunia.com/
