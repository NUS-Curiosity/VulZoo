
Date: Mon, 29 Mar 2010 10:12:38 -0700
From: John Adams <jna@...tter.com>
To: Tim Brown <timb@...-dimension.org.uk>
Cc: full-disclosure@...ts.grok.org.uk, bugtraq@...urityfocus.com,
	"Undisclosed.Recipients:"@lists.grok.org.uk
Subject: Re: Medium security hole in Varnish reverse proxy

Post some code that people can evaluate.

For starters, There's no reason why varnish ever has to run as root.
It never listens on privileged ports, and the C compiler is never
available over a network interface.

You can ask varnish to reload a configuration and recompile it, but
you'd have to have write access to the filesystem first.  You an also
only cause recompilation to occur if the admin interface is up and
running, which can be easily disabled.

Poul is probably correct. Any vulnerabilities in Varnish with regards
to privilege escalation are configuration issues.

-j

On Mon, Mar 29, 2010 at 12:49 AM, Tim Brown <timb@...-dimension.org.uk> wrote:
> Hi,
>
> I've identified a couple of security flaws affecting the Varnish reverse proxy
> which may allow privilege escalation. These issues were reported by email to
> the vendor but he feels that it is a configurational issue rather than a design
> flaw. Â Whilst I can partially see his point in that the administrative
> interface can be disabled, I'm not convinced that making a C compiler
> available over a network interface without authentication is sound practice,
> especially when the resultant compiled code can be made to run as root rather
> trivially.
>
> Tim
> --
> Tim Brown
> <mailto:timb@...-dimension.org.uk>
> <http://www.nth-dimension.org.uk/>
>
> _______________________________________________
> Full-Disclosure - We believe in it.
> Charter: http://lists.grok.org.uk/full-disclosure-charter.html
> Hosted and sponsored by Secunia - http://secunia.com/
>

_______________________________________________
Full-Disclosure - We believe in it.
Charter: http://lists.grok.org.uk/full-disclosure-charter.html
Hosted and sponsored by Secunia - http://secunia.com/
