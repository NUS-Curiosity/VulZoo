
Date: Wed, 16 Aug 2023 17:55:29 +1000
From: Matthew Fernandez <matthew.fernandez@...il.com>
To: fulldisclosure@...lists.org
Subject: Re: [FD] Anomaly in Fedora `dnf update`: md5 mismatch of result


On 8/14/23 21:43, Georgi Guninski wrote:
> In short, I found anomaly in Fedora 37 and would like to
> know if it is vulnerability.
> 
> As root type in terminal:
> dnf update
> 
> If there is kernel update, watch stdout and stderr for:
> 
> ##On Mon Aug 14 05:33:29 AM UTC 2023
> (2/6): kernel-6.4.10-100.fc37.x86_64.rpm        1.2 MB/s | 140 kB     00:00
> /var/cache/dnf/updates-fd4d3d0d1c34d49a/packages/kernel-modules-extra-6.4.9-100.fc37_6.4.10-100.fc37.x86_64.drpm:
> md5 mismatch of result
> 
> ##$ md5sum /var/cache/dnf/updates-fd4d3d0d1c34d49a/packages/kernel-modules-extra-6.4.9-100.fc37_6.4.10-100.fc37.x86_64.drpm
> 356ea04e06bd58db4a15c64e64432f1a
> /var/cache/dnf/updates-fd4d3d0d1c34d49a/packages/kernel-modules-extra-6.4.9-100.fc37_6.4.10-100.fc37.x86_64.drpm
> 
> Another possible approach:  install  Fedora 37 in VM without internet
> access and then do `dnf update` (haven't tested this yet).

If the VM had no access to the internet even a retry would fail, no?

> After second download, the kernel update passes, but I don't
> understand why the second download via http://mirror should pass.

If an attempted update based on a delta-rpm fails, dnf falls back to 
downloading a full rpm and using this instead.
_______________________________________________
Sent through the Full Disclosure mailing list
https://nmap.org/mailman/listinfo/fulldisclosure
Web Archives & RSS: https://seclists.org/fulldisclosure/
