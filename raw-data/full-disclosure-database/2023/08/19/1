
Date: Tue, 15 Aug 2023 21:25:26 +0300
From: Adrean Boyadzhiev <adrean.boyadzhiev@...il.com>
To: gguninski@...il.com
Cc: fulldisclosure@...lists.org
Subject: Re: [FD] Anomaly in Fedora `dnf update`: md5 mismatch of result

Probably a completely different root cause, but I have noticed similar 
behavior with a Debian-based distribution during `# apt upgrade` and 
when there are many packages for update and the internet connection is 
not so good. I haven't investigated, but my assumptions were either Race 
Conditions within verification logic or some logic related to the timestamp.

> Also, isn't md5 deprecated and known to suck much?

To my knowledge `md5` should be ok for calculating hash sums, many 
prefer it since the algorithm is relatively fast and simple.


Best regards,

--
Adrean Boyadzhiev
https://lambdabit.io


On 8/14/23 14:43, Georgi Guninski wrote:
> In short, I found anomaly in Fedora 37 and would like to
> know if it is vulnerability.
>
> As root type in terminal:
> dnf update
>
> If there is kernel update, watch stdout and stderr for:
>
> ##On Mon Aug 14 05:33:29 AM UTC 2023
> (2/6): kernel-6.4.10-100.fc37.x86_64.rpm        1.2 MB/s | 140 kB     00:00
> /var/cache/dnf/updates-fd4d3d0d1c34d49a/packages/kernel-modules-extra-6.4.9-100.fc37_6.4.10-100.fc37.x86_64.drpm:
> md5 mismatch of result
>
> ##$ md5sum /var/cache/dnf/updates-fd4d3d0d1c34d49a/packages/kernel-modules-extra-6.4.9-100.fc37_6.4.10-100.fc37.x86_64.drpm
> 356ea04e06bd58db4a15c64e64432f1a
> /var/cache/dnf/updates-fd4d3d0d1c34d49a/packages/kernel-modules-extra-6.4.9-100.fc37_6.4.10-100.fc37.x86_64.drpm
>
> Another possible approach:  install  Fedora 37 in VM without internet
> access and then do `dnf update` (haven't tested this yet).
>
> After second download, the kernel update passes, but I don't
> understand why the second download via http://mirror should pass.
>
> Examining the dnf source is option.
>
> Open problem:  Can this be vulnerability, possibly assuming
> hostile mirror or network?
>
> Also, isn't md5 deprecated and known to suck much?
>

Download attachment "OpenPGP_0xC5FFCE15F846C301.asc" of type "application/pgp-keys" (670 bytes)

Download attachment "OpenPGP_signature.asc" of type "application/pgp-signature" (237 bytes)

_______________________________________________
Sent through the Full Disclosure mailing list
https://nmap.org/mailman/listinfo/fulldisclosure
Web Archives & RSS: https://seclists.org/fulldisclosure/
