
Date: Tue, 18 Sep 2018 15:12:47 +0200
From: Jean-Baptiste Onofr√© <jb@...thrax.net>
To: user@...af.apache.org, Karaf Dev <dev@...af.apache.org>,
 Apache Security Team <security@...che.org>, oss-security@...ts.openwall.com,
 ktschmidt@...il.com
Subject: [SECURITY] New security advisory for CVE-2018-11787 released for
 Apache Karaf

A new security advisory has been released for Apache Karaf, that is
fixed in recent 3.0.9, 4.0.9 and 4.1.1 releases.

CVS-2018-11787: Apache Karaf unsecure access to Gogo shell in the webconsole

Severity: Moderate

Vendor: The Apache Software Foundation

Versions Affected: all versions of Apache Karaf prior to 3.0.9, 4.0.9,
4.1.1.

Description:

When the webconsole feature is installed in Karaf, it is available at
.../system/console and requires authentication to access it.  One part
of the console is a Gogo shell/console that gives access to the
command line console of Karaf via a Web browser, and when navigated to
it is available at .../system/console/gogo.  Trying to go directly to
that URL does require authentication.

And optional bundle that some applications use is the Pax Web Extender
Whiteboard, it is part of the pax-war feature and perhaps others.
When it is installed, the Gogo console becomes available at another
URL .../gogo/, and that URL is not secured giving access to the Karaf
console to unauthenticated users.

A mitigation for the issue is to manually stop/uninstall Gogo plugin
bundle that is installed with the webconsole feature, although of
course this removes the console from the .../system/console
application, not only from the unauthenticated endpoint.  One could
also stop/uninstall the Pax Web Extender Whiteboard, but other
components/applications may require it and so their functionality
would be reduced/compromised.

This has been fixed in revision:

https://gitbox.apache.org/repos/asf?p=karaf.git;h=cfa213a
https://gitbox.apache.org/repos/asf?p=karaf.git;h=434e525
https://gitbox.apache.org/repos/asf?p=karaf.git;h=1fc60d7

Mitigation: Apache Karaf users should upgrade to 3.0.9, 4.0.9, 4.1.1
or later as soon as possible.

JIRA Tickets: https://issues.apache.org/jira/browse/KARAF-4993

Credit: This issue was reported by Kevin Schmidt
