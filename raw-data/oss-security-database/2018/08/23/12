
Date: Thu, 23 Aug 2018 14:44:40 +0200
From: Leonardo Taccari <iamleot@...il.com>
To: oss-security@...ts.openwall.com
Subject: Re: Re: More Ghostscript Issues: Should we disable PS coders in policy.xml by default?

Hello Mateusz,

Mateusz Lenik writes:
> [...]
> It seems to be possible to disable GhostScript in ImageMagick completely by
> the policy rule below. It's not possible to miss any format with it.
>
> <policy domain="delegate" rights="none" pattern="gs" />
>
> [...]

Please note that this will work *only* when ImageMagick is built
with `--without-gslib'. In that case ImageMagick is not linked
against gslib and ghostscript is directly invoked via `gs' or
similar.

If ImageMagick was built `--with-gslib' then no `gs' is invoked
and there is no delegation, so the problems described by Tavis can
be reproduced with that delegate policy rule as well.


It is probably safer to follow the workaround described in:
<https://www.kb.cert.org/vuls/id/332928>
