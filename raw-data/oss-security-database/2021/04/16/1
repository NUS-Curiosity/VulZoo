
Date: Thu, 15 Apr 2021 14:31:14 -0700
From: Steve Beattie <steve.beattie@...onical.com>
To: oss-security@...ts.openwall.com
Subject: [CVE-2021-3493] Ubuntu Linux kernel overlayfs fs caps privilege
 escalation

Hello,

An independent security researcher reported via the SSD Secure
Disclosure program that the overlayfs stacking file system within the
Linux kernel as used within Ubuntu did not properly validate the
application of file capabilities against user namespaces.

This issue is likely Ubuntu specific, as Ubuntu carries a patch to
enable unprivileged overlayfs mounts. The combination of that patch
plus allowing unprivileged user namespaces by default in Ubuntu allows
an unprivileged attacker to gain elevated privileges.

A commit that addresses the issue was applied in the upstream kernel:

  7c03e2cda4a5 ("vfs: move cap_convert_nscap() call into vfs_setxattr()") (v5.10)

It was added prior to the upstream kernel commit allowing unprivileged
overlayfs mounts:

  459c7c565ac3 ("ovl: unprivieged mounts") (v5.11)

Thus the upstream Linux kernel is not affected.

-- 
Steve Beattie
<sbeattie@...ntu.com>

Download attachment "signature.asc" of type "application/pgp-signature" (834 bytes)
