
Date: Fri, 13 Feb 2015 06:28:37 -0700
From: "Todd C. Miller" <Todd.Miller@...rtesan.com>
To: oss-security@...ts.openwall.com
cc: cve-assign@...re.org
Subject: Re: Re: CVE request: sudo TZ issue

On Fri, 13 Feb 2015 02:05:05 -0500, Rich Felker wrote:

> Why does sudo run the target program with both effective and real ids
> set to root? Why not run with only the effective uid set to root? Then
> the program would know that it's being run by an unprivileged user
> with elevated privileges (and its libc would restrict or ignore
> environment variables for internal libc use). Does such invocation
> break too many programs?

Unfortunately running setuid can result in undesirable behavior
with some programs, especially those that are already setuid.  For
example, things like "sudo passwd" or "sudo crontab" would no longer
work.

Sudo does have a "stay_setuid" setting that will run programs with
the user's real uid but it is not widely used.

 - todd
