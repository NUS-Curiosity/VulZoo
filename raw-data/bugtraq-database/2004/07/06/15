
Date: Tue, 6 Jul 2004 16:12:42 +0200
From: OpenPKG <openpkg@...npkg.org>
To: bugtraq@...urityfocus.com
Subject: [OpenPKG-SA-2004.030] OpenPKG Security Advisory (png)


-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

________________________________________________________________________

OpenPKG Security Advisory                            The OpenPKG Project
http://www.openpkg.org/security.html              http://www.openpkg.org
openpkg-security@...npkg.org                         openpkg@...npkg.org
OpenPKG-SA-2004.030                                          06-Jul-2004
________________________________________________________________________

Package:             png
Vulnerability:       buffer overflow vulnerability
OpenPKG Specific:    no

Affected Releases:   Affected Packages:           Corrected Packages:
OpenPKG CURRENT      <= png-1.2.5-20040527        >= png-1.2.5-20040629
                     <= doxygen-1.3.7-20040507    >= doxygen-1.3.7-20040630
                     <= ghostscript-8.14-20040604 >= ghostscript-8.14-20040630
                     <= kde-qt-3.2.3-20040429     >= kde-qt-3.2.3-20040702
                     <= pdflib-5.0.3-20040625     >= pdflib-5.0.3-20040701
                     <= perl-tk-5.8.4-20040622    >= perl-tk-5.8.4-20040701
                     <= qt-3.3.2-20040615         >= qt-3.3.2-20040702
                     <= rrdtool-1.0.48-20040513   >= rrdtool-1.0.48-20040702
                     <= tetex-2.0.2-20040429      >= tetex-2.0.2-20040702
                     <= wx-2.4.2-20040425         >= wx-2.4.2-20040702

OpenPKG 2.0          <= png-1.2.5-2.0.1           >= png-1.2.5-2.0.2
                     <= doxygen-1.3.6-2.0.1       >= doxygen-1.3.6-2.0.2
                     <= ghostscript-8.13-2.0.1    >= ghostscript-8.13-2.0.2
                     <= pdflib-5.0.3-2.0.1        >= pdflib-5.0.3-2.0.2
                     <= perl-tk-5.8.3-2.0.1       >= perl-tk-5.8.3-2.0.2
                     <= qt-3.2.3-2.0.1            >= qt-3.2.3-2.0.2
                     <= rrdtool-1.0.46-2.0.1      >= rrdtool-1.0.46-2.0.2
                     <= tetex-2.0.2-2.0.1         >= tetex-2.0.2-2.0.2

OpenPKG 1.3          <= png-1.2.5-1.3.1           >= png-1.2.5-1.3.2
                     <= doxygen-1.3.3-1.3.1       >= doxygen-1.3.3-1.3.2
                     <= ghostscript-8.10-1.3.1    >= ghostscript-8.10-1.3.2
                     <= pdflib-5.0.1-1.3.1        >= pdflib-5.0.1-1.3.2
                     <= perl-tk-1.3.0-1.3.1       >= perl-tk-1.3.0-1.3.2
                     <= rrdtool-1.0.45-1.3.1      >= rrdtool-1.0.45-1.3.2
                     <= tetex-2.0.2-1.3.1         >= tetex-2.0.2-1.3.2

Affected Releases:   Dependent Packages:
OpenPKG CURRENT      apache autotrace blender cups emacs gd gdk-pixbuf
                     gif2png gimp gnuplot gqview graphviz gtk2
                     imagemagick imlib latex2html lbreakout libwmf
                     mplayer mrtg nagios netpbm perl-gd php php3 php5
                     povray pstoedit scribus transfig webalizer wml wv
                     xemacs xfig xine-ui xplanet xv zimg

OpenPKG 2.0          apache autotrace emacs gd gdk-pixbuf ghostscript
                     gif2png gimp gnuplot graphviz gtk2 imagemagick
                     imlib latex2html libwmf mozilla netpbm perl-gd
                     perl-tk php png pstoedit qt transfig webalizer wml
                     xfig xv

OpenPKG 1.3          apache autotrace emacs gd gdk-pixbuf gif2png gimp
                     gnuplot graphviz gtk2 imagemagick imlib latex2html
                     libwmf netpbm perl-gd php pstoedit webalizer wml xv


Description:
  In a previous OpenPKG security advisory [0], a buffer overflow
  vulnerability was addressed in the Portable Network Graphics (PNG)
  library libpng [1] in connection with 16-bit samples. The starting
  offsets for the loops are calculated incorrectly which may cause
  a buffer overrun beyond the beginning of the row buffer. The
  Common Vulnerabilities and Exposures (CVE) project assigned the id
  CAN-2002-1363 [2] to the problem. During an audit of Red Hat Linux
  updates, the Fedora Legacy team found another occurrence of this
  buffer overflow related to grayscale images. This OpenPKG update
  addresses the additional problem.

  Please check whether you are affected by running "<prefix>/bin/rpm
  -q png" (and similarly for the other affected packages which have
  PNG included). If you have the "png" package (or one of the others)
  installed and its version is affected (see above), we recommend that
  you immediately upgrade it (see Solution) and its dependent packages
  (see above), if any, too [3][4].

Solution:
  Select the updated source RPM appropriate for your OpenPKG release
  [5][6], fetch it from the OpenPKG FTP service [7][8] or a mirror
  location, verify its integrity [9], build a corresponding binary RPM
  from it [3] and update your OpenPKG installation by applying the
  binary RPM [4]. For the most recent release OpenPKG 2.0, perform the
  following operations to permanently fix the security problem (for
  other releases adjust accordingly).

  $ ftp ftp.openpkg.org
  ftp> bin
  ftp> cd release/2.0/UPD
  ftp> get png-1.2.5-2.0.2.src.rpm
  ftp> bye
  $ <prefix>/bin/openpkg rpm -v --checksig png-1.2.5-2.0.2.src.rpm
  $ <prefix>/bin/openpkg rpm --rebuild png-1.2.5-2.0.2.src.rpm
  $ su -
  # <prefix>/bin/openpkg rpm -Fvh <prefix>/RPM/PKG/png-1.2.5-2.0.2.*.rpm

  Additionally, we recommend that you rebuild and reinstall
  all dependent packages (see above), if any, too [3][4].
________________________________________________________________________

References:
  [0] http://www.openpkg.org/security/OpenPKG-SA-2003.001-png.html
  [1] http://www.libpng.org/pub/png/
  [2] http://cve.mitre.org/cgi-bin/cvename.cgi?name=CAN-2002-1363
  [3] http://www.openpkg.org/tutorial.html#regular-source
  [4] http://www.openpkg.org/tutorial.html#regular-binary
  [5] ftp://ftp.openpkg.org/release/1.3/UPD/png-1.2.5-1.3.2.src.rpm
  [6] ftp://ftp.openpkg.org/release/2.0/UPD/png-1.2.5-2.0.2.src.rpm
  [7] ftp://ftp.openpkg.org/release/1.3/UPD/
  [8] ftp://ftp.openpkg.org/release/2.0/UPD/
  [9] http://www.openpkg.org/security.html#signature
________________________________________________________________________

For security reasons, this advisory was digitally signed with the
OpenPGP public key "OpenPKG <openpkg@...npkg.org>" (ID 63C4CB9F) of the
OpenPKG project which you can retrieve from http://pgp.openpkg.org and
hkp://pgp.openpkg.org. Follow the instructions on http://pgp.openpkg.org/
for details on how to verify the integrity of this advisory.
________________________________________________________________________

-----BEGIN PGP SIGNATURE-----
Comment: OpenPKG <openpkg@...npkg.org>

iD8DBQFA6rMXgHWT4GPEy58RAhg6AJ0e+JlFr6f+DeQ4O6jqWcwK/J2o4gCcDftH
FtWb78lAsCODyiZ/A3tXS8E=
=wWJs
-----END PGP SIGNATURE-----


