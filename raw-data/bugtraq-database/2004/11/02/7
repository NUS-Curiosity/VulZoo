
Date: Sat, 30 Oct 2004 13:50:28 +0200
From: OpenPKG <openpkg@...npkg.org>
To: bugtraq@...urityfocus.com
Subject: [OpenPKG-SA-2004.049] OpenPKG Security Advisory (gd)


-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

________________________________________________________________________

OpenPKG Security Advisory                            The OpenPKG Project
http://www.openpkg.org/security.html              http://www.openpkg.org
openpkg-security@...npkg.org                         openpkg@...npkg.org
OpenPKG-SA-2004.049                                          30-Oct-2004
________________________________________________________________________

Package:             gd
Vulnerability:       denial of service, arbitrary code execution
OpenPKG Specific:    no

Affected Releases:   Affected Packages:       Corrected Packages:
OpenPKG CURRENT      <= gd-2.0.28-20041001    >= gd-2.0.29-20041030
OpenPKG 2.2          <= gd-2.0.28-2.2.0       >= gd-2.0.28-2.2.1
OpenPKG 2.1          <= gd-2.0.27-2.1.1       >= gd-2.0.27-2.1.2

Affected Releases:   Dependent Packages:
OpenPKG CURRENT      analog, apache::with_mod_php_gd, libwmf, mrtg,
                     nagios, perl-gd, php::with_gd, php3::with_gd,
                     php5::with_gd, webalizer, zimg
OpenPKG 2.2          analog, apache::with_mod_php_gd, libwmf, mrtg,
                     perl-gd, php::with_gd, webalizer
OpenPKG 2.1          analog, apache::with_mod_php_gd, libwmf,
                     perl-gd, php::with_gd, webalizer

Description:
  In a BUGTRAQ posting [0], a vulnerability was reported for the
  graphics library GD [1]. There can be an integer overflow when
  allocating memory in the routine that handles loading of PNG image
  files. This later leads to heap data structures being overwritten. If
  an attacker tricked a user into loading a malicious PNG image, they
  could leverage this into executing arbitrary code in the context of
  the user opening the image. Similar integer overflow possibilities
  also exist in other code parts of GD. The Common Vulnerabilities and
  Exposures (CVE) project assigned the id CAN-2004-0990 [2] to the
  problem.

  Please check whether you are affected by running "<prefix>/bin/openpkg
  rpm -q gd". If you have the "gd" package installed and its version is
  affected (see above), we recommend that you immediately upgrade it (see
  Solution) and its dependent packages (see above), if any, too [3][4].

Solution:
  Select the updated source RPM appropriate for your OpenPKG release
  [5][6], fetch it from the OpenPKG FTP service [7][8] or a mirror
  location, verify its integrity [9], build a corresponding binary RPM
  from it [3] and update your OpenPKG installation by applying the
  binary RPM [4]. For the most recent release OpenPKG 2.2, perform the
  following operations to permanently fix the security problem (for
  other releases adjust accordingly).

  $ ftp ftp.openpkg.org
  ftp> bin
  ftp> cd release/2.2/UPD
  ftp> get gd-2.0.28-2.2.1.src.rpm
  ftp> bye
  $ <prefix>/bin/openpkg rpm -v --checksig gd-2.0.28-2.2.1.src.rpm
  $ <prefix>/bin/openpkg rpm --rebuild gd-2.0.28-2.2.1.src.rpm
  $ su -
  # <prefix>/bin/openpkg rpm -Fvh <prefix>/RPM/PKG/gd-2.0.28-2.2.1.*.rpm

  Additionally, we recommend that you rebuild and reinstall
  all dependent packages (see above), if any, too [3][4].
________________________________________________________________________

References:
  [0] http://www.securityfocus.com/archive/1/379382 
  [1] http://www.boutell.com/gd/
  [2] http://cve.mitre.org/cgi-bin/cvename.cgi?name=CAN-2004-0990
  [3] http://www.openpkg.org/tutorial.html#regular-source
  [4] http://www.openpkg.org/tutorial.html#regular-binary
  [5] ftp://ftp.openpkg.org/release/2.2/UPD/gd-2.0.28-2.2.1.src.rpm
  [6] ftp://ftp.openpkg.org/release/2.1/UPD/gd-2.0.27-2.1.2.src.rpm
  [7] ftp://ftp.openpkg.org/release/2.2/UPD/
  [8] ftp://ftp.openpkg.org/release/2.1/UPD/
  [9] http://www.openpkg.org/security.html#signature
________________________________________________________________________

For security reasons, this advisory was digitally signed with the
OpenPGP public key "OpenPKG <openpkg@...npkg.org>" (ID 63C4CB9F) of the
OpenPKG project which you can retrieve from http://pgp.openpkg.org and
hkp://pgp.openpkg.org. Follow the instructions on http://pgp.openpkg.org/
for details on how to verify the integrity of this advisory.
________________________________________________________________________

-----BEGIN PGP SIGNATURE-----
Comment: OpenPKG <openpkg@...npkg.org>

iD8DBQFBg3/lgHWT4GPEy58RAkZ2AKCYEWtrb9gxDdQUHp4V40xcC3aoGgCeLAKa
NjSlMU1Xi905AyVUaoiG298=
=nlRU
-----END PGP SIGNATURE-----


