
Date: Fri, 26 Nov 2004 09:04:35 -0800
From: Martin Buchholz <Martin.Buchholz@....COM>
To: James Youngman <bugtraq@...ession.spiral-arm.org>
Cc: Steve Revilak <srevilak@...akeasy.net>, parimiv@...haw.com,
	levon@...ementarian.org, bugtraq@...urityfocus.com,
	bug-findutils@....org, Tim Nelson <security@...alive.biz>
Subject: Re: Changes to the filesystem while find is running - comments?


James Youngman wrote:
> On Fri, Nov 26, 2004 at 03:23:48PM +1100, Tim Nelson wrote:
> 
> 
>>>What we need to do - and what we do do - is this -
>>>
>>>$tmp = <base name of subdirectory>;
>>
>>	According to the description by Steve Revilak which was sent 
>>through, if you at this point do:
>>
>>$tmp = $tmp + '.';
>>
>>	...then that will fix the problem.  So instead of statting eg. 
>>"/usr/local/bin", you'll be statting "/usr/local/bin/." (note the dot in 
>>the second one).
> 
> 
> It's an interesting idea.  However, the code we have now in
> findutils-4.2.8 works, and I'm reluctant to change this again unless
> we find there's a problem.

Also, I see some problems with the proposed solution.
We need to lstat the name without "/." to find out if
it's a symlink in any case, and stat-ing "foo/." is likely
to be a little slower than stat-ing "foo", for no good
reason.  Only users of automounters should pay an automounter tax.

Martin

> 
> Regards,
> James.

