
Date: Wed, 25 Aug 2004 21:53:39 +0200
From: OpenPKG <openpkg@...npkg.org>
To: bugtraq@...urityfocus.com
Subject: [OpenPKG-SA-2004.038] OpenPKG Security Advisory (zlib)


-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

________________________________________________________________________

OpenPKG Security Advisory                            The OpenPKG Project
http://www.openpkg.org/security.html              http://www.openpkg.org
openpkg-security@...npkg.org                         openpkg@...npkg.org
OpenPKG-SA-2004.038                                          25-Aug-2004
________________________________________________________________________

Package:             zlib
Vulnerability:       denial of service
OpenPKG Specific:    no

Affected Releases:   Affected Packages:           Corrected Packages:
OpenPKG CURRENT      <= zlib-1.2.1-20040207       >= zlib-1.2.1-20040825
                     <= ghostscript-8.14-20040816 >= ghostscript-8.14-20040825
                     <= openpkg-20040811-20040811 >= openpkg-20040825-20040825
OpenPKG 2.1          <= zlib-1.2.1-2.1.0          >= zlib-1.2.1-2.1.1
                     <= ghostscript-8.14-2.1.1    >= ghostscript-8.14-2.1.2
                     <= openpkg-2.1.1-2.1.1       >= openpkg-2.1.2-2.1.2
OpenPKG 2.0          <= zlib-1.2.1-2.0.0          >= zlib-1.2.1-2.0.1
                     <= ghostscript-8.13-2.0.3    >= ghostscript-8.13-2.0.4
                     <= openpkg-2.0.3-2.0.3       >= openpkg-2.0.4-2.0.4

Dependent Packages:  abiword aegis aide analog apache apache2 autotrace
                     blender bsdtar cadaver citadel clamav cups curl
                     cvs cvsps cvsync dia doxygen emacs ethereal expat
                     file firefox gd geoip gif2png gift-gnutella
                     gift-openft gimp gmime gnome-vfs gnupg gnuplot
                     htdig imagemagick ircd jitterbug kcd lbreakout lcms
                     libarchive libwmf libxml lout lynx mixmaster mng
                     mozilla mplayer mrtg mysql mysql3 mysql41 mysqlcc
                     nagios neon netpbm opencdk openpkg openssh pdflib
                     perl-comp perl-gd perl-tk pgpdump php php3 php5 png
                     postgresql pstoedit python qt ripe-dbase rrdtool
                     scribus sio subversion tardy tetex tiff tightvnc
                     transfig ttmkfdir w3m webalizer wml wv xdelta
                     xemacs xfig xmame xplanet xv zimg

Description:
  Triggered by a Debian bug report [1], a denial of service vulnerability
  was found in the ZLib compression library [0] versions 1.2.x
  (older versions are not affected). The problem arises from incorrect
  error handling in the inflate() and inflateBack() functions. The
  Common Vulnerabilities and Exposures (CVE) project assigned the id
  CAN-2004-0797 [2] to the problem.

  Please check whether you are affected by running "<prefix>/bin/openpkg
  rpm -q zlib". If you have the "zlib" package installed and its version
  is affected (see above), we recommend that you immediately upgrade it
  (see Solution) and its dependent packages (see above) as well [3][4].

Solution:
  Select the updated source RPM appropriate for your OpenPKG release
  [5][6], fetch it from the OpenPKG FTP service [7][8] or a mirror
  location, verify its integrity [9], build a corresponding binary RPM
  from it [3] and update your OpenPKG installation by applying the
  binary RPM [4]. For the most recent release OpenPKG 2.1, perform the
  following operations to permanently fix the security problem (for
  other releases adjust accordingly).

  $ ftp ftp.openpkg.org
  ftp> bin
  ftp> cd release/2.1/UPD
  ftp> get zlib-1.2.1-2.1.1.src.rpm
  ftp> bye
  $ <prefix>/bin/openpkg rpm -v --checksig zlib-1.2.1-2.1.1.src.rpm
  $ <prefix>/bin/openpkg rpm --rebuild zlib-1.2.1-2.1.1.src.rpm
  $ su -
  # <prefix>/bin/openpkg rpm -Fvh <prefix>/RPM/PKG/zlib-1.2.1-2.1.1.*.rpm

  Additionally, rebuild and reinstall any other dependent packages (see
  above) already installed in your OpenPKG instance. Only updating the
  "zlib" package is NOT sufficient because of the statically linked old
  "libz.a" code residing in the executables of other dependent packages.

  Due to transitive dependencies and because "zlib" is used by such many
  other libraries and programs, the convenient way to upgrade "zlib" and
  all affected packages is to use the "openpkg-tools" package:

  $ su -
  # <prefix>/bin/openpkg build -Ua | sh
________________________________________________________________________

References:
  [0] http://www.gzip.org/zlib/
  [1] http://bugs.debian.org/252253
  [2] http://cve.mitre.org/cgi-bin/cvename.cgi?name=CAN-2004-0797
  [3] http://www.openpkg.org/tutorial.html#regular-source
  [4] http://www.openpkg.org/tutorial.html#regular-binary
  [5] ftp://ftp.openpkg.org/release/2.1/UPD/zlib-1.2.1-2.1.1.src.rpm
  [6] ftp://ftp.openpkg.org/release/2.0/UPD/zlib-1.2.1-2.0.1.src.rpm
  [7] ftp://ftp.openpkg.org/release/2.1/UPD/
  [8] ftp://ftp.openpkg.org/release/2.0/UPD/
  [9] http://www.openpkg.org/security.html#signature
________________________________________________________________________

For security reasons, this advisory was digitally signed with the
OpenPGP public key "OpenPKG <openpkg@...npkg.org>" (ID 63C4CB9F) of the
OpenPKG project which you can retrieve from http://pgp.openpkg.org and
hkp://pgp.openpkg.org. Follow the instructions on http://pgp.openpkg.org/
for details on how to verify the integrity of this advisory.
________________________________________________________________________

-----BEGIN PGP SIGNATURE-----
Comment: OpenPKG <openpkg@...npkg.org>

iD8DBQFBLO4cgHWT4GPEy58RAkjgAKC948i4v38A8FX513o85Zbqq3aBOACff8Ce
9M2/cv/zac1hHD2/oqzCgUY=
=sbmZ
-----END PGP SIGNATURE-----


