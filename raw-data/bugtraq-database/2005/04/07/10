
Date: Thu, 7 Apr 2005 11:26:09 -0700 (PDT)
From: securityzone@...romedia.com (Macromedia Security Zone)
To: bugtraq@...urityfocus.com
Subject: Macromedia Security Bulletin - ColdFusion MX 6.1



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
MPSB05-02 - Workaround available for ColdFusion MX 6.1 
Updater file disclosure.  

Originally posted: April 7, 2005 

http://www.macromedia.com/go/mpsb05-02 
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 

Summary: 

ColdFusion 6.1 Updater 1 in the ColdFusion MX for JRun4 
configuration only creates a /WEB-INF/cfclasses directory 
under the web server root and places compiled java .class 
files created from .cfms and .cfcs. The .class files can 
be downloaded by end users.  

NOTE:  ColdFusion 7.0 is not affected. 

http://www.macromedia.com/go/mpsb05-02 

~~~~~~~ 

Solution: 

Macromedia has released a workaround addressing the problem. 
This issue will be fixed in the next updater.

~~~~~~~ 

Affected Software Versions:  

J2EE Configuration - ColdFusion MX 6.1 for JRun4 (Updater 1) 

~~~~~~~ 

Severity Rating: 

Macromedia categorizes this issue as a critical update and 
recommends users immediately patch their installations. 

~~~~~~~ 

Details: 

The ColdFusion MX 6.1 Updater renames the 
/jrun4/servers/cfusion/cfusion-ear/cfusion-war/WEB-INF/
cfclasses directory to cfclasses-backup but does not recreate 
the ..../cfusion-war/WEB-INF/cfclasses directory. 

After restarting the ColdFusion server, subsequent requests 
compile .cfms and place the  .class files incorrectly under 
the web server root in a newly created /WEB-INF/cfclasses 
directory, rather than under the application root 
/jrun4/.../cfusion-war/WEB-INF/cfclasses.

~~~~~~~ 

Making the Changes:  

NOTE: Back up your existing files before making changes. 
As always, test the changes in a non-production environment 
before applying the changes to production servers.

J2EE Configuration - ColdFusion MX 6.1 for JRun4

1. Stop all ColdFusion MX 6.1 servers. 
2. Install the ColdFusion MX 6.1 Updater.  

If the ColdFusion MX 6.1 updater has previously been applied, 
delete the existing /WEB-INF/ directory under the web server 
root. For Microsoft IIS, the default is /inetpub/wwwroot/, 
for Apache, /apache/htdocs/, and for IPlanet/SunOne /
{iPlanet / SunOne}/servers/docs/.

3. Create the {jrun_root}/servers/cfusion/cfusion-ear/
cfusion-war/WEB-INF/cfclasses directory. 
4. Start ColdFusion MX 6.1 servers. 

Observe when .cfms are invoked, the .class files are placed 
in {jrun_root}/servers/cfusion/cfusion-ear/cfusion-war/
WEB-INF/cfclasses directory. 

~~~~~~~ 

Acknowledgements: 

Macromedia would like to thank Sean Waddell from ESP Group 
for reporting this vulnerability and for working with us 
to help protect our customers' security.

~~~~~~~ 

Revisions: 

April 7, 2005 - Bulletin first created. 

~~~~~~~ 

Reporting Security Issues: 

Macromedia is committed to addressing security issues and 
providing customers with the information on how they can 
protect themselves. If you identify what you believe may 
be a security issue with a Macromedia product, please send 
an e-mail to secure@...romedia.com. We will work to 
appropriately address and communicate the issue. 

~~~~~~~ 

Receiving Security Bulletins: 

When Macromedia becomes aware of a security issue that we 
believe significantly affects our products or customers, 
we will notify customers when appropriate. Typically this 
notification will be in the form of a security bulletin 
explaining the issue and the response. Macromedia customers 
who would like to receive notification of new security 
bulletins when they are released can sign up for our 
security notification service. 

For additional information on security issues at Macromedia, 
please visit: 
http://www.macromedia.com/security.  


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
ANY INFORMATION, PATCHES, DOWNLOADS, WORKAROUNDS OR FIXES 
PROVIDED BY MACROMEDIA IN THIS BULLETIN ARE PROVIDED "AS IS" 
WITHOUT WARRANTY OF ANY KIND. MACROMEDIA AND ITS SUPPLIERS 
DISCLAIM ALL WARRANTIES, WHETHER EXPRESS OR IMPLIED OR 
OTHERWISE, INCLUDING THE WARRANTIES OF MERCHANTABILITY AND 
FITNESS FOR A PARTICULAR PURPOSE. ALSO, THERE IS NO WARRANTY 
OF NON-INFRINGEMENT, TITLE OR QUIET ENJOYMENT. (USA ONLY) 
SOME STATES DO NOT ALLOW THE EXCLUSION OF IMPLIED WARRANTIES, 
SO THE ABOVE EXCLUSION MAY NOT APPLY TO YOU. 

IN NO EVENT SHALL MACROMEDIA, INC. OR ITS SUPPLIERS BE 
LIABLE FOR ANY DAMAGES WHATSOEVER INCLUDING, WITHOUT 
LIMITATION, DIRECT, INDIRECT, INCIDENTAL, CONSEQUENTIAL, 
SPECIAL, PUNITIVE, COVER, LOSS OF PROFITS, BUSINESS 
INTERRUPTION OR THE LIKE, OR LOSS OF BUSINESS DAMAGES, 
BASED ON ANY THEORY OF LIABILITY INCLUDING BREACH OF 
CONTRACT, BREACH OF WARRANTY, TORT(INCLUDING NEGLIGENCE), 
PRODUCT LIABILITY OR OTHERWISE, EVEN IF MACROMEDIA, INC. 
OR ITS SUPPLIERS OR THEIR REPRESENTATIVES HAVE BEEN 
ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. (USA ONLY) 
SOME STATES DO NOT ALLOW THE EXCLUSION OR LIMITATION OF 
LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES, SO THE 
ABOVE EXCLUSION OR LIMITATION MAY NOT APPLY TO YOU AND 
YOU MAY ALSO HAVE OTHER LEGAL RIGHTS THAT VARY FROM STATE 
TO STATE. 

Macromedia reserves the right, from time to time, to 
update the information in this document with current 
information. 

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
Macromedia Support, Privacy, and Unsubscribe Information 
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 

Macromedia Support:  
http://www.macromedia.com/support/ 

Macromedia and your privacy: 
http://www.macromedia.com/help/privacy.html 

Contact Macromedia: 
Thank you for your continued interest in Macromedia products. 
If you'd rather not receive updates about events, classes, or  
products, write to newsflash@....macromedia.com and type 
"no thanks" in the Subject line. You may also change your 
communication preferences by visiting this web page: 

http://www.macromedia.com/go/unsubupdates?email=bugtraq@securityfocus.com 

Macromedia, 601 Townsend St., San Francisco, California 94103 



