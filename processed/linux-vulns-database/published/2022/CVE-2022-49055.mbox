From bippy-5f407fcff5a0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2022-49055: drm/amdkfd: Check for potential null return of kmalloc_array()

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

drm/amdkfd: Check for potential null return of kmalloc_array()

As the kmalloc_array() may return null, the 'event_waiters[i].wait' would lead to null-pointer dereference.
Therefore, it is better to check the return value of kmalloc_array() to avoid this confusion.

The Linux kernel CVE team has assigned CVE-2022-49055 to this issue.


Affected and fixed versions
===========================

	Fixed in 4.9.311 with commit 32cf90a521dcc0f136db7ee5ba32bfe5f79e460e
	Fixed in 4.14.276 with commit 40bf32dbfef866c83a3e74800b81d79e52b6d20b
	Fixed in 4.19.239 with commit 94869bb0de69a812f70231b0eb480bb2f7ae73a6
	Fixed in 5.4.190 with commit c7a268b33882d5feaafd29c1734456f41ba41396
	Fixed in 5.10.112 with commit 1d7a5aae884ca727d41c7ed15d4c82fdb67c040c
	Fixed in 5.15.35 with commit f2658d5966bcee8c3eb487875f459756d4f7cdfc
	Fixed in 5.17.4 with commit 0a692c625e373fef692ffbc7fc41f8a025f01cb7
	Fixed in 5.18 with commit ebbb7bb9e80305820dc2328a371c1b35679f2667

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2022-49055
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/gpu/drm/amd/amdkfd/kfd_events.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/32cf90a521dcc0f136db7ee5ba32bfe5f79e460e
	https://git.kernel.org/stable/c/40bf32dbfef866c83a3e74800b81d79e52b6d20b
	https://git.kernel.org/stable/c/94869bb0de69a812f70231b0eb480bb2f7ae73a6
	https://git.kernel.org/stable/c/c7a268b33882d5feaafd29c1734456f41ba41396
	https://git.kernel.org/stable/c/1d7a5aae884ca727d41c7ed15d4c82fdb67c040c
	https://git.kernel.org/stable/c/f2658d5966bcee8c3eb487875f459756d4f7cdfc
	https://git.kernel.org/stable/c/0a692c625e373fef692ffbc7fc41f8a025f01cb7
	https://git.kernel.org/stable/c/ebbb7bb9e80305820dc2328a371c1b35679f2667
