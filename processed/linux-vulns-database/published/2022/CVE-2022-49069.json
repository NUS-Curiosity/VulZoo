{
   "containers": {
      "cna": {
         "providerMetadata": {
            "orgId": "f4215fc3-5b6b-47ff-a258-f7189bd81038"
         },
         "descriptions": [
            {
               "lang": "en",
               "value": "In the Linux kernel, the following vulnerability has been resolved:\n\ndrm/amd/display: Fix by adding FPU protection for dcn30_internal_validate_bw\n\n[Why]\nBelow general protection fault observed when WebGL Aquarium is run for\nlonger duration. If drm debug logs are enabled and set to 0x1f then the\nissue is observed within 10 minutes of run.\n\n[  100.717056] general protection fault, probably for non-canonical address 0x2d33302d32323032: 0000 [#1] PREEMPT SMP NOPTI\n[  100.727921] CPU: 3 PID: 1906 Comm: DrmThread Tainted: G        W         5.15.30 #12 d726c6a2d6ebe5cf9223931cbca6892f916fe18b\n[  100.754419] RIP: 0010:CalculateSwathWidth+0x1f7/0x44f\n[  100.767109] Code: 00 00 00 f2 42 0f 11 04 f0 48 8b 85 88 00 00 00 f2 42 0f 10 04 f0 48 8b 85 98 00 00 00 f2 42 0f 11 04 f0 48 8b 45 10 0f 57 c0 <f3> 42 0f 2a 04 b0 0f 57 c9 f3 43 0f 2a 0c b4 e8 8c e2 f3 ff 48 8b\n[  100.781269] RSP: 0018:ffffa9230079eeb0 EFLAGS: 00010246\n[  100.812528] RAX: 2d33302d32323032 RBX: 0000000000000500 RCX: 0000000000000000\n[  100.819656] RDX: 0000000000000001 RSI: ffff99deb712c49c RDI: 0000000000000000\n[  100.826781] RBP: ffffa9230079ef50 R08: ffff99deb712460c R09: ffff99deb712462c\n[  100.833907] R10: ffff99deb7124940 R11: ffff99deb7124d70 R12: ffff99deb712ae44\n[  100.841033] R13: 0000000000000001 R14: 0000000000000000 R15: ffffa9230079f0a0\n[  100.848159] FS:  00007af121212640(0000) GS:ffff99deba780000(0000) knlGS:0000000000000000\n[  100.856240] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033\n[  100.861980] CR2: 0000209000fe1000 CR3: 000000011b18c000 CR4: 0000000000350ee0\n[  100.869106] Call Trace:\n[  100.871555]  <TASK>\n[  100.873655]  ? asm_sysvec_reschedule_ipi+0x12/0x20\n[  100.878449]  CalculateSwathAndDETConfiguration+0x1a3/0x6dd\n[  100.883937]  dml31_ModeSupportAndSystemConfigurationFull+0x2ce4/0x76da\n[  100.890467]  ? kallsyms_lookup_buildid+0xc8/0x163\n[  100.895173]  ? kallsyms_lookup_buildid+0xc8/0x163\n[  100.899874]  ? __sprint_symbol+0x80/0x135\n[  100.903883]  ? dm_update_plane_state+0x3f9/0x4d2\n[  100.908500]  ? symbol_string+0xb7/0xde\n[  100.912250]  ? number+0x145/0x29b\n[  100.915566]  ? vsnprintf+0x341/0x5ff\n[  100.919141]  ? desc_read_finalized_seq+0x39/0x87\n[  100.923755]  ? update_load_avg+0x1b9/0x607\n[  100.927849]  ? compute_mst_dsc_configs_for_state+0x7d/0xd5b\n[  100.933416]  ? fetch_pipe_params+0xa4d/0xd0c\n[  100.937686]  ? dc_fpu_end+0x3d/0xa8\n[  100.941175]  dml_get_voltage_level+0x16b/0x180\n[  100.945619]  dcn30_internal_validate_bw+0x10e/0x89b\n[  100.950495]  ? dcn31_validate_bandwidth+0x68/0x1fc\n[  100.955285]  ? resource_build_scaling_params+0x98b/0xb8c\n[  100.960595]  ? dcn31_validate_bandwidth+0x68/0x1fc\n[  100.965384]  dcn31_validate_bandwidth+0x9a/0x1fc\n[  100.970001]  dc_validate_global_state+0x238/0x295\n[  100.974703]  amdgpu_dm_atomic_check+0x9c1/0xbce\n[  100.979235]  ? _printk+0x59/0x73\n[  100.982467]  drm_atomic_check_only+0x403/0x78b\n[  100.986912]  drm_mode_atomic_ioctl+0x49b/0x546\n[  100.991358]  ? drm_ioctl+0x1c1/0x3b3\n[  100.994936]  ? drm_atomic_set_property+0x92a/0x92a\n[  100.999725]  drm_ioctl_kernel+0xdc/0x149\n[  101.003648]  drm_ioctl+0x27f/0x3b3\n[  101.007051]  ? drm_atomic_set_property+0x92a/0x92a\n[  101.011842]  amdgpu_drm_ioctl+0x49/0x7d\n[  101.015679]  __se_sys_ioctl+0x7c/0xb8\n[  101.015685]  do_syscall_64+0x5f/0xb8\n[  101.015690]  ? __irq_exit_rcu+0x34/0x96\n\n[How]\nIt calles populate_dml_pipes which uses doubles to initialize.\nAdding FPU protection avoids context switch and probable loss of vba context\nas there is potential contention while drm debug logs are enabled."
            }
         ],
         "affected": [
            {
               "product": "Linux",
               "vendor": "Linux",
               "defaultStatus": "unaffected",
               "repo": "https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git",
               "programFiles": [
                  "drivers/gpu/drm/amd/display/dc/dcn31/dcn31_resource.c"
               ],
               "versions": [
                  {
                     "version": "1da177e4c3f41524e886b7f1b8a0c1fc7321cac2",
                     "lessThan": "e995c5d52ec7415644eee617fc7e906b51aec7ae",
                     "status": "affected",
                     "versionType": "git"
                  },
                  {
                     "version": "1da177e4c3f41524e886b7f1b8a0c1fc7321cac2",
                     "lessThan": "76f4c5e5f99ee7084b555d9a38e8ffeb16ec65a2",
                     "status": "affected",
                     "versionType": "git"
                  },
                  {
                     "version": "1da177e4c3f41524e886b7f1b8a0c1fc7321cac2",
                     "lessThan": "ca1198849ab0e7af5efb392ef6baf1138f6fc086",
                     "status": "affected",
                     "versionType": "git"
                  }
               ]
            },
            {
               "product": "Linux",
               "vendor": "Linux",
               "defaultStatus": "affected",
               "repo": "https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git",
               "programFiles": [
                  "drivers/gpu/drm/amd/display/dc/dcn31/dcn31_resource.c"
               ],
               "versions": [
                  {
                     "version": "5.16.20",
                     "lessThanOrEqual": "5.16.*",
                     "status": "unaffected",
                     "versionType": "semver"
                  },
                  {
                     "version": "5.17.3",
                     "lessThanOrEqual": "5.17.*",
                     "status": "unaffected",
                     "versionType": "semver"
                  },
                  {
                     "version": "5.18",
                     "lessThanOrEqual": "*",
                     "status": "unaffected",
                     "versionType": "original_commit_for_fix"
                  }
               ]
            }
         ],
         "references": [
            {
               "url": "https://git.kernel.org/stable/c/e995c5d52ec7415644eee617fc7e906b51aec7ae"
            },
            {
               "url": "https://git.kernel.org/stable/c/76f4c5e5f99ee7084b555d9a38e8ffeb16ec65a2"
            },
            {
               "url": "https://git.kernel.org/stable/c/ca1198849ab0e7af5efb392ef6baf1138f6fc086"
            }
         ],
         "title": "drm/amd/display: Fix by adding FPU protection for dcn30_internal_validate_bw",
         "x_generator": {
            "engine": "bippy-5f407fcff5a0"
         }
      }
   },
   "cveMetadata": {
      "assignerOrgId": "f4215fc3-5b6b-47ff-a258-f7189bd81038",
      "cveID": "CVE-2022-49069",
      "requesterUserId": "gregkh@kernel.org",
      "serial": "1",
      "state": "PUBLISHED"
   },
   "dataType": "CVE_RECORD",
   "dataVersion": "5.0"
}
