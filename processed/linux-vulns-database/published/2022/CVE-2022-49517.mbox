From bippy-5f407fcff5a0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2022-49517: ASoC: mediatek: Fix missing of_node_put in mt2701_wm8960_machine_probe

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

ASoC: mediatek: Fix missing of_node_put in mt2701_wm8960_machine_probe

This node pointer is returned by of_parse_phandle() with
refcount incremented in this function.
Calling of_node_put() to avoid the refcount leak.

The Linux kernel CVE team has assigned CVE-2022-49517 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 4.12 with commit 8625c1dbd87631572f8e2c05bc67736b73d6f02f and fixed in 4.14.283 with commit bc2afecaabd2a2c9f17e43b4793a30e3461bfb29
	Issue introduced in 4.12 with commit 8625c1dbd87631572f8e2c05bc67736b73d6f02f and fixed in 4.19.247 with commit 9345122f5fb9f97a206f440f38bb656e53f46912
	Issue introduced in 4.12 with commit 8625c1dbd87631572f8e2c05bc67736b73d6f02f and fixed in 5.4.198 with commit c71494f5f2b444adfd992a7359a0d2a791642b39
	Issue introduced in 4.12 with commit 8625c1dbd87631572f8e2c05bc67736b73d6f02f and fixed in 5.10.121 with commit f279c49f17ce10866087ea6c0c57382158974b63
	Issue introduced in 4.12 with commit 8625c1dbd87631572f8e2c05bc67736b73d6f02f and fixed in 5.15.46 with commit 61a85a20e8df5e0a92cfe169c92425c7bae0753b
	Issue introduced in 4.12 with commit 8625c1dbd87631572f8e2c05bc67736b73d6f02f and fixed in 5.17.14 with commit 318afb1442eeef089fe7f8a8297d97c0302ff6f6
	Issue introduced in 4.12 with commit 8625c1dbd87631572f8e2c05bc67736b73d6f02f and fixed in 5.18.3 with commit 94587aa17abf8b26f543d2b29c44abc21bc36836
	Issue introduced in 4.12 with commit 8625c1dbd87631572f8e2c05bc67736b73d6f02f and fixed in 5.19 with commit 05654431a18fe24e5e46a375d98904134628a102

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2022-49517
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	sound/soc/mediatek/mt2701/mt2701-wm8960.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/bc2afecaabd2a2c9f17e43b4793a30e3461bfb29
	https://git.kernel.org/stable/c/9345122f5fb9f97a206f440f38bb656e53f46912
	https://git.kernel.org/stable/c/c71494f5f2b444adfd992a7359a0d2a791642b39
	https://git.kernel.org/stable/c/f279c49f17ce10866087ea6c0c57382158974b63
	https://git.kernel.org/stable/c/61a85a20e8df5e0a92cfe169c92425c7bae0753b
	https://git.kernel.org/stable/c/318afb1442eeef089fe7f8a8297d97c0302ff6f6
	https://git.kernel.org/stable/c/94587aa17abf8b26f543d2b29c44abc21bc36836
	https://git.kernel.org/stable/c/05654431a18fe24e5e46a375d98904134628a102
