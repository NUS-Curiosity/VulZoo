From bippy-5f407fcff5a0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2022-49491: drm/rockchip: vop: fix possible null-ptr-deref in vop_bind()

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

drm/rockchip: vop: fix possible null-ptr-deref in vop_bind()

It will cause null-ptr-deref in resource_size(), if platform_get_resource()
returns NULL, move calling resource_size() after devm_ioremap_resource() that
will check 'res' to avoid null-ptr-deref.

The Linux kernel CVE team has assigned CVE-2022-49491 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 3.19 with commit 2048e3286f347db5667708e47448176b5329e8d8 and fixed in 4.9.318 with commit 452922955df215a417c80d09dab72bbc667a1861
	Issue introduced in 3.19 with commit 2048e3286f347db5667708e47448176b5329e8d8 and fixed in 4.14.283 with commit fcd6a886443730c39170b8383411e52118aec0a3
	Issue introduced in 3.19 with commit 2048e3286f347db5667708e47448176b5329e8d8 and fixed in 4.19.247 with commit 6ff986e057bf28e2f7690dad410768b2270f9453
	Issue introduced in 3.19 with commit 2048e3286f347db5667708e47448176b5329e8d8 and fixed in 5.4.198 with commit a9b4599665e437de8a1152799c34841b799a2e1c
	Issue introduced in 3.19 with commit 2048e3286f347db5667708e47448176b5329e8d8 and fixed in 5.10.121 with commit 3451852312303d54a003c73bd0ae39cebb960bd5
	Issue introduced in 3.19 with commit 2048e3286f347db5667708e47448176b5329e8d8 and fixed in 5.15.46 with commit b54926bd558d97c888c3d2d87886f3c159d3254a
	Issue introduced in 3.19 with commit 2048e3286f347db5667708e47448176b5329e8d8 and fixed in 5.17.14 with commit 769c53bb6116d0eaec0f1fe4ec4b27a74465cad1
	Issue introduced in 3.19 with commit 2048e3286f347db5667708e47448176b5329e8d8 and fixed in 5.18.3 with commit ecfa52654d0c9c333c1fe1611f47105f6bce9591
	Issue introduced in 3.19 with commit 2048e3286f347db5667708e47448176b5329e8d8 and fixed in 5.19 with commit f8c242908ad15bbd604d3bcb54961b7d454c43f8

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2022-49491
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/gpu/drm/rockchip/rockchip_drm_vop.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/452922955df215a417c80d09dab72bbc667a1861
	https://git.kernel.org/stable/c/fcd6a886443730c39170b8383411e52118aec0a3
	https://git.kernel.org/stable/c/6ff986e057bf28e2f7690dad410768b2270f9453
	https://git.kernel.org/stable/c/a9b4599665e437de8a1152799c34841b799a2e1c
	https://git.kernel.org/stable/c/3451852312303d54a003c73bd0ae39cebb960bd5
	https://git.kernel.org/stable/c/b54926bd558d97c888c3d2d87886f3c159d3254a
	https://git.kernel.org/stable/c/769c53bb6116d0eaec0f1fe4ec4b27a74465cad1
	https://git.kernel.org/stable/c/ecfa52654d0c9c333c1fe1611f47105f6bce9591
	https://git.kernel.org/stable/c/f8c242908ad15bbd604d3bcb54961b7d454c43f8
