From bippy-5f407fcff5a0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2022-49189: clk: qcom: clk-rcg2: Update logic to calculate D value for RCG

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

clk: qcom: clk-rcg2: Update logic to calculate D value for RCG

The display pixel clock has a requirement on certain newer platforms to
support M/N as (2/3) and the final D value calculated results in
underflow errors.
As the current implementation does not check for D value is within
the accepted range for a given M & N value. Update the logic to
calculate the final D value based on the range.

The Linux kernel CVE team has assigned CVE-2022-49189 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 3.16 with commit 99cbd064b059f222c8839ba433a68b2d6ee33066 and fixed in 5.4.189 with commit 52592f9afbfe01bce8f8953e4f19cbe3bcbdbd3a
	Issue introduced in 3.16 with commit 99cbd064b059f222c8839ba433a68b2d6ee33066 and fixed in 5.10.110 with commit 334720f418f57b1d969dad2117b21f9388cb9395
	Issue introduced in 3.16 with commit 99cbd064b059f222c8839ba433a68b2d6ee33066 and fixed in 5.15.33 with commit 34dca60982e93e69ae442aa2d36ce61c9a3bb563
	Issue introduced in 3.16 with commit 99cbd064b059f222c8839ba433a68b2d6ee33066 and fixed in 5.16.19 with commit 96888f0dcf351e758b9df57e015a48427ca709c1
	Issue introduced in 3.16 with commit 99cbd064b059f222c8839ba433a68b2d6ee33066 and fixed in 5.17.2 with commit a4e2e31971354790b0d1fa3e783452a9d135fcff
	Issue introduced in 3.16 with commit 99cbd064b059f222c8839ba433a68b2d6ee33066 and fixed in 5.18 with commit 58922910add18583d5273c2edcdb9fd7bf4eca02

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2022-49189
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/clk/qcom/clk-rcg2.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/52592f9afbfe01bce8f8953e4f19cbe3bcbdbd3a
	https://git.kernel.org/stable/c/334720f418f57b1d969dad2117b21f9388cb9395
	https://git.kernel.org/stable/c/34dca60982e93e69ae442aa2d36ce61c9a3bb563
	https://git.kernel.org/stable/c/96888f0dcf351e758b9df57e015a48427ca709c1
	https://git.kernel.org/stable/c/a4e2e31971354790b0d1fa3e783452a9d135fcff
	https://git.kernel.org/stable/c/58922910add18583d5273c2edcdb9fd7bf4eca02
