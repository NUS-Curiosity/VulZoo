From bippy-5f407fcff5a0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2022-49673: dm raid: fix KASAN warning in raid5_add_disks

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

dm raid: fix KASAN warning in raid5_add_disks

There's a KASAN warning in raid5_add_disk when running the LVM testsuite.
The warning happens in the test
lvconvert-raid-reshape-linear_to_raid6-single-type.sh. We fix the warning
by verifying that rdev->saved_raid_disk is within limits.

The Linux kernel CVE team has assigned CVE-2022-49673 to this issue.


Affected and fixed versions
===========================

	Fixed in 4.9.322 with commit 2d4e7c9898c20fb3d3f55381cab601761aab7d64
	Fixed in 4.14.287 with commit 2fb2928728038280bd925ce2aafb4997e9d47ee9
	Fixed in 4.19.251 with commit 3553a69bb52be2deba61d0ca064c41aee842bb35
	Fixed in 5.4.204 with commit f157bd9cf377a947fdb7035e69466b6ecdc17c17
	Fixed in 5.10.129 with commit d8bca518d5272fe349e0a722fdb9e3acb661f3f0
	Fixed in 5.15.53 with commit d5b06039b195d4b6f94f5d345b1e4ac1975a9832
	Fixed in 5.18.10 with commit 02cffb1921edadd9b6e4eee7ada4a5213e8ba12e
	Fixed in 5.19 with commit 617b365872a247480e9dcd50a32c8d1806b21861

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2022-49673
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/md/raid5.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/2d4e7c9898c20fb3d3f55381cab601761aab7d64
	https://git.kernel.org/stable/c/2fb2928728038280bd925ce2aafb4997e9d47ee9
	https://git.kernel.org/stable/c/3553a69bb52be2deba61d0ca064c41aee842bb35
	https://git.kernel.org/stable/c/f157bd9cf377a947fdb7035e69466b6ecdc17c17
	https://git.kernel.org/stable/c/d8bca518d5272fe349e0a722fdb9e3acb661f3f0
	https://git.kernel.org/stable/c/d5b06039b195d4b6f94f5d345b1e4ac1975a9832
	https://git.kernel.org/stable/c/02cffb1921edadd9b6e4eee7ada4a5213e8ba12e
	https://git.kernel.org/stable/c/617b365872a247480e9dcd50a32c8d1806b21861
