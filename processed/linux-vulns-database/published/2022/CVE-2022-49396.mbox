From bippy-5f407fcff5a0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2022-49396: phy: qcom-qmp: fix reset-controller leak on probe errors

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

phy: qcom-qmp: fix reset-controller leak on probe errors

Make sure to release the lane reset controller in case of a late probe
error (e.g. probe deferral).

Note that due to the reset controller being defined in devicetree in
"lane" child nodes, devm_reset_control_get_exclusive() cannot be used
directly.

The Linux kernel CVE team has assigned CVE-2022-49396 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 4.12 with commit e78f3d15e115e8e764d4b1562b4fa538f2e22f6b and fixed in 4.14.283 with commit b7b5fbcaac5355e2e695dc0c08a0fcf248250388
	Issue introduced in 4.12 with commit e78f3d15e115e8e764d4b1562b4fa538f2e22f6b and fixed in 4.19.247 with commit a39d9eccb333b8c07c43ebea1c6dfda122378a0f
	Issue introduced in 4.12 with commit e78f3d15e115e8e764d4b1562b4fa538f2e22f6b and fixed in 5.4.198 with commit 7ac21b24af859c097eb4034e93430056068f8f31
	Issue introduced in 4.12 with commit e78f3d15e115e8e764d4b1562b4fa538f2e22f6b and fixed in 5.10.121 with commit 2156dc390402043ba5982489c6625adcb0b0975c
	Issue introduced in 4.12 with commit e78f3d15e115e8e764d4b1562b4fa538f2e22f6b and fixed in 5.15.46 with commit ba173a6f8d8dffed64bb13ab23081bdddfb464f0
	Issue introduced in 4.12 with commit e78f3d15e115e8e764d4b1562b4fa538f2e22f6b and fixed in 5.17.14 with commit feb05b10b3ed3ae21b851520a0d0b71685439517
	Issue introduced in 4.12 with commit e78f3d15e115e8e764d4b1562b4fa538f2e22f6b and fixed in 5.18.3 with commit 8c03eb0c8982677b4e17174073a011788891304d
	Issue introduced in 4.12 with commit e78f3d15e115e8e764d4b1562b4fa538f2e22f6b and fixed in 5.19 with commit 4d2900f20edfe541f75756a00deeb2ffe7c66bc1

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2022-49396
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/phy/qualcomm/phy-qcom-qmp.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/b7b5fbcaac5355e2e695dc0c08a0fcf248250388
	https://git.kernel.org/stable/c/a39d9eccb333b8c07c43ebea1c6dfda122378a0f
	https://git.kernel.org/stable/c/7ac21b24af859c097eb4034e93430056068f8f31
	https://git.kernel.org/stable/c/2156dc390402043ba5982489c6625adcb0b0975c
	https://git.kernel.org/stable/c/ba173a6f8d8dffed64bb13ab23081bdddfb464f0
	https://git.kernel.org/stable/c/feb05b10b3ed3ae21b851520a0d0b71685439517
	https://git.kernel.org/stable/c/8c03eb0c8982677b4e17174073a011788891304d
	https://git.kernel.org/stable/c/4d2900f20edfe541f75756a00deeb2ffe7c66bc1
