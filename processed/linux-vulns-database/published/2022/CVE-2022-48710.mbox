From bippy-5f407fcff5a0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2022-48710: drm/radeon: fix a possible null pointer dereference

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

drm/radeon: fix a possible null pointer dereference

In radeon_fp_native_mode(), the return value of drm_mode_duplicate()
is assigned to mode, which will lead to a NULL pointer dereference
on failure of drm_mode_duplicate(). Add a check to avoid npd.

The failure status of drm_cvt_mode() on the other path is checked too.

The Linux kernel CVE team has assigned CVE-2022-48710 to this issue.


Affected and fixed versions
===========================

	Fixed in 4.9.318 with commit b33f7d99c9226892c7794dc2500fae35966020c9
	Fixed in 4.14.283 with commit 16a0f0b63c4c7eb46fc4c3f00bf2836e6ee46a9f
	Fixed in 4.19.247 with commit 8a89bfeef9abe93371e3ea8796377f2d132eee29
	Fixed in 5.4.198 with commit 28fd384c78d7d8ed8af0d086d778c3e438ba7f60
	Fixed in 5.10.122 with commit fee8ae0a0bb66eb7730c22f44fbd7203f63c2eab
	Fixed in 5.15.47 with commit 7b7fba107b2c4ec7673d0f45bdbb9d1af697d9b9
	Fixed in 5.17.15 with commit e938d24f0b7392e142b8aa434f18590d99dbe479
	Fixed in 5.18.4 with commit 140d9807b96e1303f6f2675a7ae8710a2094bd17
	Fixed in 5.19 with commit a2b28708b645c5632dc93669ab06e97874c8244f

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2022-48710
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/gpu/drm/radeon/radeon_connectors.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/b33f7d99c9226892c7794dc2500fae35966020c9
	https://git.kernel.org/stable/c/16a0f0b63c4c7eb46fc4c3f00bf2836e6ee46a9f
	https://git.kernel.org/stable/c/8a89bfeef9abe93371e3ea8796377f2d132eee29
	https://git.kernel.org/stable/c/28fd384c78d7d8ed8af0d086d778c3e438ba7f60
	https://git.kernel.org/stable/c/fee8ae0a0bb66eb7730c22f44fbd7203f63c2eab
	https://git.kernel.org/stable/c/7b7fba107b2c4ec7673d0f45bdbb9d1af697d9b9
	https://git.kernel.org/stable/c/e938d24f0b7392e142b8aa434f18590d99dbe479
	https://git.kernel.org/stable/c/140d9807b96e1303f6f2675a7ae8710a2094bd17
	https://git.kernel.org/stable/c/a2b28708b645c5632dc93669ab06e97874c8244f
