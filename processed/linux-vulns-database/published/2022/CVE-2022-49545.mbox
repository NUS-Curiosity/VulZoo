From bippy-5f407fcff5a0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2022-49545: ALSA: usb-audio: Cancel pending work at closing a MIDI substream

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

ALSA: usb-audio: Cancel pending work at closing a MIDI substream

At closing a USB MIDI output substream, there might be still a pending
work, which would eventually access the rawmidi runtime object that is
being released.  For fixing the race, make sure to cancel the pending
work at closing.

The Linux kernel CVE team has assigned CVE-2022-49545 to this issue.


Affected and fixed versions
===========================

	Fixed in 5.10.121 with commit 40bdb5ec957aca5c5c1924602bef6b0ab18e22d3
	Fixed in 5.15.46 with commit 11868ca21585561659c2575b0d6508ef8e9c4291
	Fixed in 5.17.14 with commit 5e5fe2b6065541c6216a7a003b0cddf386be0d2d
	Fixed in 5.18.3 with commit 517dcef4d2dda0132648f1e4c079ed17bba4d1a4
	Fixed in 5.19 with commit 0125de38122f0f66bf61336158d12a1aabfe6425

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2022-49545
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	sound/usb/midi.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/40bdb5ec957aca5c5c1924602bef6b0ab18e22d3
	https://git.kernel.org/stable/c/11868ca21585561659c2575b0d6508ef8e9c4291
	https://git.kernel.org/stable/c/5e5fe2b6065541c6216a7a003b0cddf386be0d2d
	https://git.kernel.org/stable/c/517dcef4d2dda0132648f1e4c079ed17bba4d1a4
	https://git.kernel.org/stable/c/0125de38122f0f66bf61336158d12a1aabfe6425
