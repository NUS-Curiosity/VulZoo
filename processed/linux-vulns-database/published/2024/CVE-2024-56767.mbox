From bippy-5f407fcff5a0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2024-56767: dmaengine: at_xdmac: avoid null_prt_deref in at_xdmac_prep_dma_memset

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

dmaengine: at_xdmac: avoid null_prt_deref in at_xdmac_prep_dma_memset

The at_xdmac_memset_create_desc may return NULL, which will lead to a
null pointer dereference. For example, the len input is error, or the
atchan->free_descs_list is empty and memory is exhausted. Therefore, add
check to avoid this.

The Linux kernel CVE team has assigned CVE-2024-56767 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 4.2 with commit b206d9a23ac71cb905f5fb6e0cd813406f89b678 and fixed in 5.4.289 with commit 3d229600c54e9e0909080ecaf1aab0642aefa5f0
	Issue introduced in 4.2 with commit b206d9a23ac71cb905f5fb6e0cd813406f89b678 and fixed in 5.10.233 with commit ed1a8aaa344522c0c349ac9042db27ad130ef913
	Issue introduced in 4.2 with commit b206d9a23ac71cb905f5fb6e0cd813406f89b678 and fixed in 5.15.176 with commit 8d364597de9ce2a5f52714224bfe6c2e7a29b303
	Issue introduced in 4.2 with commit b206d9a23ac71cb905f5fb6e0cd813406f89b678 and fixed in 6.1.123 with commit fdba6d5e455388377ec7e82a5913ddfcc7edd93b
	Issue introduced in 4.2 with commit b206d9a23ac71cb905f5fb6e0cd813406f89b678 and fixed in 6.6.69 with commit e658f1c133b854b2ae799147301d82dddb8f3162
	Issue introduced in 4.2 with commit b206d9a23ac71cb905f5fb6e0cd813406f89b678 and fixed in 6.12.8 with commit 54376d8d26596f98ed7432a788314bb9154bf3e3
	Issue introduced in 4.2 with commit b206d9a23ac71cb905f5fb6e0cd813406f89b678 and fixed in 6.13 with commit c43ec96e8d34399bd9dab2f2dc316b904892133f

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2024-56767
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/dma/at_xdmac.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/3d229600c54e9e0909080ecaf1aab0642aefa5f0
	https://git.kernel.org/stable/c/ed1a8aaa344522c0c349ac9042db27ad130ef913
	https://git.kernel.org/stable/c/8d364597de9ce2a5f52714224bfe6c2e7a29b303
	https://git.kernel.org/stable/c/fdba6d5e455388377ec7e82a5913ddfcc7edd93b
	https://git.kernel.org/stable/c/e658f1c133b854b2ae799147301d82dddb8f3162
	https://git.kernel.org/stable/c/54376d8d26596f98ed7432a788314bb9154bf3e3
	https://git.kernel.org/stable/c/c43ec96e8d34399bd9dab2f2dc316b904892133f
