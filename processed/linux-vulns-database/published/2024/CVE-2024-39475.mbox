From bippy-5f407fcff5a0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2024-39475: fbdev: savage: Handle err return when savagefb_check_var failed

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

fbdev: savage: Handle err return when savagefb_check_var failed

The commit 04e5eac8f3ab("fbdev: savage: Error out if pixclock equals zero")
checks the value of pixclock to avoid divide-by-zero error. However
the function savagefb_probe doesn't handle the error return of
savagefb_check_var. When pixclock is 0, it will cause divide-by-zero error.

The Linux kernel CVE team has assigned CVE-2024-39475 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 4.19.308 with commit 224453de8505aede1890f007be973925a3edf6a1 and fixed in 4.19.316 with commit be754cbd77eaf2932408a4e18532e4945274a5c7
	Issue introduced in 5.4.270 with commit 84dce0f6a4cc5b7bfd7242ef9290db8ac1dd77ff and fixed in 5.4.278 with commit 86435f39c18967cdd937d7a49ba539cdea7fb547
	Issue introduced in 5.10.211 with commit 512ee6d6041e007ef5bf200c6e388e172a2c5b24 and fixed in 5.10.219 with commit 32f92b0078ebf79dbe4827288e0acb50d89d3d5b
	Issue introduced in 5.15.150 with commit 8c54acf33e5adaad6374bf3ec1e3aff0591cc8e1 and fixed in 5.15.161 with commit 4b2c67e30b4e1d2ae19dba8b8e8f3b5fd3cf8089
	Issue introduced in 6.1.80 with commit 070398d32c5f3ab0e890374904ad94551c76aec4 and fixed in 6.1.94 with commit edaa57480b876e8203b51df7c3d14a51ea6b09e3
	Issue introduced in 6.6.19 with commit bc3c2e58d73b28b9a8789fca84778ee165a72d13 and fixed in 6.6.34 with commit b8385ff814ca4cb7e63789841e6ec2a14c73e1e8
	Issue introduced in 6.8 with commit 04e5eac8f3ab2ff52fa191c187a46d4fdbc1e288 and fixed in 6.9.5 with commit 5f446859bfa46df0ffb34149499f48a2c2d8cd95
	Issue introduced in 6.8 with commit 04e5eac8f3ab2ff52fa191c187a46d4fdbc1e288 and fixed in 6.10 with commit 6ad959b6703e2c4c5d7af03b4cfd5ff608036339
	Issue introduced in 6.7.7 with commit a9ca4e80d23474f90841251f4ac0d941fa337a01

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2024-39475
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/video/fbdev/savage/savagefb_driver.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/be754cbd77eaf2932408a4e18532e4945274a5c7
	https://git.kernel.org/stable/c/86435f39c18967cdd937d7a49ba539cdea7fb547
	https://git.kernel.org/stable/c/32f92b0078ebf79dbe4827288e0acb50d89d3d5b
	https://git.kernel.org/stable/c/4b2c67e30b4e1d2ae19dba8b8e8f3b5fd3cf8089
	https://git.kernel.org/stable/c/edaa57480b876e8203b51df7c3d14a51ea6b09e3
	https://git.kernel.org/stable/c/b8385ff814ca4cb7e63789841e6ec2a14c73e1e8
	https://git.kernel.org/stable/c/5f446859bfa46df0ffb34149499f48a2c2d8cd95
	https://git.kernel.org/stable/c/6ad959b6703e2c4c5d7af03b4cfd5ff608036339
