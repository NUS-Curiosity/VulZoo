From bippy-5f407fcff5a0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2024-26753: crypto: virtio/akcipher - Fix stack overflow on memcpy

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

crypto: virtio/akcipher - Fix stack overflow on memcpy

sizeof(struct virtio_crypto_akcipher_session_para) is less than
sizeof(struct virtio_crypto_op_ctrl_req::u), copying more bytes from
stack variable leads stack overflow. Clang reports this issue by
commands:
make -j CC=clang-14 mrproper >/dev/null 2>&1
make -j O=/tmp/crypto-build CC=clang-14 allmodconfig >/dev/null 2>&1
make -j O=/tmp/crypto-build W=1 CC=clang-14 drivers/crypto/virtio/
  virtio_crypto_akcipher_algs.o

The Linux kernel CVE team has assigned CVE-2024-26753 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 5.10.209 with commit 1ff57428894fc4f5001d3df0762c1820295d6c4f and fixed in 5.10.212 with commit 37077ed16c7793e21b005979d33f8a61565b7e86
	Issue introduced in 5.18 with commit 59ca6c93387d325e96577d8bd4c23c78c1491c11 and fixed in 6.1.80 with commit 62f361bfea60c6afc3df09c1ad4152e6507f6f47
	Issue introduced in 5.18 with commit 59ca6c93387d325e96577d8bd4c23c78c1491c11 and fixed in 6.6.19 with commit b0365460e945e1117b47cf7329d86de752daff63
	Issue introduced in 5.18 with commit 59ca6c93387d325e96577d8bd4c23c78c1491c11 and fixed in 6.7.7 with commit ef1e47d50324e232d2da484fe55a54274eeb9bc1
	Issue introduced in 5.18 with commit 59ca6c93387d325e96577d8bd4c23c78c1491c11 and fixed in 6.8 with commit c0ec2a712daf133d9996a8a1b7ee2d4996080363

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2024-26753
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/crypto/virtio/virtio_crypto_akcipher_algs.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/37077ed16c7793e21b005979d33f8a61565b7e86
	https://git.kernel.org/stable/c/62f361bfea60c6afc3df09c1ad4152e6507f6f47
	https://git.kernel.org/stable/c/b0365460e945e1117b47cf7329d86de752daff63
	https://git.kernel.org/stable/c/ef1e47d50324e232d2da484fe55a54274eeb9bc1
	https://git.kernel.org/stable/c/c0ec2a712daf133d9996a8a1b7ee2d4996080363
