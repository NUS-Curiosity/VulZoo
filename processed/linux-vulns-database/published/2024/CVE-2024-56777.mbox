From bippy-5f407fcff5a0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2024-56777: drm/sti: avoid potential dereference of error pointers in sti_gdp_atomic_check

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

drm/sti: avoid potential dereference of error pointers in sti_gdp_atomic_check

The return value of drm_atomic_get_crtc_state() needs to be
checked. To avoid use of error pointer 'crtc_state' in case
of the failure.

The Linux kernel CVE team has assigned CVE-2024-56777 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 4.6 with commit dd86dc2f9ae1102f46115be1f1422265c15540f1 and fixed in 5.15.174 with commit f5804567cf9605d6e5ec46c0bb786f7d50f18c13
	Issue introduced in 4.6 with commit dd86dc2f9ae1102f46115be1f1422265c15540f1 and fixed in 6.1.120 with commit b79612ed6bc1a184c45427105c851b5b2d4342ca
	Issue introduced in 4.6 with commit dd86dc2f9ae1102f46115be1f1422265c15540f1 and fixed in 6.6.64 with commit 997b64c3f4c1827c5cfda8ae7f5d13f78d28b541
	Issue introduced in 4.6 with commit dd86dc2f9ae1102f46115be1f1422265c15540f1 and fixed in 6.12.4 with commit 3cf2e7c448e246f7e700c7aa47450d1e27579559
	Issue introduced in 4.6 with commit dd86dc2f9ae1102f46115be1f1422265c15540f1 and fixed in 6.13 with commit e965e771b069421c233d674c3c8cd8c7f7245f42

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2024-56777
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/gpu/drm/sti/sti_gdp.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/f5804567cf9605d6e5ec46c0bb786f7d50f18c13
	https://git.kernel.org/stable/c/b79612ed6bc1a184c45427105c851b5b2d4342ca
	https://git.kernel.org/stable/c/997b64c3f4c1827c5cfda8ae7f5d13f78d28b541
	https://git.kernel.org/stable/c/3cf2e7c448e246f7e700c7aa47450d1e27579559
	https://git.kernel.org/stable/c/e965e771b069421c233d674c3c8cd8c7f7245f42
