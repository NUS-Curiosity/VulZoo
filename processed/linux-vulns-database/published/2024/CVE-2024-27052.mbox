From bippy-d175d3acf727 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2024-27052: wifi: rtl8xxxu: add cancel_work_sync() for c2hcmd_work

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

wifi: rtl8xxxu: add cancel_work_sync() for c2hcmd_work

The workqueue might still be running, when the driver is stopped. To
avoid a use-after-free, call cancel_work_sync() in rtl8xxxu_stop().

The Linux kernel CVE team has assigned CVE-2024-27052 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 5.5 with commit e542e66b7c2e and fixed in 5.10.214 with commit dddedfa3b29a
	Issue introduced in 5.5 with commit e542e66b7c2e and fixed in 5.15.153 with commit ac512507ac89
	Issue introduced in 5.5 with commit e542e66b7c2e and fixed in 6.1.83 with commit 3518cea837de
	Issue introduced in 5.5 with commit e542e66b7c2e and fixed in 6.6.23 with commit 156012667b85
	Issue introduced in 5.5 with commit e542e66b7c2e and fixed in 6.7.11 with commit 7059cdb69f8e
	Issue introduced in 5.5 with commit e542e66b7c2e and fixed in 6.8.2 with commit 58fe3bbddfec
	Issue introduced in 5.5 with commit e542e66b7c2e and fixed in 6.9 with commit 1213acb478a7

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2024-27052
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/net/wireless/realtek/rtl8xxxu/rtl8xxxu_core.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/dddedfa3b29a63c2ca4336663806a6128b8545b4
	https://git.kernel.org/stable/c/ac512507ac89c01ed6cd4ca53032f52cdb23ea59
	https://git.kernel.org/stable/c/3518cea837de4d106efa84ddac18a07b6de1384e
	https://git.kernel.org/stable/c/156012667b85ca7305cb363790d3ae8519a6f41e
	https://git.kernel.org/stable/c/7059cdb69f8e1a2707dd1e2f363348b507ed7707
	https://git.kernel.org/stable/c/58fe3bbddfec10c6b216096d8c0e517cd8463e3a
	https://git.kernel.org/stable/c/1213acb478a7181cd73eeaf00db430f1e45b1361
