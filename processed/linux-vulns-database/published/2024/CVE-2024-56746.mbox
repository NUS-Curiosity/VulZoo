From bippy-5f407fcff5a0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2024-56746: fbdev: sh7760fb: Fix a possible memory leak in sh7760fb_alloc_mem()

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

fbdev: sh7760fb: Fix a possible memory leak in sh7760fb_alloc_mem()

When information such as info->screen_base is not ready, calling
sh7760fb_free_mem() does not release memory correctly. Call
dma_free_coherent() instead.

The Linux kernel CVE team has assigned CVE-2024-56746 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 2.6.27 with commit 4a25e41831ee851c1365d8b41decc22493b18e6d and fixed in 4.19.325 with commit 0d3fb3b3e9d66f7b6346e3b90bc0ff48683539ce
	Issue introduced in 2.6.27 with commit 4a25e41831ee851c1365d8b41decc22493b18e6d and fixed in 5.4.287 with commit d48cbfa90dce506030151915fa3346d67f964af4
	Issue introduced in 2.6.27 with commit 4a25e41831ee851c1365d8b41decc22493b18e6d and fixed in 5.10.231 with commit 29216bb390e36daeebef66abaa02d9751330252b
	Issue introduced in 2.6.27 with commit 4a25e41831ee851c1365d8b41decc22493b18e6d and fixed in 5.15.174 with commit f4fbd70e15fafe36a7583954ce189aaf5536aeec
	Issue introduced in 2.6.27 with commit 4a25e41831ee851c1365d8b41decc22493b18e6d and fixed in 6.1.120 with commit 40f4326ed05a3b3537556ff2a844958b9e779a98
	Issue introduced in 2.6.27 with commit 4a25e41831ee851c1365d8b41decc22493b18e6d and fixed in 6.6.64 with commit 3dd9df8e5f34c6fc4217a7498c1fb3c352d4afc2
	Issue introduced in 2.6.27 with commit 4a25e41831ee851c1365d8b41decc22493b18e6d and fixed in 6.11.11 with commit d10cd53e5a7fb3b7c6f83d4d9a5ea1d97a3ed9a5
	Issue introduced in 2.6.27 with commit 4a25e41831ee851c1365d8b41decc22493b18e6d and fixed in 6.12.2 with commit bad37309c8b8bf1cfc893750df0951a804009ca0
	Issue introduced in 2.6.27 with commit 4a25e41831ee851c1365d8b41decc22493b18e6d and fixed in 6.13 with commit f89d17ae2ac42931be2a0153fecbf8533280c927

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2024-56746
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/video/fbdev/sh7760fb.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/0d3fb3b3e9d66f7b6346e3b90bc0ff48683539ce
	https://git.kernel.org/stable/c/d48cbfa90dce506030151915fa3346d67f964af4
	https://git.kernel.org/stable/c/29216bb390e36daeebef66abaa02d9751330252b
	https://git.kernel.org/stable/c/f4fbd70e15fafe36a7583954ce189aaf5536aeec
	https://git.kernel.org/stable/c/40f4326ed05a3b3537556ff2a844958b9e779a98
	https://git.kernel.org/stable/c/3dd9df8e5f34c6fc4217a7498c1fb3c352d4afc2
	https://git.kernel.org/stable/c/d10cd53e5a7fb3b7c6f83d4d9a5ea1d97a3ed9a5
	https://git.kernel.org/stable/c/bad37309c8b8bf1cfc893750df0951a804009ca0
	https://git.kernel.org/stable/c/f89d17ae2ac42931be2a0153fecbf8533280c927
