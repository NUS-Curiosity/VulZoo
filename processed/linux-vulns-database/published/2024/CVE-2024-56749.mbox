From bippy-5f407fcff5a0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2024-56749: dlm: fix dlm_recover_members refcount on error

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

dlm: fix dlm_recover_members refcount on error

If dlm_recover_members() fails we don't drop the references of the
previous created root_list that holds and keep all rsbs alive during the
recovery. It might be not an unlikely event because ping_members() could
run into an -EINTR if another recovery progress was triggered again.

The Linux kernel CVE team has assigned CVE-2024-56749 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 6.10 with commit 3a747f4a2ee85d51b905e2df940de4a924f8060a and fixed in 6.11.11 with commit 3230718a75a6c30ed60ac920c26be2119fa82b8e
	Issue introduced in 6.10 with commit 3a747f4a2ee85d51b905e2df940de4a924f8060a and fixed in 6.12.2 with commit fb2ec564887af1f365d754f7c306f1b5cd375b5e
	Issue introduced in 6.10 with commit 3a747f4a2ee85d51b905e2df940de4a924f8060a and fixed in 6.13 with commit 200b977ebbc313a59174ba971006a231b3533dc5

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2024-56749
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	fs/dlm/recoverd.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/3230718a75a6c30ed60ac920c26be2119fa82b8e
	https://git.kernel.org/stable/c/fb2ec564887af1f365d754f7c306f1b5cd375b5e
	https://git.kernel.org/stable/c/200b977ebbc313a59174ba971006a231b3533dc5
