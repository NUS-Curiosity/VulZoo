From bippy-5f407fcff5a0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2024-56754: crypto: caam - Fix the pointer passed to caam_qi_shutdown()

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

crypto: caam - Fix the pointer passed to caam_qi_shutdown()

The type of the last parameter given to devm_add_action_or_reset() is
"struct caam_drv_private *", but in caam_qi_shutdown(), it is casted to
"struct device *".

Pass the correct parameter to devm_add_action_or_reset() so that the
resources are released as expected.

The Linux kernel CVE team has assigned CVE-2024-56754 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 5.5 with commit f414de2e2fffd89c8a4e5b5e06b0eba5f9d8b1eb and fixed in 5.10.231 with commit cc386170b3312fd7b5bc4a69a9f52d7f50814526
	Issue introduced in 5.5 with commit f414de2e2fffd89c8a4e5b5e06b0eba5f9d8b1eb and fixed in 5.15.174 with commit 6187727e57aec122c8a99c464c74578c810cbe40
	Issue introduced in 5.5 with commit f414de2e2fffd89c8a4e5b5e06b0eba5f9d8b1eb and fixed in 6.1.120 with commit 66eddb8dcb61065c53098510165f14b54232bcc2
	Issue introduced in 5.5 with commit f414de2e2fffd89c8a4e5b5e06b0eba5f9d8b1eb and fixed in 6.6.64 with commit 1f8e2f597b918ca5827a5c6d00b819d064264d1c
	Issue introduced in 5.5 with commit f414de2e2fffd89c8a4e5b5e06b0eba5f9d8b1eb and fixed in 6.11.11 with commit 84a185aea7b83f620699de0ea36907d588d89cf6
	Issue introduced in 5.5 with commit f414de2e2fffd89c8a4e5b5e06b0eba5f9d8b1eb and fixed in 6.12.2 with commit ad39df0898d3f469776c19d99229be055cc2dcea
	Issue introduced in 5.5 with commit f414de2e2fffd89c8a4e5b5e06b0eba5f9d8b1eb and fixed in 6.13 with commit ad980b04f51f7fb503530bd1cb328ba5e75a250e

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2024-56754
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/crypto/caam/qi.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/cc386170b3312fd7b5bc4a69a9f52d7f50814526
	https://git.kernel.org/stable/c/6187727e57aec122c8a99c464c74578c810cbe40
	https://git.kernel.org/stable/c/66eddb8dcb61065c53098510165f14b54232bcc2
	https://git.kernel.org/stable/c/1f8e2f597b918ca5827a5c6d00b819d064264d1c
	https://git.kernel.org/stable/c/84a185aea7b83f620699de0ea36907d588d89cf6
	https://git.kernel.org/stable/c/ad39df0898d3f469776c19d99229be055cc2dcea
	https://git.kernel.org/stable/c/ad980b04f51f7fb503530bd1cb328ba5e75a250e
