From bippy-5f407fcff5a0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2024-26829: media: ir_toy: fix a memleak in irtoy_tx

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

media: ir_toy: fix a memleak in irtoy_tx

When irtoy_command fails, buf should be freed since it is allocated by
irtoy_tx, or there is a memleak.

The Linux kernel CVE team has assigned CVE-2024-26829 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 5.16 with commit 4114978dcd24e72415276bba60ff4ff355970bbc and fixed in 5.10.210 with commit 486a4176bc783df798bce2903824801af8d2c3ae
	Issue introduced in 5.15.54 with commit a4ac45aff8d38c64104aec21c6529747d94ae75a and fixed in 5.15.149 with commit 207557e393a135c1b6fe1df7cc0741d2c1789fff
	Issue introduced in 5.16 with commit 4114978dcd24e72415276bba60ff4ff355970bbc and fixed in 6.1.79 with commit be76ad74a43f90f340f9f479e6b04f02125f6aef
	Issue introduced in 5.16 with commit 4114978dcd24e72415276bba60ff4ff355970bbc and fixed in 6.6.18 with commit 7219a692ffc00089015ada33b85b334d1a4b6e8e
	Issue introduced in 5.16 with commit 4114978dcd24e72415276bba60ff4ff355970bbc and fixed in 6.7.6 with commit b37259448bbc70af1d0e52a9dd5559a9c29c9621
	Issue introduced in 5.16 with commit 4114978dcd24e72415276bba60ff4ff355970bbc and fixed in 6.8 with commit dc9ceb90c4b42c6e5c6757df1d6257110433788e

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2024-26829
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/media/rc/ir_toy.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/486a4176bc783df798bce2903824801af8d2c3ae
	https://git.kernel.org/stable/c/207557e393a135c1b6fe1df7cc0741d2c1789fff
	https://git.kernel.org/stable/c/be76ad74a43f90f340f9f479e6b04f02125f6aef
	https://git.kernel.org/stable/c/7219a692ffc00089015ada33b85b334d1a4b6e8e
	https://git.kernel.org/stable/c/b37259448bbc70af1d0e52a9dd5559a9c29c9621
	https://git.kernel.org/stable/c/dc9ceb90c4b42c6e5c6757df1d6257110433788e
