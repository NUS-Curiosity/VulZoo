From bippy-d175d3acf727 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2024-35833: dmaengine: fsl-qdma: Fix a memory leak related to the queue command DMA

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

dmaengine: fsl-qdma: Fix a memory leak related to the queue command DMA

This dma_alloc_coherent() is undone neither in the remove function, nor in
the error handling path of fsl_qdma_probe().

Switch to the managed version to fix both issues.

The Linux kernel CVE team has assigned CVE-2024-35833 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 5.1 with commit b092529e0aa0 and fixed in 5.4.269 with commit 1c75fe450b52
	Issue introduced in 5.1 with commit b092529e0aa0 and fixed in 5.10.210 with commit ae6769ba5141
	Issue introduced in 5.1 with commit b092529e0aa0 and fixed in 5.15.149 with commit 15eb996d7d13
	Issue introduced in 5.1 with commit b092529e0aa0 and fixed in 6.1.78 with commit 25ab4d72eb7c
	Issue introduced in 5.1 with commit b092529e0aa0 and fixed in 6.6.17 with commit 5cd8a51517ce
	Issue introduced in 5.1 with commit b092529e0aa0 and fixed in 6.7.5 with commit 198270de9d8e
	Issue introduced in 5.1 with commit b092529e0aa0 and fixed in 6.8 with commit 3aa58cb51318

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2024-35833
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/dma/fsl-qdma.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/1c75fe450b5200c78f4a102a0eb8e15d8f1ccda8
	https://git.kernel.org/stable/c/ae6769ba51417c1c86fb645812d5bff455eee802
	https://git.kernel.org/stable/c/15eb996d7d13cb72a16389231945ada8f0fef2c3
	https://git.kernel.org/stable/c/25ab4d72eb7cbfa0f3d97a139a9b2bfcaa72dd59
	https://git.kernel.org/stable/c/5cd8a51517ce15edbdcea4fc74c4c127ddaa1bd6
	https://git.kernel.org/stable/c/198270de9d8eb3b5d5f030825ea303ef95285d24
	https://git.kernel.org/stable/c/3aa58cb51318e329d203857f7a191678e60bb714
