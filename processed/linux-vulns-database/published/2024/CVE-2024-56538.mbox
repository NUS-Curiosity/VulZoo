From bippy-5f407fcff5a0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2024-56538: drm: zynqmp_kms: Unplug DRM device before removal

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

drm: zynqmp_kms: Unplug DRM device before removal

Prevent userspace accesses to the DRM device from causing
use-after-frees by unplugging the device before we remove it. This
causes any further userspace accesses to result in an error without
further calls into this driver's internals.

The Linux kernel CVE team has assigned CVE-2024-56538 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 5.9 with commit d76271d22694e874ed70791702db9252ffe96a4c and fixed in 6.6.64 with commit a17b9afe58c474657449cf87e238b1788200576b
	Issue introduced in 5.9 with commit d76271d22694e874ed70791702db9252ffe96a4c and fixed in 6.11.11 with commit 4fb97432e28a7e136b2d76135d50e988ada8e1af
	Issue introduced in 5.9 with commit d76271d22694e874ed70791702db9252ffe96a4c and fixed in 6.12.2 with commit 692f52aedccbf79b212a1e14e3735192b4c24a7d
	Issue introduced in 5.9 with commit d76271d22694e874ed70791702db9252ffe96a4c and fixed in 6.13 with commit 2e07c88914fc5289c21820b1aa94f058feb38197

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2024-56538
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/gpu/drm/xlnx/zynqmp_kms.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/a17b9afe58c474657449cf87e238b1788200576b
	https://git.kernel.org/stable/c/4fb97432e28a7e136b2d76135d50e988ada8e1af
	https://git.kernel.org/stable/c/692f52aedccbf79b212a1e14e3735192b4c24a7d
	https://git.kernel.org/stable/c/2e07c88914fc5289c21820b1aa94f058feb38197
