From bippy-d175d3acf727 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2023-52703: net/usb: kalmia: Don't pass act_len in usb_bulk_msg error path

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

net/usb: kalmia: Don't pass act_len in usb_bulk_msg error path

syzbot reported that act_len in kalmia_send_init_packet() is
uninitialized when passing it to the first usb_bulk_msg error path. Jiri
Pirko noted that it's pointless to pass it in the error path, and that
the value that would be printed in the second error path would be the
value of act_len from the first call to usb_bulk_msg.[1]

With this in mind, let's just not pass act_len to the usb_bulk_msg error
paths.

1: https://lore.kernel.org/lkml/Y9pY61y1nwTuzMOa@nanopsycho/

The Linux kernel CVE team has assigned CVE-2023-52703 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 3.0 with commit d40261236e8e and fixed in 4.14.306 with commit 1b5de7d44890
	Issue introduced in 3.0 with commit d40261236e8e and fixed in 4.19.273 with commit 723ef7b66f37
	Issue introduced in 3.0 with commit d40261236e8e and fixed in 5.4.232 with commit a753352622b4
	Issue introduced in 3.0 with commit d40261236e8e and fixed in 5.10.169 with commit 525bdcb0838d
	Issue introduced in 3.0 with commit d40261236e8e and fixed in 5.15.95 with commit 338f826d3afe
	Issue introduced in 3.0 with commit d40261236e8e and fixed in 6.1.13 with commit 02df3170c04a
	Issue introduced in 3.0 with commit d40261236e8e and fixed in 6.2 with commit c68f345b7c42

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2023-52703
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/net/usb/kalmia.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/1b5de7d44890b78519acbcc80d8d1f23ff2872e5
	https://git.kernel.org/stable/c/723ef7b66f37c0841f5a451ccbce47ee1641e081
	https://git.kernel.org/stable/c/a753352622b4f3c0219e0e9c73114b2848ae6042
	https://git.kernel.org/stable/c/525bdcb0838d19d918c7786151ee14661967a030
	https://git.kernel.org/stable/c/338f826d3afead6e4df521f7972a4bef04a72efb
	https://git.kernel.org/stable/c/02df3170c04a8356cd571ab9155a42f030190abc
	https://git.kernel.org/stable/c/c68f345b7c425b38656e1791a0486769a8797016
