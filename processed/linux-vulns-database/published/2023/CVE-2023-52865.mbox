From bippy-d175d3acf727 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2023-52865: clk: mediatek: clk-mt6797: Add check for mtk_alloc_clk_data

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

clk: mediatek: clk-mt6797: Add check for mtk_alloc_clk_data

Add the check for the return value of mtk_alloc_clk_data() in order to
avoid NULL pointer dereference.

The Linux kernel CVE team has assigned CVE-2023-52865 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 4.12 with commit 96596aa06628 and fixed in 4.14.330 with commit c26feedbc561
	Issue introduced in 4.12 with commit 96596aa06628 and fixed in 4.19.299 with commit 4c79cbfb8e9e
	Issue introduced in 4.12 with commit 96596aa06628 and fixed in 5.4.261 with commit 2705c5b97f50
	Issue introduced in 4.12 with commit 96596aa06628 and fixed in 5.10.201 with commit 81b162861107
	Issue introduced in 4.12 with commit 96596aa06628 and fixed in 5.15.139 with commit 3aefc6fcfbad
	Issue introduced in 4.12 with commit 96596aa06628 and fixed in 6.1.63 with commit 357df1c2f6ac
	Issue introduced in 4.12 with commit 96596aa06628 and fixed in 6.5.12 with commit be3f12f16038
	Issue introduced in 4.12 with commit 96596aa06628 and fixed in 6.6.2 with commit 122ac6496e49
	Issue introduced in 4.12 with commit 96596aa06628 and fixed in 6.7 with commit 606f6366a35a

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2023-52865
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/clk/mediatek/clk-mt6797.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/c26feedbc561f2a3cee1a4f717e61bdbdfb4fa92
	https://git.kernel.org/stable/c/4c79cbfb8e9e2311be77182893fda5ea4068c836
	https://git.kernel.org/stable/c/2705c5b97f504e831ae1935c05f0e44f80dfa6b3
	https://git.kernel.org/stable/c/81b16286110728674dcf81137be0687c5055e7bf
	https://git.kernel.org/stable/c/3aefc6fcfbada57fac27f470602d5565e5b76cb4
	https://git.kernel.org/stable/c/357df1c2f6ace96defd557fad709ed1f9f70e16c
	https://git.kernel.org/stable/c/be3f12f16038a558f08fa93cc32fa715746a5235
	https://git.kernel.org/stable/c/122ac6496e4975ddd7ec1edba4f6fc1e15e39478
	https://git.kernel.org/stable/c/606f6366a35a3329545e38129804d65ef26ed7d2
