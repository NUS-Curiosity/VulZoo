From bippy-d3b290d2becc Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2023-52626: net/mlx5e: Fix operation precedence bug in port timestamping napi_poll context

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

net/mlx5e: Fix operation precedence bug in port timestamping napi_poll context

Indirection (*) is of lower precedence than postfix increment (++). Logic
in napi_poll context would cause an out-of-bound read by first increment
the pointer address by byte address space and then dereference the value.
Rather, the intended logic was to dereference first and then increment the
underlying value.

The Linux kernel CVE team has assigned CVE-2023-52626 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 6.6.3 with commit e5d30f7da357 and fixed in 6.6.15 with commit 40e0d0746390
	Issue introduced in 6.7 with commit 92214be5979c and fixed in 6.7.3 with commit 33cdeae8c6fb
	Issue introduced in 6.7 with commit 92214be5979c and fixed in 6.8 with commit 3876638b2c7e
	Issue introduced in 6.5.13 with commit 42b11d1293e5

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2023-52626
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/net/ethernet/mellanox/mlx5/core/en/ptp.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/40e0d0746390c5b0c31144f4f1688d72f3f8d790
	https://git.kernel.org/stable/c/33cdeae8c6fb58cc445f859b67c014dc9f60b4e0
	https://git.kernel.org/stable/c/3876638b2c7ebb2c9d181de1191db0de8cac143a
