From bippy-5f407fcff5a0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2025-21699: gfs2: Truncate address space when flipping GFS2_DIF_JDATA flag

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

gfs2: Truncate address space when flipping GFS2_DIF_JDATA flag

Truncate an inode's address space when flipping the GFS2_DIF_JDATA flag:
depending on that flag, the pages in the address space will either use
buffer heads or iomap_folio_state structs, and we cannot mix the two.

The Linux kernel CVE team has assigned CVE-2025-21699 to this issue.


Affected and fixed versions
===========================

	Fixed in 5.4.290 with commit 2b0bd5051ad1c1e9ef4879f18e15a7712c974f3e
	Fixed in 5.10.234 with commit 8c41abc11aa8438c9ed2d973f97e66674c0355df
	Fixed in 5.15.178 with commit 4e3ded34f3f3c9d7ed2aac7be8cf51153646574a
	Fixed in 6.1.128 with commit 2a40a140e11fec699e128170ccaa98b6b82cb503
	Fixed in 6.6.75 with commit 4dd57d1f0e9844311c635a7fb39abce4f2ac5a61
	Fixed in 6.12.12 with commit 4516febe325342555bb09ca5b396fb816d655821
	Fixed in 6.13.1 with commit 5bb1fd0855bb0abc7d97e44758d6ffed7882d2d0
	Fixed in 6.14-rc1 with commit 7c9d9223802fbed4dee1ae301661bf346964c9d2

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2025-21699
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	fs/gfs2/file.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/2b0bd5051ad1c1e9ef4879f18e15a7712c974f3e
	https://git.kernel.org/stable/c/8c41abc11aa8438c9ed2d973f97e66674c0355df
	https://git.kernel.org/stable/c/4e3ded34f3f3c9d7ed2aac7be8cf51153646574a
	https://git.kernel.org/stable/c/2a40a140e11fec699e128170ccaa98b6b82cb503
	https://git.kernel.org/stable/c/4dd57d1f0e9844311c635a7fb39abce4f2ac5a61
	https://git.kernel.org/stable/c/4516febe325342555bb09ca5b396fb816d655821
	https://git.kernel.org/stable/c/5bb1fd0855bb0abc7d97e44758d6ffed7882d2d0
	https://git.kernel.org/stable/c/7c9d9223802fbed4dee1ae301661bf346964c9d2
