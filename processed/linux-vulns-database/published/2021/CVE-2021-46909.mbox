From bippy-5f407fcff5a0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2021-46909: ARM: footbridge: fix PCI interrupt mapping

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

ARM: footbridge: fix PCI interrupt mapping

Since commit 30fdfb929e82 ("PCI: Add a call to pci_assign_irq() in
pci_device_probe()"), the PCI code will call the IRQ mapping function
whenever a PCI driver is probed. If these are marked as __init, this
causes an oops if a PCI driver is loaded or bound after the kernel has
initialised.

The Linux kernel CVE team has assigned CVE-2021-46909 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 4.13 with commit 30fdfb929e82450bbf3d0e0aba56efbc29b52b52 and fixed in 4.14.232 with commit 532747fd5c7aaa17ee5cf79f3e947c31eb0e35cf
	Issue introduced in 4.13 with commit 30fdfb929e82450bbf3d0e0aba56efbc29b52b52 and fixed in 4.19.189 with commit 2643da6aa57920d9159a1a579fb04f89a2b0d29a
	Issue introduced in 4.13 with commit 30fdfb929e82450bbf3d0e0aba56efbc29b52b52 and fixed in 5.4.114 with commit 871b569a3e67f570df9f5ba195444dc7c621293b
	Issue introduced in 4.13 with commit 30fdfb929e82450bbf3d0e0aba56efbc29b52b52 and fixed in 5.10.32 with commit 1fc087fdb98d556b416c82ed6e3964a30885f47a
	Issue introduced in 4.13 with commit 30fdfb929e82450bbf3d0e0aba56efbc29b52b52 and fixed in 5.11.16 with commit c3efce8cc9807339633ee30e39882f4c8626ee1d
	Issue introduced in 4.13 with commit 30fdfb929e82450bbf3d0e0aba56efbc29b52b52 and fixed in 5.12 with commit 30e3b4f256b4e366a61658c294f6a21b8626dda7

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2021-46909
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	arch/arm/mach-footbridge/cats-pci.c
	arch/arm/mach-footbridge/ebsa285-pci.c
	arch/arm/mach-footbridge/netwinder-pci.c
	arch/arm/mach-footbridge/personal-pci.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/532747fd5c7aaa17ee5cf79f3e947c31eb0e35cf
	https://git.kernel.org/stable/c/2643da6aa57920d9159a1a579fb04f89a2b0d29a
	https://git.kernel.org/stable/c/871b569a3e67f570df9f5ba195444dc7c621293b
	https://git.kernel.org/stable/c/1fc087fdb98d556b416c82ed6e3964a30885f47a
	https://git.kernel.org/stable/c/c3efce8cc9807339633ee30e39882f4c8626ee1d
	https://git.kernel.org/stable/c/30e3b4f256b4e366a61658c294f6a21b8626dda7
