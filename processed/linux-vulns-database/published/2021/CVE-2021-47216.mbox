From bippy-5f407fcff5a0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2021-47216: scsi: advansys: Fix kernel pointer leak

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

scsi: advansys: Fix kernel pointer leak

Pointers should be printed with %p or %px rather than cast to 'unsigned
long' and printed with %lx.

Change %lx to %p to print the hashed pointer.

The Linux kernel CVE team has assigned CVE-2021-47216 to this issue.


Affected and fixed versions
===========================

	Fixed in 4.4.293 with commit 06d7d12efb5c62db9dea15141ae2b322c2719515
	Fixed in 4.9.291 with commit ad19f7046c24f95c674fbea21870479b2b9f5bab
	Fixed in 4.14.256 with commit 5612287991debe310c914600599bd59511ababfb
	Fixed in 4.19.218 with commit f5a0ba4a9b5e70e7b2f767636d26523f9d1ac59d
	Fixed in 5.4.162 with commit cc248790bfdcf879e3094fa248c85bf92cdf9dae
	Fixed in 5.10.82 with commit 055eced3edf5b675d12189081303f6285ef26511
	Fixed in 5.15.5 with commit 27490ae6a85a70242d80615ca74d0362a820d6a7
	Fixed in 5.16 with commit d4996c6eac4c81b8872043e9391563f67f13e406

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2021-47216
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/scsi/advansys.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/06d7d12efb5c62db9dea15141ae2b322c2719515
	https://git.kernel.org/stable/c/ad19f7046c24f95c674fbea21870479b2b9f5bab
	https://git.kernel.org/stable/c/5612287991debe310c914600599bd59511ababfb
	https://git.kernel.org/stable/c/f5a0ba4a9b5e70e7b2f767636d26523f9d1ac59d
	https://git.kernel.org/stable/c/cc248790bfdcf879e3094fa248c85bf92cdf9dae
	https://git.kernel.org/stable/c/055eced3edf5b675d12189081303f6285ef26511
	https://git.kernel.org/stable/c/27490ae6a85a70242d80615ca74d0362a820d6a7
	https://git.kernel.org/stable/c/d4996c6eac4c81b8872043e9391563f67f13e406
