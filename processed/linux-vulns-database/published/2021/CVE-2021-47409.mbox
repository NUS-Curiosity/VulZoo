From bippy-5f407fcff5a0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2021-47409: usb: dwc2: check return value after calling platform_get_resource()

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

usb: dwc2: check return value after calling platform_get_resource()

It will cause null-ptr-deref if platform_get_resource() returns NULL,
we need check the return value.

The Linux kernel CVE team has assigned CVE-2021-47409 to this issue.


Affected and fixed versions
===========================

	Fixed in 4.14.250 with commit 4b7f4a0eb92bf37bea4cd838c7f83ea42823ca8b
	Fixed in 4.19.210 with commit a7182993dd8e09f96839ddc3ac54f9b37370d282
	Fixed in 5.4.152 with commit 8b9c1c33e51d0959f2aec573dfbac0ffd3f5c0b7
	Fixed in 5.10.72 with commit 2754fa3b73df7d0ae042f3ed6cfd9df9042f6262
	Fixed in 5.14.11 with commit 337f00a0bc62d7cb7d10ec0b872c79009a1641df
	Fixed in 5.15 with commit 856e6e8e0f9300befa87dde09edb578555c99a82

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2021-47409
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/usb/dwc2/hcd.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/4b7f4a0eb92bf37bea4cd838c7f83ea42823ca8b
	https://git.kernel.org/stable/c/a7182993dd8e09f96839ddc3ac54f9b37370d282
	https://git.kernel.org/stable/c/8b9c1c33e51d0959f2aec573dfbac0ffd3f5c0b7
	https://git.kernel.org/stable/c/2754fa3b73df7d0ae042f3ed6cfd9df9042f6262
	https://git.kernel.org/stable/c/337f00a0bc62d7cb7d10ec0b872c79009a1641df
	https://git.kernel.org/stable/c/856e6e8e0f9300befa87dde09edb578555c99a82
