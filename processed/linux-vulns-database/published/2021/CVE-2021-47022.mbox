From bippy-851b3ed3d212 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2021-47022: mt76: mt7615: fix memleak when mt7615_unregister_device()

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

mt76: mt7615: fix memleak when mt7615_unregister_device()

mt7615_tx_token_put() should get call before mt76_free_pending_txwi().

The Linux kernel CVE team has assigned CVE-2021-47022 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 5.10.21 with commit aec571968140 and fixed in 5.10.37 with commit 4fa28c807da5
	Issue introduced in 5.11.4 with commit 1aca6c30d4b6 and fixed in 5.11.21 with commit 107bcbb219ac
	Issue introduced in 5.12 with commit a6275e934605 and fixed in 5.12.4 with commit 6c5b2b0c6e5a
	Issue introduced in 5.12 with commit a6275e934605 and fixed in 5.13 with commit 8ab31da7b89f

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2021-47022
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/net/wireless/mediatek/mt76/mt7615/pci_init.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/4fa28c807da54c1d720b3cc12e48eb9bea1e2c8f
	https://git.kernel.org/stable/c/107bcbb219ac84d885ac63b25246f8d33212bc47
	https://git.kernel.org/stable/c/6c5b2b0c6e5a6ce2d8f9f85b8b72bfad60eaa506
	https://git.kernel.org/stable/c/8ab31da7b89f71c4c2defcca989fab7b42f87d71
