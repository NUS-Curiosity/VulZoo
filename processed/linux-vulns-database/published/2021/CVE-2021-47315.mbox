From bippy-d175d3acf727 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2021-47315: memory: fsl_ifc: fix leak of IO mapping on probe failure

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

memory: fsl_ifc: fix leak of IO mapping on probe failure

On probe error the driver should unmap the IO memory.  Smatch reports:

  drivers/memory/fsl_ifc.c:298 fsl_ifc_ctrl_probe() warn: 'fsl_ifc_ctrl_dev->gregs' not released on lines: 298.

The Linux kernel CVE team has assigned CVE-2021-47315 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 3.3 with commit a20cbdeffce2 and fixed in 4.4.276 with commit b7a2bcb4a373
	Issue introduced in 3.3 with commit a20cbdeffce2 and fixed in 4.4.277 with commit bd051b3e184f
	Issue introduced in 3.3 with commit a20cbdeffce2 and fixed in 4.9.276 with commit d0d04b95e8ed
	Issue introduced in 3.3 with commit a20cbdeffce2 and fixed in 4.14.240 with commit 6b3b002de907
	Issue introduced in 3.3 with commit a20cbdeffce2 and fixed in 4.19.198 with commit 94bc2fe46102
	Issue introduced in 3.3 with commit a20cbdeffce2 and fixed in 5.4.134 with commit d9213d4f372d
	Issue introduced in 3.3 with commit a20cbdeffce2 and fixed in 5.10.52 with commit 8d071d270afb
	Issue introduced in 3.3 with commit a20cbdeffce2 and fixed in 5.12.19 with commit 83af5816308b
	Issue introduced in 3.3 with commit a20cbdeffce2 and fixed in 5.13.4 with commit 28f71fd81ebd
	Issue introduced in 3.3 with commit a20cbdeffce2 and fixed in 5.14 with commit 3b132ab67fc7

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2021-47315
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/memory/fsl_ifc.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/b7a2bcb4a3731d68f938207f75ed3e1d41774510
	https://git.kernel.org/stable/c/bd051b3e184fa56eeb6276ee913ba4d48069024b
	https://git.kernel.org/stable/c/d0d04b95e8ed0223844a1d58497c686fe2e4a955
	https://git.kernel.org/stable/c/6b3b002de90738e3c85853a682ce7e0fa078d42b
	https://git.kernel.org/stable/c/94bc2fe46102d1e060fc749c0c19511e76c9995f
	https://git.kernel.org/stable/c/d9213d4f372d30b5bc4d921795d6bed0c0e3eebf
	https://git.kernel.org/stable/c/8d071d270afba468708faca5f7b6d9e656f75e27
	https://git.kernel.org/stable/c/83af5816308b490b05fc8fa27fc1bdc769df200a
	https://git.kernel.org/stable/c/28f71fd81ebd3b386bf5c7c5539664156f7d72c1
	https://git.kernel.org/stable/c/3b132ab67fc7a358fff35e808fa65d4bea452521
