From bippy-d175d3acf727 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2021-47423: drm/nouveau/debugfs: fix file release memory leak

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

drm/nouveau/debugfs: fix file release memory leak

When using single_open() for opening, single_release() should be
called, otherwise the 'op' allocated in single_open() will be leaked.

The Linux kernel CVE team has assigned CVE-2021-47423 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 4.5 with commit 6e9fc177399f and fixed in 4.9.287 with commit df0c94189236
	Issue introduced in 4.5 with commit 6e9fc177399f and fixed in 4.14.251 with commit 9f9d4c88b2ed
	Issue introduced in 4.5 with commit 6e9fc177399f and fixed in 4.19.211 with commit 1508b09945bd
	Issue introduced in 4.5 with commit 6e9fc177399f and fixed in 5.4.153 with commit 11cd944bb87d
	Issue introduced in 4.5 with commit 6e9fc177399f and fixed in 5.10.73 with commit f69556a42043
	Issue introduced in 4.5 with commit 6e9fc177399f and fixed in 5.14.12 with commit 88c3610045ca
	Issue introduced in 4.5 with commit 6e9fc177399f and fixed in 5.15 with commit f5a8703a9c41

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2021-47423
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/gpu/drm/nouveau/nouveau_debugfs.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/df0c9418923679bc6d0060bdb1b5bf2c755159e0
	https://git.kernel.org/stable/c/9f9d4c88b2edc7924e19c44909cfc3fa4e4d3d43
	https://git.kernel.org/stable/c/1508b09945bde393326a9dab73b1fc35f672d771
	https://git.kernel.org/stable/c/11cd944bb87d9e575b94c07c952105eda745b459
	https://git.kernel.org/stable/c/f69556a42043b5444ca712ee889829ba89fdcba8
	https://git.kernel.org/stable/c/88c3610045ca6e699331b6bb5c095c5565f30721
	https://git.kernel.org/stable/c/f5a8703a9c418c6fc54eb772712dfe7641e3991c
