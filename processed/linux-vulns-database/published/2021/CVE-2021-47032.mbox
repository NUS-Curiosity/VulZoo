From bippy-851b3ed3d212 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2021-47032: mt76: mt7915: fix tx skb dma unmap

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

mt76: mt7915: fix tx skb dma unmap

The first pointer in the txp needs to be unmapped as well, otherwise it will
leak DMA mapping entries

The Linux kernel CVE team has assigned CVE-2021-47032 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 5.10 with commit 27d5c528a7ca and fixed in 5.10.37 with commit 4e7914ce2330
	Issue introduced in 5.10 with commit 27d5c528a7ca and fixed in 5.11.21 with commit 4a9dcd6efb2a
	Issue introduced in 5.10 with commit 27d5c528a7ca and fixed in 5.12.4 with commit e2cdc9cb33c5
	Issue introduced in 5.10 with commit 27d5c528a7ca and fixed in 5.13 with commit 7dcf3c04f0ac

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2021-47032
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/net/wireless/mediatek/mt76/mt7915/mac.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/4e7914ce23306b28d377ec395e00e5fde0e6f96e
	https://git.kernel.org/stable/c/4a9dcd6efb2a268fc5707dcfb3b0c412975c4462
	https://git.kernel.org/stable/c/e2cdc9cb33c5963efe1a7c022753386f9463d1b7
	https://git.kernel.org/stable/c/7dcf3c04f0aca746517a77433b33d40868ca4749
