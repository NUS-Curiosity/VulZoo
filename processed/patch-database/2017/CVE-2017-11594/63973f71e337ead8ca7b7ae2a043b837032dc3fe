diff --git a/angular/core/config/marked.coffee b/angular/core/config/marked.coffee
index a42c0fd7843..e59e59b7559 100644
--- a/angular/core/config/marked.coffee
+++ b/angular/core/config/marked.coffee
@@ -1,6 +1,22 @@
-angular.module('loomioApp').config (markedProvider, renderProvider) ->
-  markedProvider.setOptions
-    gfm: true
-    sanitize: true
-    breaks: true
-  markedProvider.setRenderer(renderProvider.$get(0).createRenderer())
+angular.module('loomioApp').config (markedProvider) ->
+  customRenderer = (opts) ->
+    _super   = new marked.Renderer(opts)
+    renderer = _.clone(_super)
+    cook = (text) ->
+      text = emojione.shortnameToImage(text)
+      text = text.replace(/\[\[@([a-zA-Z0-9]+)\]\]/g, "<a class='lmo-user-mention' href='/u/$1'>@$1</a>")
+      text
+
+    renderer.paragraph = (text) -> _super.paragraph cook(text)
+    renderer.listitem  = (text) -> _super.listitem  cook(text)
+    renderer.tablecell = (text) -> _super.tablecell cook(text)
+
+    renderer.heading   = (text, level) ->
+      _super.heading(emojione.shortnameToImage(text), level, text)
+
+    renderer.link      = (href, title, text) ->
+      _super.link(href, title, text).replace('<a ', '<a rel="noopener noreferrer" target="_blank" ')
+
+    renderer
+
+  markedProvider.setRenderer customRenderer(gfm: true, sanitize: true, breaks: true)
diff --git a/angular/core/services/render_service.coffee b/angular/core/services/render_service.coffee
deleted file mode 100644
index 91df6582613..00000000000
--- a/angular/core/services/render_service.coffee
+++ /dev/null
@@ -1,20 +0,0 @@
-angular.module('loomioApp').factory 'render', ->
-  createRenderer: ->
-    renderer = new marked.Renderer()
-    renderer.link = (href, title, text) ->
-      "<a href='#{href}' title='#{title || text}' target='_blank'>#{text}</a>"
-    renderer.paragraph = @cook('p')
-    renderer.listitem  = @cook('li')
-    renderer.tablecell = @cook('td')
-    renderer.heading   = @headerCook
-    renderer
-
-  headerCook: (text, level) ->
-    text = emojione.shortnameToImage(text)
-    "<h#{level}>#{text}</h#{level}>"
-
-  cook: (tag) ->
-    (text) ->
-      text = emojione.shortnameToImage(text)
-      text = text.replace(/\[\[@([a-zA-Z0-9]+)\]\]/g, "<a class='lmo-user-mention' href='/u/$1'>@$1</a>")
-      "<#{tag}>#{text}</#{tag}>"
