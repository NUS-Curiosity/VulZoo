diff --git a/Changelog b/Changelog
index a4a528ff6..440a443ff 100644
--- a/Changelog
+++ b/Changelog
@@ -8,6 +8,8 @@ Nagios Core 4 Change Log
 * On-demand host check always use cached host state (John Frickson)
 * 'รก' causes Serivce Status Information to not be displayed (John Frickson)
 * New Macro(s) to generate URL for host / service object (John Frickson)
+* Fix minor map issues (Troy Lea)
+* Fix lockfile issues (Bryan Heden)
 
 
 4.3.2 - 2017-05-09
diff --git a/THANKS b/THANKS
index 92fbf3e91..dddba66b3 100644
--- a/THANKS
+++ b/THANKS
@@ -320,6 +320,7 @@ wrong, please let me know.
 * Tomer Okavi
 * Ton Voon
 * Torsten Huebler
+* Troy Lea
 * Tyler Lund
 * Uwe Knop
 * Uwe Knop
diff --git a/base/nagios.c b/base/nagios.c
index 267870023..6811aa6c5 100644
--- a/base/nagios.c
+++ b/base/nagios.c
@@ -592,6 +592,22 @@ int main(int argc, char **argv) {
 			program_start = time(NULL);
 			my_free(mac->x[MACRO_PROCESSSTARTTIME]);
 			asprintf(&mac->x[MACRO_PROCESSSTARTTIME], "%llu", (unsigned long long)program_start);
+			
+			/* enter daemon mode (unless we're restarting...) */
+			if(daemon_mode == TRUE && sigrestart == FALSE) {
+
+				result = daemon_init();
+
+				/* we had an error daemonizing, so bail... */
+				if(result == ERROR) {
+					logit(NSLOG_PROCESS_INFO | NSLOG_RUNTIME_ERROR, TRUE, "Bailing out due to failure to daemonize. (PID=%d)", (int)getpid());
+					cleanup();
+					exit(EXIT_FAILURE);
+					}
+
+				/* get new PID */
+				nagios_pid = (int)getpid();
+				}
 
 			/* drop privileges */
 			if(drop_privileges(nagios_user, nagios_group) == ERROR) {
@@ -612,21 +628,6 @@ int main(int argc, char **argv) {
 				/* error has already been logged */
 				exit(EXIT_FAILURE);
 				}
-			/* enter daemon mode (unless we're restarting...) */
-			if(daemon_mode == TRUE && sigrestart == FALSE) {
-
-				result = daemon_init();
-
-				/* we had an error daemonizing, so bail... */
-				if(result == ERROR) {
-					logit(NSLOG_PROCESS_INFO | NSLOG_RUNTIME_ERROR, TRUE, "Bailing out due to failure to daemonize. (PID=%d)", (int)getpid());
-					cleanup();
-					exit(EXIT_FAILURE);
-					}
-
-				/* get new PID */
-				nagios_pid = (int)getpid();
-				}
 
 			/* this must be logged after we read config data, as user may have changed location of main log file */
 			logit(NSLOG_PROCESS_INFO, TRUE, "Nagios %s starting... (PID=%d)\n", PROGRAM_VERSION, (int)getpid());
diff --git a/configure.ac b/configure.ac
index 15a0a6b03..c21ee0d15 100644
--- a/configure.ac
+++ b/configure.ac
@@ -227,6 +227,7 @@ AC_ARG_WITH(checkresult-dir,
 if test x$CHECKRESULTDIR = xno; then
 	CHECKRESULTDIR="$localstatedir/spool/checkresults"
 fi 
+AC_SUBST(CHECKRESULTDIR)
 
 dnl Location of check result path
 TMPDIR=no
@@ -270,7 +271,7 @@ AC_ARG_WITH(lockfile,
 	lockfile=$withval,
 	lockfile=$localstatedir/nagios.lock
 )
-
+AC_SUBST(lockfile)
 
 dnl Determine the library to be used by the iobroker
 
@@ -819,13 +820,6 @@ perl subst sample-config/template-object/printer.cfg
 perl subst sample-config/template-object/switch.cfg
 
 
-
-eval localstatedir=$localstatedir
-eval lockfile=$lockfile
-eval CHECKRESULTDIR=$CHECKRESULTDIR
-AC_SUBST(CHECKRESULTDIR)
-AC_SUBST(lockfile)
-
 dnl Review options
 echo ""
 echo ""
