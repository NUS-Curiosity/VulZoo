diff --git a/package.json b/package.json
index 73df8a7a..caf692f6 100644
--- a/package.json
+++ b/package.json
@@ -1,24 +1,61 @@
 {
-  "name"          : "node-uuid",
-  "description"   : "Rigorous implementation of RFC4122 (v1 and v4) UUIDs.",
-  "url"           : "http://github.com/broofa/node-uuid",
-  "keywords"      : ["uuid", "guid", "rfc4122"],
-  "author"        : "Robert Kieffer <robert@broofa.com>",
-  "contributors"  : [
-    {"name": "Christoph Tavan <dev@tavan.de>", "github": "https://github.com/ctavan"}
-  ],
+  "author": {
+    "email": "robert@broofa.com",
+    "name": "Robert Kieffer"
+  },
   "bin": {
     "uuid": "./bin/uuid"
   },
+  "bugs": {
+    "url": "https://github.com/broofa/node-uuid/issues"
+  },
+  "contributors": [
+    {
+      "name": "AJ ONeal",
+      "email": "coolaj86@gmail.com"
+    },
+    {
+      "name": "Christoph Tavan",
+      "email": "dev@tavan.de"
+    }
+  ],
+  "dependencies": {},
+  "description": "Rigorous implementation of RFC4122 (v1 and v4) UUIDs.",
+  "devDependencies": {
+    "nyc": "^2.2.0"
+  },
+  "directories": {},
+  "homepage": "https://github.com/broofa/node-uuid",
+  "installable": true,
+  "keywords": [
+    "guid",
+    "rfc4122",
+    "uuid"
+  ],
+  "lib": ".",
+  "licenses": [
+    {
+      "type": "MIT",
+      "url": "https://raw.github.com/broofa/node-uuid/master/LICENSE.md"
+    }
+  ],
+  "main": "./uuid.js",
+  "maintainers": [
+    {
+      "name": "broofa",
+      "email": "robert@broofa.com"
+    }
+  ],
+  "name": "node-uuid",
+  "optionalDependencies": {},
+  "repository": {
+    "type": "git",
+    "url": "https://github.com/broofa/node-uuid.git"
+  },
   "scripts": {
-    "test": "node test/test.js",
-    "coverage": "nyc npm test && nyc report"
+    "coverage": "nyc npm test && nyc report",
+    "test": "node test/test.js"
   },
-  "lib"           : ".",
-  "main"          : "./uuid.js",
-  "repository"    : { "type" : "git", "url" : "https://github.com/broofa/node-uuid.git" },
-  "version"       : "1.4.2",
-  "license"       : "MIT",
-  "devDependencies": { "nyc": "^2.2.0" }
-
+  "url": "http://github.com/broofa/node-uuid",
+  "version": "1.4.4"
 }
diff --git a/test/test.js b/test/test.js
index 24692256..5f1113d8 100644
--- a/test/test.js
+++ b/test/test.js
@@ -1,6 +1,9 @@
 if (!this.uuid) {
   // node.js
   uuid = require('../uuid');
+  if (!/_rb/.test(uuid._rng.toString())) {
+    throw new Error("should use crypto for node.js");
+  }
 }
 
 //
diff --git a/uuid.js b/uuid.js
index 8c1a26bc..020a77a6 100644
--- a/uuid.js
+++ b/uuid.js
@@ -19,7 +19,7 @@
   // Moderately fast, high quality
   if ('function' === typeof require) {
     try {
-      var _rb = _global.require('crypto').randomBytes;
+      var _rb = require('crypto').randomBytes;
       _rng = _rb && function() {return _rb(16);};
     } catch(e) {}
   }
@@ -226,6 +226,7 @@
   uuid.parse = parse;
   uuid.unparse = unparse;
   uuid.BufferClass = BufferClass;
+  uuid._rng = _rng;
 
   if (typeof(module) != 'undefined' && module.exports) {
     // Publish as node.js module
@@ -233,7 +234,7 @@
   } else  if (typeof define === 'function' && define.amd) {
     // Publish as AMD module
     define(function() {return uuid;});
- 
+
 
   } else {
     // Publish as global (in browsers)
