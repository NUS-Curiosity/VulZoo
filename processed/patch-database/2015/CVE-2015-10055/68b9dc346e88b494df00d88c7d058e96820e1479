diff --git a/routes/user.js b/routes/user.js
index 4bab10b..cdd563a 100644
--- a/routes/user.js
+++ b/routes/user.js
@@ -18,7 +18,6 @@ router.get('/all', function(req, res, next) {
 
 /* POST create user */
 router.post('/new', function(req, res, next) {
-  console.log(req.body);
 
   var username = req.body.username;
   var password = req.body.password;
@@ -29,6 +28,10 @@ router.post('/new', function(req, res, next) {
     return;
   }
 
+  //SQL INJECTION SHALL NOT PASS!!!
+  var username = conn.escape(username);
+  var password = conn.escape(password);
+
   var conn = mysql.createConnection({
     host    : "ec2-52-1-159-248.compute-1.amazonaws.com",
     user    : "root",
@@ -48,7 +51,7 @@ router.post('/new', function(req, res, next) {
     conn.query("INSERT INTO user (username, password) VALUES ('"+username+"', '"+password+"')", function (err, result) {
       if(err) {
         //Duplicate code
-        if(err.code === "ER_DUP_UNIQUE") {
+        if(err.code === "ER_DUP_ENTRY") {
           res.json({error: "Username already exists."});
         }else{
           console.error("********Failed to insert user**********");
