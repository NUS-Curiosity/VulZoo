diff --git a/mcrouter/lib/carbon/CarbonProtocolReader.cpp b/mcrouter/lib/carbon/CarbonProtocolReader.cpp
index a4cc007cd..67f89c9cf 100644
--- a/mcrouter/lib/carbon/CarbonProtocolReader.cpp
+++ b/mcrouter/lib/carbon/CarbonProtocolReader.cpp
@@ -78,13 +78,11 @@ void CarbonProtocolReader::skip(const FieldType ft) {
     }
     case FieldType::Struct: {
       readStructBegin();
-      while (true) {
-        const auto fieldType = readFieldHeader().first;
-        if (fieldType == FieldType::Stop) {
-          break;
-        }
-        skip(fieldType);
-      }
+      const auto next = readFieldHeader().first;
+      skip(next);
+      break;
+    }
+    case FieldType::Stop: {
       readStructEnd();
       break;
     }
@@ -96,8 +94,10 @@ void CarbonProtocolReader::skip(const FieldType ft) {
       skipKVContainer();
       break;
     }
-    default: { break; }
+    default: {
+      break;
+    }
   }
 }
 
-} // carbon
+} // namespace carbon
diff --git a/mcrouter/lib/carbon/CarbonProtocolReader.h b/mcrouter/lib/carbon/CarbonProtocolReader.h
index 5ec743657..083283f1f 100644
--- a/mcrouter/lib/carbon/CarbonProtocolReader.h
+++ b/mcrouter/lib/carbon/CarbonProtocolReader.h
@@ -245,8 +245,10 @@ class CarbonProtocolReader {
   }
 
   void readStructEnd() {
-    lastFieldId_ = nestedStructFieldIds_.back();
-    nestedStructFieldIds_.pop_back();
+    if (!nestedStructFieldIds_.empty()) {
+      lastFieldId_ = nestedStructFieldIds_.back();
+      nestedStructFieldIds_.pop_back();
+    }
   }
 
   std::pair<std::pair<FieldType, FieldType>, uint32_t>
