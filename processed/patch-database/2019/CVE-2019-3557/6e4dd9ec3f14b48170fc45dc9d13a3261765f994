diff --git a/hphp/runtime/base/output-file.cpp b/hphp/runtime/base/output-file.cpp
index f512b7896d8cb..1b2711b51f224 100644
--- a/hphp/runtime/base/output-file.cpp
+++ b/hphp/runtime/base/output-file.cpp
@@ -66,7 +66,7 @@ bool OutputFile::closeImpl() {
 
 int64_t OutputFile::readImpl(char* /*buffer*/, int64_t /*length*/) {
   raise_warning("cannot read from a php://output stream");
-  return -1;
+  return 0;
 }
 
 int OutputFile::getc() {
diff --git a/hphp/runtime/ext/bz2/bz2-file.cpp b/hphp/runtime/ext/bz2/bz2-file.cpp
index 3b180f730384d..687d014559078 100644
--- a/hphp/runtime/ext/bz2/bz2-file.cpp
+++ b/hphp/runtime/ext/bz2/bz2-file.cpp
@@ -95,7 +95,7 @@ int64_t BZ2File::readImpl(char * buf, int64_t length) {
   if (len <= 0) {
     setEof(true);
     if (len < 0) {
-      return -1;
+      return 0;
     }
   }
   return len;
diff --git a/hphp/test/slow/oob_read_file.php b/hphp/test/slow/oob_read_file.php
new file mode 100644
index 0000000000000..49a9904bdb778
--- /dev/null
+++ b/hphp/test/slow/oob_read_file.php
@@ -0,0 +1,12 @@
+<?hh
+
+<<__EntryPoint>>
+function main() {
+    $a = bzopen("/dev/null", "w");
+    $tmp = stream_get_line($a, 1, "1");
+    var_dump($tmp);
+
+    $a = fopen("php://output", "w");
+    $tmp = stream_get_line($a, 1, "1");
+    var_dump($tmp);
+}
diff --git a/hphp/test/slow/oob_read_file.php.expectf b/hphp/test/slow/oob_read_file.php.expectf
new file mode 100644
index 0000000000000..d2d24bc1eb44d
--- /dev/null
+++ b/hphp/test/slow/oob_read_file.php.expectf
@@ -0,0 +1,4 @@
+string(0) ""
+
+Warning: cannot read from a php://output stream in %s on line %d
+string(0) ""
