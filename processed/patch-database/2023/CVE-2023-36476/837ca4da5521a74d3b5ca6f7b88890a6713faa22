diff --git a/modules/nixos/main.py b/modules/nixos/main.py
index 79ddcc9..0fb00c6 100644
--- a/modules/nixos/main.py
+++ b/modules/nixos/main.py
@@ -54,13 +54,6 @@
 
 """
 
-cfgbootcrypt = """  # Setup keyfile
-  boot.initrd.secrets = {
-    "/crypto_keyfile.bin" = null;
-  };
-
-"""
-
 cfgbootgrubcrypt = """  # Enable grub cryptodisk
   boot.loader.grub.enableCryptodisk=true;
 
@@ -377,7 +370,6 @@ def run():
     # Check partitions
     for part in gs.value("partitions"):
         if part["claimed"] == True and part["fsName"] == "luks":
-            cfg += cfgbootcrypt
             if fw_type != "efi":
                 cfg += cfgbootgrubcrypt
             status = _("Setting up LUKS")
@@ -394,10 +386,9 @@ def run():
                 return (_("Failed to create /crypto_keyfile.bin"), _("Check if you have enough free space on your partition."))
             break
 
-    # Setup keys in /crypto_keyfile. If we use systemd-boot (EFI), don't add /
-    # Goal is to have one password prompt when booted
+    # Setup keys in /crypto_keyfile. Don't add rootfs!
     for part in gs.value("partitions"):
-        if part["claimed"] == True and part["fsName"] == "luks" and part["device"] is not None and not (fw_type == "efi" and part["mountPoint"] == "/"):
+        if part["claimed"] == True and part["fsName"] == "luks" and part["device"] is not None and not part["mountPoint"] == "/":
             if part["fs"] == "linuxswap":
                 cfg += cfgswapcrypt
                 catenate(variables, "swapdev", part["luksMapperName"])
