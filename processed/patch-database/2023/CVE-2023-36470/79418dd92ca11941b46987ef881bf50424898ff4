diff --git a/xwiki-platform-core/xwiki-platform-icon/xwiki-platform-icon-script/pom.xml b/xwiki-platform-core/xwiki-platform-icon/xwiki-platform-icon-script/pom.xml
index 5597ddb2fb08..2bc5ba662da4 100644
--- a/xwiki-platform-core/xwiki-platform-icon/xwiki-platform-icon-script/pom.xml
+++ b/xwiki-platform-core/xwiki-platform-icon/xwiki-platform-icon-script/pom.xml
@@ -39,10 +39,21 @@
       <artifactId>xwiki-platform-icon-api</artifactId>
       <version>${project.version}</version>
     </dependency>
+    <dependency>
+      <groupId>org.xwiki.platform</groupId>
+      <artifactId>xwiki-platform-rendering-xwiki</artifactId>
+      <version>${project.version}</version>
+    </dependency>
     <dependency>
       <groupId>org.xwiki.commons</groupId>
       <artifactId>xwiki-commons-script</artifactId>
       <version>${commons.version}</version>
     </dependency>
+    <dependency>
+      <groupId>org.xwiki.platform</groupId>
+      <artifactId>xwiki-platform-icon-macro</artifactId>
+      <version>${project.version}</version>
+      <scope>runtime</scope>
+    </dependency>
   </dependencies>
 </project>
\ No newline at end of file
diff --git a/xwiki-platform-core/xwiki-platform-icon/xwiki-platform-icon-script/src/main/java/org/xwiki/icon/IconManagerScriptService.java b/xwiki-platform-core/xwiki-platform-icon/xwiki-platform-icon-script/src/main/java/org/xwiki/icon/IconManagerScriptService.java
index e16f86b13e08..42f770d5125c 100644
--- a/xwiki-platform-core/xwiki-platform-icon/xwiki-platform-icon-script/src/main/java/org/xwiki/icon/IconManagerScriptService.java
+++ b/xwiki-platform-core/xwiki-platform-icon/xwiki-platform-icon-script/src/main/java/org/xwiki/icon/IconManagerScriptService.java
@@ -28,6 +28,8 @@
 
 import org.xwiki.component.annotation.Component;
 import org.xwiki.context.Execution;
+import org.xwiki.rendering.internal.util.XWikiSyntaxEscaper;
+import org.xwiki.rendering.syntax.Syntax;
 import org.xwiki.script.service.ScriptService;
 
 /**
@@ -58,6 +60,9 @@ public class IconManagerScriptService implements ScriptService
     @Inject
     private Execution execution;
 
+    @Inject
+    private XWikiSyntaxEscaper escaper;
+
     /**
      * Display an icon with wiki code from the current {@link org.xwiki.icon.IconSet}.
      *
@@ -66,12 +71,7 @@ public class IconManagerScriptService implements ScriptService
      */
     public String render(String iconName)
     {
-        try {
-            return iconManager.render(iconName);
-        } catch (IconException e) {
-            setLastError(e);
-            return null;
-        }
+        return String.format("{{displayIcon name=\"%s\"/}}", escapeXWiki21(iconName));
     }
 
     /**
@@ -84,12 +84,8 @@ public String render(String iconName)
      */
     public String render(String iconName, String iconSetName)
     {
-        try {
-            return iconManager.render(iconName, iconSetName);
-        } catch (IconException e) {
-            setLastError(e);
-            return null;
-        }
+        return String.format("{{displayIcon name=\"%s\" iconSet=\"%s\"/}}", escapeXWiki21(iconName),
+            escapeXWiki21(iconSetName));
     }
 
     /**
@@ -103,12 +99,13 @@ public String render(String iconName, String iconSetName)
      */
     public String render(String iconName, String iconSetName, boolean fallback)
     {
-        try {
-            return iconManager.render(iconName, iconSetName, fallback);
-        } catch (IconException e) {
-            setLastError(e);
-            return null;
-        }
+        return String.format("{{displayIcon name=\"%s\" iconSet=\"%s\" fallback=\"%b\"/}}", escapeXWiki21(iconName),
+            escapeXWiki21(iconSetName), fallback);
+    }
+
+    private String escapeXWiki21(String value)
+    {
+        return this.escaper.escape(value, Syntax.XWIKI_2_1);
     }
 
     /**
diff --git a/xwiki-platform-core/xwiki-platform-icon/xwiki-platform-icon-ui/src/main/resources/IconThemesCode/IconPicker.xml b/xwiki-platform-core/xwiki-platform-icon/xwiki-platform-icon-ui/src/main/resources/IconThemesCode/IconPicker.xml
index a6b5091c152b..aa8c5588b5d0 100644
--- a/xwiki-platform-core/xwiki-platform-icon/xwiki-platform-icon-ui/src/main/resources/IconThemesCode/IconPicker.xml
+++ b/xwiki-platform-core/xwiki-platform-icon/xwiki-platform-icon-ui/src/main/resources/IconThemesCode/IconPicker.xml
@@ -48,7 +48,7 @@
   #set($map = {})
   #set($discard = $map.put('iconThemes', $services.icon.iconSetNames))
   #set($discard = $map.put('currentIconTheme', $services.icon.currentIconSetName))
-  $jsontool.serialize($map)
+  #jsonResponse($map)
 ###########################
 ## DATA: ICONS
 ###########################
@@ -61,7 +61,7 @@
     #set($discard = $icon.put('render', $services.icon.renderHTML($xwikiIcon, $iconTheme)))
     #set($discard = $icons.add($icon))
   #end
-  $jsontool.serialize($icons)
+  #jsonResponse($icons)
 #else
 = Presentation =
 The Icon Picker is a jQuery plugin written by XWiki to help user selecting an icon. See [[IconPickerMacro]] for using this picker easily. If you want to use it manually, read the following.
diff --git a/xwiki-platform-core/xwiki-platform-icon/xwiki-platform-icon-ui/src/main/resources/IconThemesCode/IconPickerMacro.xml b/xwiki-platform-core/xwiki-platform-icon/xwiki-platform-icon-ui/src/main/resources/IconThemesCode/IconPickerMacro.xml
index d712e024ec46..bed45622e00e 100644
--- a/xwiki-platform-core/xwiki-platform-icon/xwiki-platform-icon-ui/src/main/resources/IconThemesCode/IconPickerMacro.xml
+++ b/xwiki-platform-core/xwiki-platform-icon/xwiki-platform-icon-ui/src/main/resources/IconThemesCode/IconPickerMacro.xml
@@ -275,11 +275,11 @@
     <property>
       <code>{{velocity output="false"}}
   $xwiki.ssx.use('IconThemesCode.IconPicker')
-  ## The icons themes may need some SSX, so we ask for a rendering of an icon of each icon theme, to be able to display
-  ## all icon themes in the picker
+  ## The icons themes may need some SSX, so we ask to load the resources of all icon sets to be able to display them
+  ## in the picker.
   ## ToDo: since it is a bit hacky, a better system would be to dynamically load the needed SSX on demand
   #foreach($iconSetName in $services.icon.iconSetNames)
-    $services.icon.render('wiki', $iconSetName)
+    $services.icon.use($iconSetName)
   #end
 {{/velocity}}
 
