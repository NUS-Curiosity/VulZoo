diff --git a/var/Widget/Archive.php b/var/Widget/Archive.php
index 27116a401b..1ee9d39bca 100644
--- a/var/Widget/Archive.php
+++ b/var/Widget/Archive.php
@@ -646,7 +646,7 @@ public function execute()
 
         /** 处理搜索结果跳转 */
         if (isset($this->request->s)) {
-            $filterKeywords = $this->request->filter('search')->s;
+            $filterKeywords = $this->request->filter('search')->get('s');
 
             /** 跳转到搜索页 */
             if (null != $filterKeywords) {
diff --git a/var/Widget/Menu.php b/var/Widget/Menu.php
index faf0ab2624..e12d623823 100644
--- a/var/Widget/Menu.php
+++ b/var/Widget/Menu.php
@@ -127,10 +127,10 @@ public function execute()
         $panelTable = unserialize($this->options->panelTable);
         $extendingParentMenu = empty($panelTable['parent']) ? [] : $panelTable['parent'];
         $extendingChildMenu = empty($panelTable['child']) ? [] : $panelTable['child'];
-        $currentUrl = $this->request->makeUriByRequest();
+        $currentUrl = $this->request->getRequestUrl();
         $adminUrl = $this->options->adminUrl;
         $menu = [];
-        $defaultChildeNode = [null, null, null, 'administrator', false, null];
+        $defaultChildNode = [null, null, null, 'administrator', false, null];
 
         $currentUrlParts = parse_url($currentUrl);
         $currentUrlParams = [];
@@ -158,7 +158,7 @@ public function execute()
 
             foreach ($childNodes[$key] as $inKey => $childNode) {
                 // magic merge
-                $childNode += $defaultChildeNode;
+                $childNode += $defaultChildNode;
                 [$name, $title, $url, $access] = $childNode;
 
                 $hidden = $childNode[4] ?? false;
@@ -255,7 +255,7 @@ public function execute()
         }
 
         $this->menu = $menu;
-        $this->currentUrl = $currentUrl;
+        $this->currentUrl = Common::safeUrl($currentUrl);
     }
 
     /**
