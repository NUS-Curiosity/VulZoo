diff --git a/email_registration.module b/email_registration.module
index 35fb930..61a97a2 100644
--- a/email_registration.module
+++ b/email_registration.module
@@ -13,8 +13,8 @@ function email_registration_user($op, &$edit, &$account, $category = NULL) {
     // if username generated from email record already exists, append underscore and number eg:(chris_123)
     if (db_result(db_query("SELECT count(*) FROM {users} WHERE uid <> %d AND LOWER(name) = LOWER('%s')", $account->uid, $namenew)) > 0) {
       // find the next number available to append to the name
-      $sql = "SELECT SUBSTRING_INDEX(name,'_',-1) FROM {users} WHERE name REGEXP '^%s_[0-9]+$' ORDER BY CAST(SUBSTRING_INDEX(name,'_',-1) AS UNSIGNED) DESC LIMIT 1";
-      $nameidx = db_result(db_query($sql, $namenew));
+      $sql = "SELECT SUBSTRING_INDEX(name,'_',-1) FROM {users} WHERE name REGEXP '%s' ORDER BY CAST(SUBSTRING_INDEX(name,'_',-1) AS UNSIGNED) DESC LIMIT 1";
+      $nameidx = db_result(db_query($sql, '^'. $namenew .'_[0-9]+$'));
       $namenew .= '_'. ($nameidx + 1);
     }
     // replace with generated username
