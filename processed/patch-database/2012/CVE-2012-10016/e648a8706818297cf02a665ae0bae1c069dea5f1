diff --git a/simple-download-button.php b/simple-download-button.php
index b6bbff5..3f95561 100644
--- a/simple-download-button.php
+++ b/simple-download-button.php
@@ -4,7 +4,7 @@
  * Plugin URI: http://tech.halulu.org/?p=849
  * Author: <a href="http://www.halulu.tech/">Halulu</a>
  * Author URI: http://tech.halulu.org/?p=849
- * Version: 1.0
+ * Version: 1.1
  * Description:ショートコードでダウンロードボタンを表示。DLプログラム付きでソースコードや画像もダウンロードできます。Display CSS3 dwonload bottons by simple Shortcode. This plugin comes with a downloading program that let site visitors donwload source code and images, such as html, php and jpeg.
  */
 
@@ -87,17 +87,15 @@ function disp_downloadButton($atts) {
 			'%plugin_url%',
 			'%file%',
 			'%label%',
-			'%name%',
-			'%download_dir%'
+			'%name%'
 		),
 		array(
 			$style,
 			$plugin_url,
 			$file,
-			$label,
-			$download_dir
+			$label
 		),
-		'<div id="simple-download-button"><button %style% onclick="location.href=\'%plugin_url%?file=%file%&download_dir=%download_dir%\'"><b>%label%</b></button></div>'
+		'<div id="simple-download-button"><button %style% onclick="location.href=\'%plugin_url%?file=%file%\'"><b>%label%</b></button></div>'
 	);	
 	
 	return $html;
diff --git a/simple-download-button_dl.php b/simple-download-button_dl.php
index 196689c..d490150 100644
--- a/simple-download-button_dl.php
+++ b/simple-download-button_dl.php
@@ -5,9 +5,19 @@
 
 	/* GET param */
 	$filename = $_GET['file'];
-	if(!$filename){ die("ERROR: a file name to download is not set!"); }
-	
-	$download_filepath = $download_dir. $filename;
+		
+	/* Verify file parameter */
+	$fileinfo =	pathinfo($filename);	
+	if(!$fileinfo['filename']){
+		die("ERROR: Downloading filename is not set. Please set the name. the short code should be wriiten like [dlbt file=dummy.html] ");
+	}elseif(!$fileinfo['extension']){
+		die("ERROR: Unappropriate downloading filename: $filename: no extention.");		
+	}
+	if(!preg_match('/^[a-zA-Z0-9_-]/',$fileinfo['filename'])) {
+		die("ERROR: Unappropriate downloading filename: $filename: filename can contains only 'a-z', 'A-Z' '0-9', '-' and '_'");		
+	}
+	// making file path		
+	$download_filepath = $download_dir. $fileinfo['filename']. '.'. $fileinfo['extension'];
 	
 	// set a file name showed in the dialog box.
 	if(!$dispname){$dispname = $filename;}
@@ -15,7 +25,7 @@
 
 	/* set the Content-type depends on the extention */
 	if (!file_exists($download_filepath)) {
-		die("ERROR: There is not shuch file. Please hit the back button to return.");
+		die("ERROR: There is not shuch file at $download_filepath.");
 	}else{
 		$file_info = pathinfo($download_filepath);
 		$ext = strtolower($file_info["extension"]);
