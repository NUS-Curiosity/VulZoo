From 1d6cfb8e625a944010956714c1802bc1e1fc6c4f Mon Sep 17 00:00:00 2001
From: Szymon Janc <szymon.janc@codecoup.pl>
Date: Fri, 24 Jun 2022 10:25:41 +0200
Subject: monitor: Fix crash when using RTT backend

This fix regression introduced by "monitor: Fix memory leaks".
J-Link shared library is in use if jlink_init() returns 0 and thus
handle shall not be closed.
---
 monitor/jlink.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/monitor/jlink.c b/monitor/jlink.c
index f1d8ce6600..f9d4037f4c 100644
--- a/monitor/jlink.c
+++ b/monitor/jlink.c
@@ -112,7 +112,7 @@ int jlink_init(void)
 		return -EIO;
 	}
 
-	dlclose(so);
+	/* don't dlclose(so) here cause symbols from it are in use now */
 	return 0;
 }
 
-- 
cgit 1.2.3-korg

