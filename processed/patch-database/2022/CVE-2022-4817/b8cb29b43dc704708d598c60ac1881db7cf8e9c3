diff --git a/src/main/java/org/dstadler/jgit/porcelain/CleanUntrackedFiles.java b/src/main/java/org/dstadler/jgit/porcelain/CleanUntrackedFiles.java
old mode 100755
new mode 100644
index 99da592d..adde8ebd
--- a/src/main/java/org/dstadler/jgit/porcelain/CleanUntrackedFiles.java
+++ b/src/main/java/org/dstadler/jgit/porcelain/CleanUntrackedFiles.java
@@ -18,6 +18,7 @@
 
 import java.io.File;
 import java.io.IOException;
+import java.nio.file.Files;
 import java.util.Set;
 
 import org.apache.commons.io.FileUtils;
@@ -27,7 +28,6 @@
 import org.eclipse.jgit.lib.Repository;
 
 
-
 /**
  * Simple snippet which shows how to list all Tags
  *
@@ -43,13 +43,7 @@ public static void main(String[] args) throws IOException, GitAPIException {
             System.out.println("Repository at " + repository.getWorkTree());
 
             File untrackedFile = File.createTempFile("untracked", ".txt", repository.getWorkTree());
-            File untrackedDir = File.createTempFile("untrackedDir", "", repository.getWorkTree());
-            if(!untrackedDir.delete()) {
-                throw new IOException("Could not delete file " + untrackedDir);
-            }
-            if(!untrackedDir.mkdirs()) {
-                throw new IOException("Could not create directory " + untrackedDir);
-            }
+            File untrackedDir = Files.createTempDirectory(repository.getWorkTree().toPath(), "untrackedDir").toFile();
 
             System.out.println("Untracked exists: " + untrackedFile.exists() + " Dir: " + untrackedDir.exists() + "/" + untrackedDir.isDirectory());
 
