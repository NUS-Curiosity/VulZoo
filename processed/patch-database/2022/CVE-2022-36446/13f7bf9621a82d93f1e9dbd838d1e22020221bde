diff --git a/software/apt-lib.pl b/software/apt-lib.pl
index 4f3b7dbde8..d29ca175b5 100755
--- a/software/apt-lib.pl
+++ b/software/apt-lib.pl
@@ -21,10 +21,10 @@ sub update_system_install
 
 # Build the command to run
 $ENV{'DEBIAN_FRONTEND'} = 'noninteractive';
+local $uicmd = "$apt_get_command -y ".($force ? " -f" : "")." install $update";
 $update = join(" ", map { quotemeta($_) } split(/\s+/, $update));
-$update =~ s/\\(-)|\\(.)/$1$2/g;
 local $cmd = "$apt_get_command -y ".($force ? " -f" : "")." install $update";
-print "<b>",&text('apt_install', "<tt>$cmd</tt>"),"</b><p>\n";
+print "<b>",&text('apt_install', "<tt>".&html_escape($uicmd)."</tt>"),"</b><p>\n";
 print "<pre>";
 &additional_log('exec', undef, $cmd);
 
