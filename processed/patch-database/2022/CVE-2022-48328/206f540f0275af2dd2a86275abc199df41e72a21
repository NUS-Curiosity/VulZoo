diff --git a/app/Controller/Component/IndexFilterComponent.php b/app/Controller/Component/IndexFilterComponent.php
index 89aad9cb394..8d78351aaa3 100644
--- a/app/Controller/Component/IndexFilterComponent.php
+++ b/app/Controller/Component/IndexFilterComponent.php
@@ -45,6 +45,18 @@ public function harvestParameters($paramArray, &$exception = [])
             }
         }
 
+        $data = $this->__massageData($data, $request, $paramArray);
+
+        $this->Controller->set('passedArgs', json_encode($this->Controller->passedArgs));
+        return $data;
+    }
+
+    private function __massageData($data, $request, $paramArray)
+    {
+        $data = array_filter($data, function($paramName) use ($paramArray) {
+            return !empty($paramArray[$paramName]);
+        }, ARRAY_FILTER_USE_KEY);
+
         if (!empty($paramArray)) {
             foreach ($paramArray as $p) {
                 if (isset($request->params['named'][$p])) {
@@ -61,13 +73,8 @@ public function harvestParameters($paramArray, &$exception = [])
             }
         }
         unset($v);
-        
-        $data = array_filter($data, function($paramName) use ($paramArray) {
-            return !empty($paramArray[$paramName]);
-        }, ARRAY_FILTER_USE_KEY);
-
-        $this->Controller->set('passedArgs', json_encode($this->Controller->passedArgs));
         return $data;
+
     }
 
     public function isRest()
