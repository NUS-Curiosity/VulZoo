diff --git a/api/src/main/java/org/openmrs/module/htmlformentryui/HtmlFormUtil.java b/api/src/main/java/org/openmrs/module/htmlformentryui/HtmlFormUtil.java
index c2b267e..bdc6067 100644
--- a/api/src/main/java/org/openmrs/module/htmlformentryui/HtmlFormUtil.java
+++ b/api/src/main/java/org/openmrs/module/htmlformentryui/HtmlFormUtil.java
@@ -203,7 +203,7 @@ public static String determineReturnLabel(String returnLabel, Patient patient, U
 		if (org.apache.commons.lang.StringUtils.isNotBlank(returnLabel)) {
 			return ui.message(returnLabel);
 		} else {
-			return ui.escapeJs(ui.format(patient));
+			return ui.encodeJavaScript(ui.format(patient));
 		}
 		
 	}
diff --git a/omod/src/main/java/org/openmrs/module/htmlformentryui/fragment/controller/htmlform/EnterHtmlFormFragmentController.java b/omod/src/main/java/org/openmrs/module/htmlformentryui/fragment/controller/htmlform/EnterHtmlFormFragmentController.java
index cc0dd01..00c01f8 100644
--- a/omod/src/main/java/org/openmrs/module/htmlformentryui/fragment/controller/htmlform/EnterHtmlFormFragmentController.java
+++ b/omod/src/main/java/org/openmrs/module/htmlformentryui/fragment/controller/htmlform/EnterHtmlFormFragmentController.java
@@ -281,7 +281,7 @@ public SimpleObject submit(UiSessionContext sessionContext, @RequestParam("perso
 		request.getSession().setAttribute(UiCommonsConstants.SESSION_ATTRIBUTE_INFO_MESSAGE,
 		    ui.message(
 		        editMode ? "htmlformentryui.editHtmlForm.successMessage" : "htmlformentryui.enterHtmlForm.successMessage",
-		        ui.format(hf.getForm()), ui.escapeJs(ui.format(patient))));
+		        ui.format(hf.getForm()), ui.encodeJavaScript(ui.format(patient))));
 		request.getSession().setAttribute(UiCommonsConstants.SESSION_ATTRIBUTE_TOAST_MESSAGE, "true");
 		
 		return returnHelper(null, fes, formEncounter);
diff --git a/omod/src/main/java/org/openmrs/module/htmlformentryui/page/controller/htmlform/ViewEncounterWithHtmlFormPageController.java b/omod/src/main/java/org/openmrs/module/htmlformentryui/page/controller/htmlform/ViewEncounterWithHtmlFormPageController.java
index 68d191c..c315f5e 100644
--- a/omod/src/main/java/org/openmrs/module/htmlformentryui/page/controller/htmlform/ViewEncounterWithHtmlFormPageController.java
+++ b/omod/src/main/java/org/openmrs/module/htmlformentryui/page/controller/htmlform/ViewEncounterWithHtmlFormPageController.java
@@ -39,7 +39,7 @@ public void get(@RequestParam("encounter") Encounter encounter,
 			    SimpleObject.create("patientId", patient.getId()));
 		}
 		if (StringUtils.isEmpty(returnLabel)) {
-			returnLabel = ui.escapeJs(ui.format(patient.getPatient()));
+			returnLabel = ui.encodeJavaScript(ui.format(patient.getPatient()));
 		}
 		
 		model.addAttribute("patient", patient);
diff --git a/omod/src/main/webapp/pages/htmlform/editHtmlFormWithSimpleUi.gsp b/omod/src/main/webapp/pages/htmlform/editHtmlFormWithSimpleUi.gsp
index 9500590..3da8916 100644
--- a/omod/src/main/webapp/pages/htmlform/editHtmlFormWithSimpleUi.gsp
+++ b/omod/src/main/webapp/pages/htmlform/editHtmlFormWithSimpleUi.gsp
@@ -29,7 +29,7 @@ ${ ui.includeFragment("coreapps", "patientHeader", [ patient: patient ]) }
     var breadcrumbs = _.flatten([
         { icon: "icon-home", link: '/' + OPENMRS_CONTEXT_PATH + '/index.htm' },
         ${ breadcrumbMiddle },
-        { label: "${ ui.escapeJs(ui.message("coreapps.editHtmlForm.breadcrumb", ui.message(ui.format(htmlForm.form)))) }" }
+        { label: "${ ui.encodeJavaScript(ui.message("coreapps.editHtmlForm.breadcrumb", ui.message(ui.format(htmlForm.form)))) }" }
     ]);
 
     jQuery(function() {
diff --git a/omod/src/main/webapp/pages/htmlform/editHtmlFormWithStandardUi.gsp b/omod/src/main/webapp/pages/htmlform/editHtmlFormWithStandardUi.gsp
index b9dff06..a9bb45b 100644
--- a/omod/src/main/webapp/pages/htmlform/editHtmlFormWithStandardUi.gsp
+++ b/omod/src/main/webapp/pages/htmlform/editHtmlFormWithStandardUi.gsp
@@ -10,7 +10,7 @@
     var breadcrumbs = _.flatten([
         { icon: "icon-home", link: '/' + OPENMRS_CONTEXT_PATH + '/index.htm' },
         ${ breadcrumbMiddle },
-        { label: "${ ui.escapeJs(ui.message("coreapps.editHtmlForm.breadcrumb", ui.message(ui.format(htmlForm.form)))) }" }
+        { label: "${ ui.encodeJavaScript(ui.message("coreapps.editHtmlForm.breadcrumb", ui.message(ui.format(htmlForm.form)))) }" }
     ]);
 
     jq(function() {
diff --git a/omod/src/main/webapp/pages/htmlform/enterHtmlFormWithSimpleUi.gsp b/omod/src/main/webapp/pages/htmlform/enterHtmlFormWithSimpleUi.gsp
index 798b220..4fa3d67 100644
--- a/omod/src/main/webapp/pages/htmlform/enterHtmlFormWithSimpleUi.gsp
+++ b/omod/src/main/webapp/pages/htmlform/enterHtmlFormWithSimpleUi.gsp
@@ -30,7 +30,7 @@ ${ ui.includeFragment("coreapps", "patientHeader", [ patient: patient ]) }
     var breadcrumbs = _.flatten([
         { icon: "icon-home", link: '/' + OPENMRS_CONTEXT_PATH + '/index.htm' },
         ${ ui.encodeHtmlContent(breadcrumbMiddle) } ,
-        { label: "${ ui.escapeJs(ui.format(htmlForm.form)) }" }
+        { label: "${ ui.encodeJavaScript(ui.format(htmlForm.form)) }" }
     ]);
 
     jQuery(function() {
diff --git a/omod/src/main/webapp/pages/htmlform/enterHtmlFormWithStandardUi.gsp b/omod/src/main/webapp/pages/htmlform/enterHtmlFormWithStandardUi.gsp
index 4ab90ee..db620af 100644
--- a/omod/src/main/webapp/pages/htmlform/enterHtmlFormWithStandardUi.gsp
+++ b/omod/src/main/webapp/pages/htmlform/enterHtmlFormWithStandardUi.gsp
@@ -13,7 +13,7 @@
     var breadcrumbs = _.flatten([
         { icon: "icon-home", link: '/' + OPENMRS_CONTEXT_PATH + '/index.htm' },
         ${ breadcrumbMiddle },
-        { label: "${ ui.message(ui.escapeJs(ui.format(htmlForm.form)) )}" }
+        { label: "${ ui.message(ui.encodeJavaScript(ui.format(htmlForm.form)) )}" }
     ]);
 
     jq(function() {
diff --git a/omod/src/main/webapp/pages/htmlform/viewEncounterWithHtmlForm.gsp b/omod/src/main/webapp/pages/htmlform/viewEncounterWithHtmlForm.gsp
index fa4f72b..0db0dad 100644
--- a/omod/src/main/webapp/pages/htmlform/viewEncounterWithHtmlForm.gsp
+++ b/omod/src/main/webapp/pages/htmlform/viewEncounterWithHtmlForm.gsp
@@ -8,14 +8,14 @@
 <script type="text/javascript">
     window.viewHtmlForm = {
         encounterId: ${ encounter.id },
-        returnUrl: "${ ui.escapeJs(returnUrl) }",
+        returnUrl: "${ ui.encodeJavaScript(returnUrl) }",
         htmlFormId: ${htmlForm.id}
     };
 
     var breadcrumbs = [
         { icon: "icon-home", link: '/' + OPENMRS_CONTEXT_PATH + '/index.htm' },
-        { label: "${ ui.escapeJs(returnLabel) }", link: "${ ui.escapeJs(returnUrl) }" },
-        { label: "${ ui.escapeJs(ui.message("htmlformentryui.viewHtmlForm.breadcrumb", ui.message(ui.format(htmlForm.form)))) }" }
+        { label: "${ ui.encodeJavaScript(returnLabel) }", link: "${ ui.encodeJavaScript(returnUrl) }" },
+        { label: "${ ui.encodeJavaScript(ui.message("htmlformentryui.viewHtmlForm.breadcrumb", ui.message(ui.format(htmlForm.form)))) }" }
     ];
 </script>
 
