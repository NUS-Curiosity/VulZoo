diff --git a/packages/labextension/src/widget.ts b/packages/labextension/src/widget.ts
index c1055d5b8..7be020065 100644
--- a/packages/labextension/src/widget.ts
+++ b/packages/labextension/src/widget.ts
@@ -239,9 +239,11 @@ namespace Private {
         <button class="nbdime-export" style="display: none">Export diff</button>
       </div>
       <div class=nbdime-header-banner>
-        <span class="nbdime-header-base">${baseLabel}</span>
-        <span class="nbdime-header-remote">${remoteLabel}</span>
+        <span class="nbdime-header-base"></span>
+        <span class="nbdime-header-remote"></span>
       </div>`;
+    (node.getElementsByClassName("nbdime-header-base")[0] as HTMLSpanElement).innerText = baseLabel;
+    (node.getElementsByClassName("nbdime-header-remote")[0] as HTMLSpanElement).innerText = remoteLabel;
 
     return new Widget({node});
   }
diff --git a/packages/nbdime/src/common/util.ts b/packages/nbdime/src/common/util.ts
index 9d118c7e8..e46892181 100644
--- a/packages/nbdime/src/common/util.ts
+++ b/packages/nbdime/src/common/util.ts
@@ -298,7 +298,7 @@ function buildSelect(options: string[], select?: HTMLSelectElement): HTMLSelectE
   }
   for (let option of options) {
     let opt = document.createElement('option');
-    opt.value = opt.innerHTML = option;
+    opt.text = option;
     select.appendChild(opt);
   }
   return select;
diff --git a/packages/nbdime/test/src/common/util.spec.ts b/packages/nbdime/test/src/common/util.spec.ts
index 46fb2fa63..66715da89 100644
--- a/packages/nbdime/test/src/common/util.spec.ts
+++ b/packages/nbdime/test/src/common/util.spec.ts
@@ -255,6 +255,36 @@ describe('common', () => {
 
     });
 
+    describe('buildSelect', () => {
+
+      it('should create an empty select', () => {
+        let value = util.buildSelect([]);
+        expect(value.outerHTML).toEqual("<select></select>");
+      });
+
+      it('should reuse a given select', () => {
+        const select = document.createElement('select');
+        let value = util.buildSelect([], select);
+        expect(value).toBe(select);
+      });
+
+      it('should create a select with options', () => {
+        let value = util.buildSelect([
+          'foo',
+          'bar',
+          '<div>boo</div>'
+        ]);
+        expect(value.outerHTML).toEqual(
+          '<select>' +
+            '<option>foo</option>' +
+            '<option>bar</option>' +
+            '<option>&lt;div&gt;boo&lt;/div&gt;</option>' +
+          '</select>'
+        );
+      });
+
+    });
+
   });
 
 });
diff --git a/packages/webapp/src/app/diff.ts b/packages/webapp/src/app/diff.ts
index edc6a2dc6..b32c672d4 100644
--- a/packages/webapp/src/app/diff.ts
+++ b/packages/webapp/src/app/diff.ts
@@ -180,11 +180,14 @@ function onDiffRequestCompleted(data: any) {
  */
 function onDiffRequestFailed(response: string) {
   console.log('Diff request failed.');
-  let root = document.getElementById('nbdime-root');
+  const root = document.getElementById('nbdime-root');
   if (!root) {
     throw new Error('Missing root element "nbidme-root"');
   }
-  root.innerHTML = '<pre>' + response + '</pre>';
+  const pre = document.createElement('pre');
+  pre.innerText = response;
+  root.innerHTML = '';
+  root.appendChild(pre);
   diffWidget = null;
   toggleSpinner(false);
 }
diff --git a/packages/webapp/src/app/merge.ts b/packages/webapp/src/app/merge.ts
index 22941ab94..00856c19f 100644
--- a/packages/webapp/src/app/merge.ts
+++ b/packages/webapp/src/app/merge.ts
@@ -179,7 +179,10 @@ function onMergeRequestFailed(response: string) {
   if (!root) {
     throw new Error('Missing root element "nbidme-root"');
   }
-  root.innerHTML = '<pre>' + response + '</pre>';
+  const pre = document.createElement('pre');
+  pre.innerText = response;
+  root.innerHTML = '';
+  root.appendChild(pre);
   mergeWidget = null;
   toggleSpinner(false);
 }
