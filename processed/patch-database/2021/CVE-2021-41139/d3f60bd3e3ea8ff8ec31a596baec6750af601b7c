diff --git a/WEB-INF/lib/common.lib.php b/WEB-INF/lib/common.lib.php
index d5b43f57..db8d58ea 100644
--- a/WEB-INF/lib/common.lib.php
+++ b/WEB-INF/lib/common.lib.php
@@ -226,15 +226,29 @@ function ttValidDate($val)
   if (strlen($val) == 0)
     return false;
 
-  // This should accept a string in format 'YYYY-MM-DD', 'MM/DD/YYYY', 'DD-MM-YYYY', 'DD.MM.YYYY', or 'DD.MM.YYYY whatever'.
+  // This should validate a string in format 'YYYY-MM-DD', 'MM/DD/YYYY', 'DD-MM-YYYY', 'DD.MM.YYYY', or 'DD.MM.YYYY whatever'.
   if (!preg_match('/^\d\d\d\d-\d\d-\d\d$/', $val) &&
     !preg_match('/^\d\d\/\d\d\/\d\d\d\d$/', $val) &&
     !preg_match('/^\d\d\-\d\d\-\d\d\d\d$/', $val) &&
     !preg_match('/^\d\d\.\d\d\.\d\d\d\d$/', $val) &&
     !preg_match('/^\d\d\.\d\d\.\d\d\d\d .+$/', $val))
     return false;
-    
-  return true;    
+
+  return true;
+}
+
+// ttValidDbDateFormatDate is used to check user input to validate a date in DB_DATEFORMAT.
+function ttValidDbDateFormatDate($val)
+{
+  $val = trim($val);
+  if (strlen($val) == 0)
+    return false;
+
+  // This should validate a string in format 'YYYY-MM-DD'.
+  if (!preg_match('/^\d\d\d\d-\d\d-\d\d$/', $val))
+    return false;
+
+  return true;
 }
 
 // ttValidInteger is used to check user input to validate an integer.
diff --git a/initialize.php b/initialize.php
index e0b38f4d..3d6aeab4 100644
--- a/initialize.php
+++ b/initialize.php
@@ -12,7 +12,7 @@
 // Disable displaying errors on screen.
 ini_set('display_errors', 'Off');
 
-define("APP_VERSION", "1.19.30.5599");
+define("APP_VERSION", "1.19.30.5600");
 define("APP_DIR", dirname(__FILE__));
 define("LIBRARY_DIR", APP_DIR."/WEB-INF/lib");
 define("TEMPLATE_DIR", APP_DIR."/WEB-INF/templates");
diff --git a/time.php b/time.php
index 61e771f8..e5e509c0 100644
--- a/time.php
+++ b/time.php
@@ -34,7 +34,7 @@
 }
 // If we are passed in a date, make sure it is in correct format.
 $date = $request->getParameter('date');
-if ($date && !ttValidDate($date)) {
+if ($date && !ttValidDbDateFormatDate($date)) {
   header('Location: access_denied.php');
   exit();
 }
