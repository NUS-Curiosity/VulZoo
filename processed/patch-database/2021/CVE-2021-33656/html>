<!DOCTYPE html>
<html lang='en'>
<head>
<title>vt-drop-old-font-ioctls.patch « 5.10.127 « releases - kernel/git/stable/stable-queue.git - Linux kernel stable patch queue</title>
<meta name='generator' content='cgit 1.2.3-korg'/>
<meta name='robots' content='noindex, nofollow'/>
<link rel='stylesheet' type='text/css' href='/cgit-data/cgit.css'/>
<script type='text/javascript' src='/cgit-data/cgit.js'></script>
<link rel='shortcut icon' href='/favicon.ico'/>
<link rel='alternate' title='Atom feed' href='http://git.kernel.org/pub/scm/linux/kernel/git/stable/stable-queue.git/atom/releases/5.10.127/vt-drop-old-font-ioctls.patch?h=master' type='application/atom+xml'/>
<link rel='vcs-git' href='git://git.kernel.org/pub/scm/linux/kernel/git/stable/stable-queue.git' title='kernel/git/stable/stable-queue.git Git repository'/>
<link rel='vcs-git' href='https://git.kernel.org/pub/scm/linux/kernel/git/stable/stable-queue.git' title='kernel/git/stable/stable-queue.git Git repository'/>
<link rel='vcs-git' href='https://kernel.googlesource.com/pub/scm/linux/kernel/git/stable/stable-queue.git' title='kernel/git/stable/stable-queue.git Git repository'/>
</head>
<body>
<div id='cgit'><table id='header'>
<tr>
<td class='logo' rowspan='2'><a href='/'><img src='/cgit-data/cgit.png' alt='cgit logo'/></a></td>
<td class='main'><a href='/'>index</a> : <a href='/pub/scm/linux/kernel/git/stable/stable-queue.git/'>kernel/git/stable/stable-queue.git</a></td><td class='form'><form method='get'>
<select name='h' onchange='this.form.submit();'>
<option value='master' selected='selected'>master</option>
</select> <input type='submit' value='switch'/></form></td></tr>
<tr><td class='sub'>Linux kernel stable patch queue</td><td class='sub right'>Stable Group</td></tr></table>
<table class='tabs'><tr><td>
<a href='/pub/scm/linux/kernel/git/stable/stable-queue.git/about/'>about</a><a href='/pub/scm/linux/kernel/git/stable/stable-queue.git/'>summary</a><a href='/pub/scm/linux/kernel/git/stable/stable-queue.git/refs/'>refs</a><a href='/pub/scm/linux/kernel/git/stable/stable-queue.git/log/releases/5.10.127/vt-drop-old-font-ioctls.patch'>log</a><a class='active' href='/pub/scm/linux/kernel/git/stable/stable-queue.git/tree/releases/5.10.127/vt-drop-old-font-ioctls.patch'>tree</a><a href='/pub/scm/linux/kernel/git/stable/stable-queue.git/commit/releases/5.10.127/vt-drop-old-font-ioctls.patch'>commit</a><a href='/pub/scm/linux/kernel/git/stable/stable-queue.git/diff/releases/5.10.127/vt-drop-old-font-ioctls.patch'>diff</a><a href='/pub/scm/linux/kernel/git/stable/stable-queue.git/stats/releases/5.10.127/vt-drop-old-font-ioctls.patch'>stats</a></td><td class='form'><form class='right' method='get' action='/pub/scm/linux/kernel/git/stable/stable-queue.git/log/releases/5.10.127/vt-drop-old-font-ioctls.patch'>
<select name='qt'>
<option value='grep'>log msg</option>
<option value='author'>author</option>
<option value='committer'>committer</option>
<option value='range'>range</option>
</select>
<input class='txt' type='search' size='10' name='q' value=''/>
<input type='submit' value='search'/>
</form>
</td></tr></table>
<div class='path'>path: <a href='/pub/scm/linux/kernel/git/stable/stable-queue.git/tree/'>root</a>/<a href='/pub/scm/linux/kernel/git/stable/stable-queue.git/tree/releases'>releases</a>/<a href='/pub/scm/linux/kernel/git/stable/stable-queue.git/tree/releases/5.10.127'>5.10.127</a>/<a href='/pub/scm/linux/kernel/git/stable/stable-queue.git/tree/releases/5.10.127/vt-drop-old-font-ioctls.patch'>vt-drop-old-font-ioctls.patch</a></div><div class='content'>blob: bdebbbadf9f682f1d7ff374e364f30abb268e7b1 (<a href='/pub/scm/linux/kernel/git/stable/stable-queue.git/plain/releases/5.10.127/vt-drop-old-font-ioctls.patch'>plain</a>)
<table summary='blob content' class='blob'>
<tr><td class='linenumbers'><pre><a id='n1' href='#n1'>1</a>
<a id='n2' href='#n2'>2</a>
<a id='n3' href='#n3'>3</a>
<a id='n4' href='#n4'>4</a>
<a id='n5' href='#n5'>5</a>
<a id='n6' href='#n6'>6</a>
<a id='n7' href='#n7'>7</a>
<a id='n8' href='#n8'>8</a>
<a id='n9' href='#n9'>9</a>
<a id='n10' href='#n10'>10</a>
<a id='n11' href='#n11'>11</a>
<a id='n12' href='#n12'>12</a>
<a id='n13' href='#n13'>13</a>
<a id='n14' href='#n14'>14</a>
<a id='n15' href='#n15'>15</a>
<a id='n16' href='#n16'>16</a>
<a id='n17' href='#n17'>17</a>
<a id='n18' href='#n18'>18</a>
<a id='n19' href='#n19'>19</a>
<a id='n20' href='#n20'>20</a>
<a id='n21' href='#n21'>21</a>
<a id='n22' href='#n22'>22</a>
<a id='n23' href='#n23'>23</a>
<a id='n24' href='#n24'>24</a>
<a id='n25' href='#n25'>25</a>
<a id='n26' href='#n26'>26</a>
<a id='n27' href='#n27'>27</a>
<a id='n28' href='#n28'>28</a>
<a id='n29' href='#n29'>29</a>
<a id='n30' href='#n30'>30</a>
<a id='n31' href='#n31'>31</a>
<a id='n32' href='#n32'>32</a>
<a id='n33' href='#n33'>33</a>
<a id='n34' href='#n34'>34</a>
<a id='n35' href='#n35'>35</a>
<a id='n36' href='#n36'>36</a>
<a id='n37' href='#n37'>37</a>
<a id='n38' href='#n38'>38</a>
<a id='n39' href='#n39'>39</a>
<a id='n40' href='#n40'>40</a>
<a id='n41' href='#n41'>41</a>
<a id='n42' href='#n42'>42</a>
<a id='n43' href='#n43'>43</a>
<a id='n44' href='#n44'>44</a>
<a id='n45' href='#n45'>45</a>
<a id='n46' href='#n46'>46</a>
<a id='n47' href='#n47'>47</a>
<a id='n48' href='#n48'>48</a>
<a id='n49' href='#n49'>49</a>
<a id='n50' href='#n50'>50</a>
<a id='n51' href='#n51'>51</a>
<a id='n52' href='#n52'>52</a>
<a id='n53' href='#n53'>53</a>
<a id='n54' href='#n54'>54</a>
<a id='n55' href='#n55'>55</a>
<a id='n56' href='#n56'>56</a>
<a id='n57' href='#n57'>57</a>
<a id='n58' href='#n58'>58</a>
<a id='n59' href='#n59'>59</a>
<a id='n60' href='#n60'>60</a>
<a id='n61' href='#n61'>61</a>
<a id='n62' href='#n62'>62</a>
<a id='n63' href='#n63'>63</a>
<a id='n64' href='#n64'>64</a>
<a id='n65' href='#n65'>65</a>
<a id='n66' href='#n66'>66</a>
<a id='n67' href='#n67'>67</a>
<a id='n68' href='#n68'>68</a>
<a id='n69' href='#n69'>69</a>
<a id='n70' href='#n70'>70</a>
<a id='n71' href='#n71'>71</a>
<a id='n72' href='#n72'>72</a>
<a id='n73' href='#n73'>73</a>
<a id='n74' href='#n74'>74</a>
<a id='n75' href='#n75'>75</a>
<a id='n76' href='#n76'>76</a>
<a id='n77' href='#n77'>77</a>
<a id='n78' href='#n78'>78</a>
<a id='n79' href='#n79'>79</a>
<a id='n80' href='#n80'>80</a>
<a id='n81' href='#n81'>81</a>
<a id='n82' href='#n82'>82</a>
<a id='n83' href='#n83'>83</a>
<a id='n84' href='#n84'>84</a>
<a id='n85' href='#n85'>85</a>
<a id='n86' href='#n86'>86</a>
<a id='n87' href='#n87'>87</a>
<a id='n88' href='#n88'>88</a>
<a id='n89' href='#n89'>89</a>
<a id='n90' href='#n90'>90</a>
<a id='n91' href='#n91'>91</a>
<a id='n92' href='#n92'>92</a>
<a id='n93' href='#n93'>93</a>
<a id='n94' href='#n94'>94</a>
<a id='n95' href='#n95'>95</a>
<a id='n96' href='#n96'>96</a>
<a id='n97' href='#n97'>97</a>
<a id='n98' href='#n98'>98</a>
<a id='n99' href='#n99'>99</a>
<a id='n100' href='#n100'>100</a>
<a id='n101' href='#n101'>101</a>
<a id='n102' href='#n102'>102</a>
<a id='n103' href='#n103'>103</a>
<a id='n104' href='#n104'>104</a>
<a id='n105' href='#n105'>105</a>
<a id='n106' href='#n106'>106</a>
<a id='n107' href='#n107'>107</a>
<a id='n108' href='#n108'>108</a>
<a id='n109' href='#n109'>109</a>
<a id='n110' href='#n110'>110</a>
<a id='n111' href='#n111'>111</a>
<a id='n112' href='#n112'>112</a>
<a id='n113' href='#n113'>113</a>
<a id='n114' href='#n114'>114</a>
<a id='n115' href='#n115'>115</a>
<a id='n116' href='#n116'>116</a>
<a id='n117' href='#n117'>117</a>
<a id='n118' href='#n118'>118</a>
<a id='n119' href='#n119'>119</a>
<a id='n120' href='#n120'>120</a>
<a id='n121' href='#n121'>121</a>
<a id='n122' href='#n122'>122</a>
<a id='n123' href='#n123'>123</a>
<a id='n124' href='#n124'>124</a>
<a id='n125' href='#n125'>125</a>
<a id='n126' href='#n126'>126</a>
<a id='n127' href='#n127'>127</a>
<a id='n128' href='#n128'>128</a>
<a id='n129' href='#n129'>129</a>
<a id='n130' href='#n130'>130</a>
<a id='n131' href='#n131'>131</a>
<a id='n132' href='#n132'>132</a>
<a id='n133' href='#n133'>133</a>
<a id='n134' href='#n134'>134</a>
<a id='n135' href='#n135'>135</a>
<a id='n136' href='#n136'>136</a>
<a id='n137' href='#n137'>137</a>
<a id='n138' href='#n138'>138</a>
<a id='n139' href='#n139'>139</a>
<a id='n140' href='#n140'>140</a>
<a id='n141' href='#n141'>141</a>
<a id='n142' href='#n142'>142</a>
<a id='n143' href='#n143'>143</a>
<a id='n144' href='#n144'>144</a>
<a id='n145' href='#n145'>145</a>
<a id='n146' href='#n146'>146</a>
<a id='n147' href='#n147'>147</a>
<a id='n148' href='#n148'>148</a>
<a id='n149' href='#n149'>149</a>
<a id='n150' href='#n150'>150</a>
<a id='n151' href='#n151'>151</a>
<a id='n152' href='#n152'>152</a>
<a id='n153' href='#n153'>153</a>
<a id='n154' href='#n154'>154</a>
<a id='n155' href='#n155'>155</a>
<a id='n156' href='#n156'>156</a>
<a id='n157' href='#n157'>157</a>
<a id='n158' href='#n158'>158</a>
<a id='n159' href='#n159'>159</a>
<a id='n160' href='#n160'>160</a>
<a id='n161' href='#n161'>161</a>
<a id='n162' href='#n162'>162</a>
<a id='n163' href='#n163'>163</a>
<a id='n164' href='#n164'>164</a>
<a id='n165' href='#n165'>165</a>
<a id='n166' href='#n166'>166</a>
<a id='n167' href='#n167'>167</a>
<a id='n168' href='#n168'>168</a>
<a id='n169' href='#n169'>169</a>
<a id='n170' href='#n170'>170</a>
<a id='n171' href='#n171'>171</a>
<a id='n172' href='#n172'>172</a>
<a id='n173' href='#n173'>173</a>
<a id='n174' href='#n174'>174</a>
<a id='n175' href='#n175'>175</a>
<a id='n176' href='#n176'>176</a>
<a id='n177' href='#n177'>177</a>
<a id='n178' href='#n178'>178</a>
<a id='n179' href='#n179'>179</a>
<a id='n180' href='#n180'>180</a>
<a id='n181' href='#n181'>181</a>
<a id='n182' href='#n182'>182</a>
<a id='n183' href='#n183'>183</a>
<a id='n184' href='#n184'>184</a>
<a id='n185' href='#n185'>185</a>
<a id='n186' href='#n186'>186</a>
<a id='n187' href='#n187'>187</a>
<a id='n188' href='#n188'>188</a>
<a id='n189' href='#n189'>189</a>
<a id='n190' href='#n190'>190</a>
<a id='n191' href='#n191'>191</a>
<a id='n192' href='#n192'>192</a>
<a id='n193' href='#n193'>193</a>
<a id='n194' href='#n194'>194</a>
<a id='n195' href='#n195'>195</a>
<a id='n196' href='#n196'>196</a>
<a id='n197' href='#n197'>197</a>
<a id='n198' href='#n198'>198</a>
<a id='n199' href='#n199'>199</a>
<a id='n200' href='#n200'>200</a>
<a id='n201' href='#n201'>201</a>
<a id='n202' href='#n202'>202</a>
<a id='n203' href='#n203'>203</a>
<a id='n204' href='#n204'>204</a>
<a id='n205' href='#n205'>205</a>
<a id='n206' href='#n206'>206</a>
<a id='n207' href='#n207'>207</a>
<a id='n208' href='#n208'>208</a>
<a id='n209' href='#n209'>209</a>
<a id='n210' href='#n210'>210</a>
<a id='n211' href='#n211'>211</a>
<a id='n212' href='#n212'>212</a>
<a id='n213' href='#n213'>213</a>
<a id='n214' href='#n214'>214</a>
<a id='n215' href='#n215'>215</a>
<a id='n216' href='#n216'>216</a>
<a id='n217' href='#n217'>217</a>
<a id='n218' href='#n218'>218</a>
<a id='n219' href='#n219'>219</a>
<a id='n220' href='#n220'>220</a>
<a id='n221' href='#n221'>221</a>
<a id='n222' href='#n222'>222</a>
<a id='n223' href='#n223'>223</a>
<a id='n224' href='#n224'>224</a>
<a id='n225' href='#n225'>225</a>
<a id='n226' href='#n226'>226</a>
<a id='n227' href='#n227'>227</a>
<a id='n228' href='#n228'>228</a>
<a id='n229' href='#n229'>229</a>
<a id='n230' href='#n230'>230</a>
<a id='n231' href='#n231'>231</a>
<a id='n232' href='#n232'>232</a>
<a id='n233' href='#n233'>233</a>
<a id='n234' href='#n234'>234</a>
<a id='n235' href='#n235'>235</a>
<a id='n236' href='#n236'>236</a>
<a id='n237' href='#n237'>237</a>
<a id='n238' href='#n238'>238</a>
<a id='n239' href='#n239'>239</a>
<a id='n240' href='#n240'>240</a>
<a id='n241' href='#n241'>241</a>
<a id='n242' href='#n242'>242</a>
<a id='n243' href='#n243'>243</a>
<a id='n244' href='#n244'>244</a>
<a id='n245' href='#n245'>245</a>
<a id='n246' href='#n246'>246</a>
<a id='n247' href='#n247'>247</a>
<a id='n248' href='#n248'>248</a>
<a id='n249' href='#n249'>249</a>
<a id='n250' href='#n250'>250</a>
<a id='n251' href='#n251'>251</a>
<a id='n252' href='#n252'>252</a>
<a id='n253' href='#n253'>253</a>
<a id='n254' href='#n254'>254</a>
<a id='n255' href='#n255'>255</a>
<a id='n256' href='#n256'>256</a>
<a id='n257' href='#n257'>257</a>
<a id='n258' href='#n258'>258</a>
<a id='n259' href='#n259'>259</a>
<a id='n260' href='#n260'>260</a>
<a id='n261' href='#n261'>261</a>
<a id='n262' href='#n262'>262</a>
<a id='n263' href='#n263'>263</a>
<a id='n264' href='#n264'>264</a>
<a id='n265' href='#n265'>265</a>
<a id='n266' href='#n266'>266</a>
<a id='n267' href='#n267'>267</a>
<a id='n268' href='#n268'>268</a>
<a id='n269' href='#n269'>269</a>
<a id='n270' href='#n270'>270</a>
<a id='n271' href='#n271'>271</a>
<a id='n272' href='#n272'>272</a>
<a id='n273' href='#n273'>273</a>
<a id='n274' href='#n274'>274</a>
<a id='n275' href='#n275'>275</a>
<a id='n276' href='#n276'>276</a>
<a id='n277' href='#n277'>277</a>
<a id='n278' href='#n278'>278</a>
<a id='n279' href='#n279'>279</a>
<a id='n280' href='#n280'>280</a>
<a id='n281' href='#n281'>281</a>
<a id='n282' href='#n282'>282</a>
<a id='n283' href='#n283'>283</a>
<a id='n284' href='#n284'>284</a>
<a id='n285' href='#n285'>285</a>
<a id='n286' href='#n286'>286</a>
<a id='n287' href='#n287'>287</a>
<a id='n288' href='#n288'>288</a>
<a id='n289' href='#n289'>289</a>
<a id='n290' href='#n290'>290</a>
<a id='n291' href='#n291'>291</a>
<a id='n292' href='#n292'>292</a>
<a id='n293' href='#n293'>293</a>
<a id='n294' href='#n294'>294</a>
<a id='n295' href='#n295'>295</a>
<a id='n296' href='#n296'>296</a>
<a id='n297' href='#n297'>297</a>
<a id='n298' href='#n298'>298</a>
<a id='n299' href='#n299'>299</a>
<a id='n300' href='#n300'>300</a>
<a id='n301' href='#n301'>301</a>
<a id='n302' href='#n302'>302</a>
<a id='n303' href='#n303'>303</a>
<a id='n304' href='#n304'>304</a>
<a id='n305' href='#n305'>305</a>
<a id='n306' href='#n306'>306</a>
<a id='n307' href='#n307'>307</a>
</pre></td>
<td class='lines'><pre><code><style>
@media only all and (prefers-color-scheme: dark) {
.highlight .hll { background-color: #49483e }
.highlight .c { color: #75715e } /* Comment */
.highlight .err { color: #960050; background-color: #1e0010 } /* Error */
.highlight .k { color: #66d9ef } /* Keyword */
.highlight .l { color: #ae81ff } /* Literal */
.highlight .n { color: #f8f8f2 } /* Name */
.highlight .o { color: #f92672 } /* Operator */
.highlight .p { color: #f8f8f2 } /* Punctuation */
.highlight .ch { color: #75715e } /* Comment.Hashbang */
.highlight .cm { color: #75715e } /* Comment.Multiline */
.highlight .cp { color: #75715e } /* Comment.Preproc */
.highlight .cpf { color: #75715e } /* Comment.PreprocFile */
.highlight .c1 { color: #75715e } /* Comment.Single */
.highlight .cs { color: #75715e } /* Comment.Special */
.highlight .gd { color: #f92672 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gi { color: #a6e22e } /* Generic.Inserted */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #75715e } /* Generic.Subheading */
.highlight .kc { color: #66d9ef } /* Keyword.Constant */
.highlight .kd { color: #66d9ef } /* Keyword.Declaration */
.highlight .kn { color: #f92672 } /* Keyword.Namespace */
.highlight .kp { color: #66d9ef } /* Keyword.Pseudo */
.highlight .kr { color: #66d9ef } /* Keyword.Reserved */
.highlight .kt { color: #66d9ef } /* Keyword.Type */
.highlight .ld { color: #e6db74 } /* Literal.Date */
.highlight .m { color: #ae81ff } /* Literal.Number */
.highlight .s { color: #e6db74 } /* Literal.String */
.highlight .na { color: #a6e22e } /* Name.Attribute */
.highlight .nb { color: #f8f8f2 } /* Name.Builtin */
.highlight .nc { color: #a6e22e } /* Name.Class */
.highlight .no { color: #66d9ef } /* Name.Constant */
.highlight .nd { color: #a6e22e } /* Name.Decorator */
.highlight .ni { color: #f8f8f2 } /* Name.Entity */
.highlight .ne { color: #a6e22e } /* Name.Exception */
.highlight .nf { color: #a6e22e } /* Name.Function */
.highlight .nl { color: #f8f8f2 } /* Name.Label */
.highlight .nn { color: #f8f8f2 } /* Name.Namespace */
.highlight .nx { color: #a6e22e } /* Name.Other */
.highlight .py { color: #f8f8f2 } /* Name.Property */
.highlight .nt { color: #f92672 } /* Name.Tag */
.highlight .nv { color: #f8f8f2 } /* Name.Variable */
.highlight .ow { color: #f92672 } /* Operator.Word */
.highlight .w { color: #f8f8f2 } /* Text.Whitespace */
.highlight .mb { color: #ae81ff } /* Literal.Number.Bin */
.highlight .mf { color: #ae81ff } /* Literal.Number.Float */
.highlight .mh { color: #ae81ff } /* Literal.Number.Hex */
.highlight .mi { color: #ae81ff } /* Literal.Number.Integer */
.highlight .mo { color: #ae81ff } /* Literal.Number.Oct */
.highlight .sa { color: #e6db74 } /* Literal.String.Affix */
.highlight .sb { color: #e6db74 } /* Literal.String.Backtick */
.highlight .sc { color: #e6db74 } /* Literal.String.Char */
.highlight .dl { color: #e6db74 } /* Literal.String.Delimiter */
.highlight .sd { color: #e6db74 } /* Literal.String.Doc */
.highlight .s2 { color: #e6db74 } /* Literal.String.Double */
.highlight .se { color: #ae81ff } /* Literal.String.Escape */
.highlight .sh { color: #e6db74 } /* Literal.String.Heredoc */
.highlight .si { color: #e6db74 } /* Literal.String.Interpol */
.highlight .sx { color: #e6db74 } /* Literal.String.Other */
.highlight .sr { color: #e6db74 } /* Literal.String.Regex */
.highlight .s1 { color: #e6db74 } /* Literal.String.Single */
.highlight .ss { color: #e6db74 } /* Literal.String.Symbol */
.highlight .bp { color: #f8f8f2 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #a6e22e } /* Name.Function.Magic */
.highlight .vc { color: #f8f8f2 } /* Name.Variable.Class */
.highlight .vg { color: #f8f8f2 } /* Name.Variable.Global */
.highlight .vi { color: #f8f8f2 } /* Name.Variable.Instance */
.highlight .vm { color: #f8f8f2 } /* Name.Variable.Magic */
.highlight .il { color: #ae81ff } /* Literal.Number.Integer.Long */
}
@media (prefers-color-scheme: light) {
.highlight .hll { background-color: #ffffcc }
.highlight .c { color: #888888 } /* Comment */
.highlight .err { color: #a61717; background-color: #e3d2d2 } /* Error */
.highlight .k { color: #008800; font-weight: bold } /* Keyword */
.highlight .ch { color: #888888 } /* Comment.Hashbang */
.highlight .cm { color: #888888 } /* Comment.Multiline */
.highlight .cp { color: #cc0000; font-weight: bold } /* Comment.Preproc */
.highlight .cpf { color: #888888 } /* Comment.PreprocFile */
.highlight .c1 { color: #888888 } /* Comment.Single */
.highlight .cs { color: #cc0000; font-weight: bold; background-color: #fff0f0 } /* Comment.Special */
.highlight .gd { color: #000000; background-color: #ffdddd } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #aa0000 } /* Generic.Error */
.highlight .gh { color: #333333 } /* Generic.Heading */
.highlight .gi { color: #000000; background-color: #ddffdd } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #555555 } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #666666 } /* Generic.Subheading */
.highlight .gt { color: #aa0000 } /* Generic.Traceback */
.highlight .kc { color: #008800; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008800; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008800; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008800 } /* Keyword.Pseudo */
.highlight .kr { color: #008800; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #888888; font-weight: bold } /* Keyword.Type */
.highlight .m { color: #0000DD; font-weight: bold } /* Literal.Number */
.highlight .s { color: #dd2200; background-color: #fff0f0 } /* Literal.String */
.highlight .na { color: #336699 } /* Name.Attribute */
.highlight .nb { color: #003388 } /* Name.Builtin */
.highlight .nc { color: #bb0066; font-weight: bold } /* Name.Class */
.highlight .no { color: #003366; font-weight: bold } /* Name.Constant */
.highlight .nd { color: #555555 } /* Name.Decorator */
.highlight .ne { color: #bb0066; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0066bb; font-weight: bold } /* Name.Function */
.highlight .nl { color: #336699; font-style: italic } /* Name.Label */
.highlight .nn { color: #bb0066; font-weight: bold } /* Name.Namespace */
.highlight .py { color: #336699; font-weight: bold } /* Name.Property */
.highlight .nt { color: #bb0066; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #336699 } /* Name.Variable */
.highlight .ow { color: #008800 } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #0000DD; font-weight: bold } /* Literal.Number.Bin */
.highlight .mf { color: #0000DD; font-weight: bold } /* Literal.Number.Float */
.highlight .mh { color: #0000DD; font-weight: bold } /* Literal.Number.Hex */
.highlight .mi { color: #0000DD; font-weight: bold } /* Literal.Number.Integer */
.highlight .mo { color: #0000DD; font-weight: bold } /* Literal.Number.Oct */
.highlight .sa { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Affix */
.highlight .sb { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Backtick */
.highlight .sc { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Char */
.highlight .dl { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Delimiter */
.highlight .sd { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Doc */
.highlight .s2 { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Double */
.highlight .se { color: #0044dd; background-color: #fff0f0 } /* Literal.String.Escape */
.highlight .sh { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Heredoc */
.highlight .si { color: #3333bb; background-color: #fff0f0 } /* Literal.String.Interpol */
.highlight .sx { color: #22bb22; background-color: #f0fff0 } /* Literal.String.Other */
.highlight .sr { color: #008800; background-color: #fff0ff } /* Literal.String.Regex */
.highlight .s1 { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Single */
.highlight .ss { color: #aa6600; background-color: #fff0f0 } /* Literal.String.Symbol */
.highlight .bp { color: #003388 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0066bb; font-weight: bold } /* Name.Function.Magic */
.highlight .vc { color: #336699 } /* Name.Variable.Class */
.highlight .vg { color: #dd7700 } /* Name.Variable.Global */
.highlight .vi { color: #3333bb } /* Name.Variable.Instance */
.highlight .vm { color: #336699 } /* Name.Variable.Magic */
.highlight .il { color: #0000DD; font-weight: bold } /* Literal.Number.Integer.Long */
}
</style><div class="highlight"><pre><span></span>From ff2047fb755d4415ec3c70ac799889371151796d Mon Sep 17 00:00:00 2001
From: Jiri Slaby &lt;jslaby@suse.cz&gt;
Date: Tue, 5 Jan 2021 13:02:35 +0100
Subject: vt: drop old FONT ioctls

From: Jiri Slaby &lt;jslaby@suse.cz&gt;

commit ff2047fb755d4415ec3c70ac799889371151796d upstream.

Drop support for these ioctls:
* PIO_FONT, PIO_FONTX
* GIO_FONT, GIO_FONTX
* PIO_FONTRESET

As was demonstrated by commit 90bfdeef83f1 (tty: make FONTX ioctl use
the tty pointer they were actually passed), these ioctls are not used
from userspace, as:
1) they used to be broken (set up font on current console, not the open
   one) and racy (before the commit above)
2) KDFONTOP ioctl is used for years instead

Note that PIO_FONTRESET is defunct on most systems as VGA_CONSOLE is set
on them for ages. That turns on BROKEN_GRAPHICS_PROGRAMS which makes
PIO_FONTRESET just return an error.

We are removing KD_FONT_FLAG_OLD here as it was used only by these
removed ioctls. kd.h header exists both in kernel and uapi headers, so
we can remove the kernel one completely. Everyone includeing kd.h will
now automatically get the uapi one.

There are now unused definitions of the ioctl numbers and &quot;struct
consolefontdesc&quot; in kd.h, but as it is a uapi header, I am not touching
these.

Signed-off-by: Jiri Slaby &lt;jslaby@suse.cz&gt;
Link: https://lore.kernel.org/r/20210105120239.28031-8-jslaby@suse.cz
Cc: guodaxing &lt;guodaxing@huawei.com&gt;
Signed-off-by: Greg Kroah-Hartman &lt;gregkh@linuxfoundation.org&gt;
<span class="gd">---</span>
 drivers/tty/vt/vt.c       |   39 -----------
 drivers/tty/vt/vt_ioctl.c |  151 ----------------------------------------------
 include/linux/kd.h        |    8 --
 3 files changed, 3 insertions(+), 195 deletions(-)
 delete mode 100644 include/linux/kd.h

<span class="gd">--- a/drivers/tty/vt/vt.c</span>
<span class="gi">+++ b/drivers/tty/vt/vt.c</span>
<span class="gu">@@ -4625,16 +4625,8 @@ static int con_font_get(struct vc_data *</span>
 
 	if (op-&gt;data &amp;&amp; font.charcount &gt; op-&gt;charcount)
 		rc = -ENOSPC;
<span class="gd">-	if (!(op-&gt;flags &amp; KD_FONT_FLAG_OLD)) {</span>
<span class="gd">-		if (font.width &gt; op-&gt;width || font.height &gt; op-&gt;height) </span>
<span class="gd">-			rc = -ENOSPC;</span>
<span class="gd">-	} else {</span>
<span class="gd">-		if (font.width != 8)</span>
<span class="gd">-			rc = -EIO;</span>
<span class="gd">-		else if ((op-&gt;height &amp;&amp; font.height &gt; op-&gt;height) ||</span>
<span class="gd">-			 font.height &gt; 32)</span>
<span class="gd">-			rc = -ENOSPC;</span>
<span class="gd">-	}</span>
<span class="gi">+	if (font.width &gt; op-&gt;width || font.height &gt; op-&gt;height)</span>
<span class="gi">+		rc = -ENOSPC;</span>
 	if (rc)
 		goto out;
 
<span class="gu">@@ -4662,7 +4654,7 @@ static int con_font_set(struct vc_data *</span>
 		return -EINVAL;
 	if (op-&gt;charcount &gt; 512)
 		return -EINVAL;
<span class="gd">-	if (op-&gt;width &lt;= 0 || op-&gt;width &gt; 32 || op-&gt;height &gt; 32)</span>
<span class="gi">+	if (op-&gt;width &lt;= 0 || op-&gt;width &gt; 32 || !op-&gt;height || op-&gt;height &gt; 32)</span>
 		return -EINVAL;
 	size = (op-&gt;width+7)/8 * 32 * op-&gt;charcount;
 	if (size &gt; max_font_size)
<span class="gu">@@ -4672,31 +4664,6 @@ static int con_font_set(struct vc_data *</span>
 	if (IS_ERR(font.data))
 		return PTR_ERR(font.data);
 
<span class="gd">-	if (!op-&gt;height) {		/* Need to guess font height [compat] */</span>
<span class="gd">-		int h, i;</span>
<span class="gd">-		u8 *charmap = font.data;</span>
<span class="gd">-</span>
<span class="gd">-		/*</span>
<span class="gd">-		 * If from KDFONTOP ioctl, don&#39;t allow things which can be done</span>
<span class="gd">-		 * in userland,so that we can get rid of this soon</span>
<span class="gd">-		 */</span>
<span class="gd">-		if (!(op-&gt;flags &amp; KD_FONT_FLAG_OLD)) {</span>
<span class="gd">-			kfree(font.data);</span>
<span class="gd">-			return -EINVAL;</span>
<span class="gd">-		}</span>
<span class="gd">-</span>
<span class="gd">-		for (h = 32; h &gt; 0; h--)</span>
<span class="gd">-			for (i = 0; i &lt; op-&gt;charcount; i++)</span>
<span class="gd">-				if (charmap[32*i+h-1])</span>
<span class="gd">-					goto nonzero;</span>
<span class="gd">-</span>
<span class="gd">-		kfree(font.data);</span>
<span class="gd">-		return -EINVAL;</span>
<span class="gd">-</span>
<span class="gd">-	nonzero:</span>
<span class="gd">-		op-&gt;height = h;</span>
<span class="gd">-	}</span>
<span class="gd">-</span>
 	font.charcount = op-&gt;charcount;
 	font.width = op-&gt;width;
 	font.height = op-&gt;height;
<span class="gd">--- a/drivers/tty/vt/vt_ioctl.c</span>
<span class="gi">+++ b/drivers/tty/vt/vt_ioctl.c</span>
<span class="gu">@@ -486,70 +486,6 @@ static int vt_k_ioctl(struct tty_struct</span>
 	return 0;
 }
 
<span class="gd">-static inline int do_fontx_ioctl(struct vc_data *vc, int cmd,</span>
<span class="gd">-		struct consolefontdesc __user *user_cfd,</span>
<span class="gd">-		struct console_font_op *op)</span>
<span class="gd">-{</span>
<span class="gd">-	struct consolefontdesc cfdarg;</span>
<span class="gd">-	int i;</span>
<span class="gd">-</span>
<span class="gd">-	if (copy_from_user(&amp;cfdarg, user_cfd, sizeof(struct consolefontdesc)))</span>
<span class="gd">-		return -EFAULT;</span>
<span class="gd">-</span>
<span class="gd">-	switch (cmd) {</span>
<span class="gd">-	case PIO_FONTX:</span>
<span class="gd">-		op-&gt;op = KD_FONT_OP_SET;</span>
<span class="gd">-		op-&gt;flags = KD_FONT_FLAG_OLD;</span>
<span class="gd">-		op-&gt;width = 8;</span>
<span class="gd">-		op-&gt;height = cfdarg.charheight;</span>
<span class="gd">-		op-&gt;charcount = cfdarg.charcount;</span>
<span class="gd">-		op-&gt;data = cfdarg.chardata;</span>
<span class="gd">-		return con_font_op(vc, op);</span>
<span class="gd">-</span>
<span class="gd">-	case GIO_FONTX:</span>
<span class="gd">-		op-&gt;op = KD_FONT_OP_GET;</span>
<span class="gd">-		op-&gt;flags = KD_FONT_FLAG_OLD;</span>
<span class="gd">-		op-&gt;width = 8;</span>
<span class="gd">-		op-&gt;height = cfdarg.charheight;</span>
<span class="gd">-		op-&gt;charcount = cfdarg.charcount;</span>
<span class="gd">-		op-&gt;data = cfdarg.chardata;</span>
<span class="gd">-		i = con_font_op(vc, op);</span>
<span class="gd">-		if (i)</span>
<span class="gd">-			return i;</span>
<span class="gd">-		cfdarg.charheight = op-&gt;height;</span>
<span class="gd">-		cfdarg.charcount = op-&gt;charcount;</span>
<span class="gd">-		if (copy_to_user(user_cfd, &amp;cfdarg, sizeof(struct consolefontdesc)))</span>
<span class="gd">-			return -EFAULT;</span>
<span class="gd">-		return 0;</span>
<span class="gd">-	}</span>
<span class="gd">-	return -EINVAL;</span>
<span class="gd">-}</span>
<span class="gd">-</span>
<span class="gd">-static int vt_io_fontreset(struct vc_data *vc, struct console_font_op *op)</span>
<span class="gd">-{</span>
<span class="gd">-	int ret;</span>
<span class="gd">-</span>
<span class="gd">-	if (__is_defined(BROKEN_GRAPHICS_PROGRAMS)) {</span>
<span class="gd">-		/*</span>
<span class="gd">-		 * With BROKEN_GRAPHICS_PROGRAMS defined, the default font is</span>
<span class="gd">-		 * not saved.</span>
<span class="gd">-		 */</span>
<span class="gd">-		return -ENOSYS;</span>
<span class="gd">-	}</span>
<span class="gd">-</span>
<span class="gd">-	op-&gt;op = KD_FONT_OP_SET_DEFAULT;</span>
<span class="gd">-	op-&gt;data = NULL;</span>
<span class="gd">-	ret = con_font_op(vc, op);</span>
<span class="gd">-	if (ret)</span>
<span class="gd">-		return ret;</span>
<span class="gd">-</span>
<span class="gd">-	console_lock();</span>
<span class="gd">-	con_set_default_unimap(vc);</span>
<span class="gd">-	console_unlock();</span>
<span class="gd">-</span>
<span class="gd">-	return 0;</span>
<span class="gd">-}</span>
<span class="gd">-</span>
 static inline int do_unimap_ioctl(int cmd, struct unimapdesc __user *user_ud,
 		bool perm, struct vc_data *vc)
 {
<span class="gu">@@ -574,29 +510,7 @@ static inline int do_unimap_ioctl(int cm</span>
 static int vt_io_ioctl(struct vc_data *vc, unsigned int cmd, void __user *up,
 		bool perm)
 {
<span class="gd">-	struct console_font_op op;	/* used in multiple places here */</span>
<span class="gd">-</span>
 	switch (cmd) {
<span class="gd">-	case PIO_FONT:</span>
<span class="gd">-		if (!perm)</span>
<span class="gd">-			return -EPERM;</span>
<span class="gd">-		op.op = KD_FONT_OP_SET;</span>
<span class="gd">-		op.flags = KD_FONT_FLAG_OLD | KD_FONT_FLAG_DONT_RECALC;	/* Compatibility */</span>
<span class="gd">-		op.width = 8;</span>
<span class="gd">-		op.height = 0;</span>
<span class="gd">-		op.charcount = 256;</span>
<span class="gd">-		op.data = up;</span>
<span class="gd">-		return con_font_op(vc, &amp;op);</span>
<span class="gd">-</span>
<span class="gd">-	case GIO_FONT:</span>
<span class="gd">-		op.op = KD_FONT_OP_GET;</span>
<span class="gd">-		op.flags = KD_FONT_FLAG_OLD;</span>
<span class="gd">-		op.width = 8;</span>
<span class="gd">-		op.height = 32;</span>
<span class="gd">-		op.charcount = 256;</span>
<span class="gd">-		op.data = up;</span>
<span class="gd">-		return con_font_op(vc, &amp;op);</span>
<span class="gd">-</span>
 	case PIO_CMAP:
                 if (!perm)
 			return -EPERM;
<span class="gu">@@ -605,20 +519,6 @@ static int vt_io_ioctl(struct vc_data *v</span>
 	case GIO_CMAP:
                 return con_get_cmap(up);
 
<span class="gd">-	case PIO_FONTX:</span>
<span class="gd">-		if (!perm)</span>
<span class="gd">-			return -EPERM;</span>
<span class="gd">-</span>
<span class="gd">-		fallthrough;</span>
<span class="gd">-	case GIO_FONTX:</span>
<span class="gd">-		return do_fontx_ioctl(vc, cmd, up, &amp;op);</span>
<span class="gd">-</span>
<span class="gd">-	case PIO_FONTRESET:</span>
<span class="gd">-		if (!perm)</span>
<span class="gd">-			return -EPERM;</span>
<span class="gd">-</span>
<span class="gd">-		return vt_io_fontreset(vc, &amp;op);</span>
<span class="gd">-</span>
 	case PIO_SCRNMAP:
 		if (!perm)
 			return -EPERM;
<span class="gu">@@ -1099,54 +999,6 @@ void vc_SAK(struct work_struct *work)</span>
 
 #ifdef CONFIG_COMPAT
 
<span class="gd">-struct compat_consolefontdesc {</span>
<span class="gd">-	unsigned short charcount;       /* characters in font (256 or 512) */</span>
<span class="gd">-	unsigned short charheight;      /* scan lines per character (1-32) */</span>
<span class="gd">-	compat_caddr_t chardata;	/* font data in expanded form */</span>
<span class="gd">-};</span>
<span class="gd">-</span>
<span class="gd">-static inline int</span>
<span class="gd">-compat_fontx_ioctl(struct vc_data *vc, int cmd,</span>
<span class="gd">-		   struct compat_consolefontdesc __user *user_cfd,</span>
<span class="gd">-		   int perm, struct console_font_op *op)</span>
<span class="gd">-{</span>
<span class="gd">-	struct compat_consolefontdesc cfdarg;</span>
<span class="gd">-	int i;</span>
<span class="gd">-</span>
<span class="gd">-	if (copy_from_user(&amp;cfdarg, user_cfd, sizeof(struct compat_consolefontdesc)))</span>
<span class="gd">-		return -EFAULT;</span>
<span class="gd">-</span>
<span class="gd">-	switch (cmd) {</span>
<span class="gd">-	case PIO_FONTX:</span>
<span class="gd">-		if (!perm)</span>
<span class="gd">-			return -EPERM;</span>
<span class="gd">-		op-&gt;op = KD_FONT_OP_SET;</span>
<span class="gd">-		op-&gt;flags = KD_FONT_FLAG_OLD;</span>
<span class="gd">-		op-&gt;width = 8;</span>
<span class="gd">-		op-&gt;height = cfdarg.charheight;</span>
<span class="gd">-		op-&gt;charcount = cfdarg.charcount;</span>
<span class="gd">-		op-&gt;data = compat_ptr(cfdarg.chardata);</span>
<span class="gd">-		return con_font_op(vc, op);</span>
<span class="gd">-</span>
<span class="gd">-	case GIO_FONTX:</span>
<span class="gd">-		op-&gt;op = KD_FONT_OP_GET;</span>
<span class="gd">-		op-&gt;flags = KD_FONT_FLAG_OLD;</span>
<span class="gd">-		op-&gt;width = 8;</span>
<span class="gd">-		op-&gt;height = cfdarg.charheight;</span>
<span class="gd">-		op-&gt;charcount = cfdarg.charcount;</span>
<span class="gd">-		op-&gt;data = compat_ptr(cfdarg.chardata);</span>
<span class="gd">-		i = con_font_op(vc, op);</span>
<span class="gd">-		if (i)</span>
<span class="gd">-			return i;</span>
<span class="gd">-		cfdarg.charheight = op-&gt;height;</span>
<span class="gd">-		cfdarg.charcount = op-&gt;charcount;</span>
<span class="gd">-		if (copy_to_user(user_cfd, &amp;cfdarg, sizeof(struct compat_consolefontdesc)))</span>
<span class="gd">-			return -EFAULT;</span>
<span class="gd">-		return 0;</span>
<span class="gd">-	}</span>
<span class="gd">-	return -EINVAL;</span>
<span class="gd">-}</span>
<span class="gd">-</span>
 struct compat_console_font_op {
 	compat_uint_t op;        /* operation code KD_FONT_OP_* */
 	compat_uint_t flags;     /* KD_FONT_FLAG_* */
<span class="gu">@@ -1223,9 +1075,6 @@ long vt_compat_ioctl(struct tty_struct *</span>
 	/*
 	 * these need special handlers for incompatible data structures
 	 */
<span class="gd">-	case PIO_FONTX:</span>
<span class="gd">-	case GIO_FONTX:</span>
<span class="gd">-		return compat_fontx_ioctl(vc, cmd, up, perm, &amp;op);</span>
 
 	case KDFONTOP:
 		return compat_kdfontop_ioctl(up, perm, &amp;op, vc);
<span class="gd">--- a/include/linux/kd.h</span>
<span class="gi">+++ /dev/null</span>
<span class="gu">@@ -1,8 +0,0 @@</span>
<span class="gd">-/* SPDX-License-Identifier: GPL-2.0 */</span>
<span class="gd">-#ifndef _LINUX_KD_H</span>
<span class="gd">-#define _LINUX_KD_H</span>
<span class="gd">-</span>
<span class="gd">-#include &lt;uapi/linux/kd.h&gt;</span>
<span class="gd">-</span>
<span class="gd">-#define KD_FONT_FLAG_OLD		0x80000000	/* Invoked via old interface [compat] */</span>
<span class="gd">-#endif /* _LINUX_KD_H */</span>
</pre></div>
</code></pre></td></tr></table>
</div> <!-- class=content -->
<div class='footer'>generated by <a href='https://git.zx2c4.com/cgit/about/'>cgit 1.2.3-korg</a> (<a href='https://git-scm.com/'>git 2.39.0</a>) at 2024-06-12 11:18:23 +0000</div>
</div> <!-- id=cgit -->
</body>
</html>
