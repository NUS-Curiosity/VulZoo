diff --git a/ChuanhuChatbot.py b/ChuanhuChatbot.py
index 63da3742..33c279b7 100644
--- a/ChuanhuChatbot.py
+++ b/ChuanhuChatbot.py
@@ -16,7 +16,9 @@
 from modules import config
 import gradio as gr
 import colorama
+from modules.gradio_patch import reg_patch
 
+reg_patch()
 
 logging.getLogger("httpx").setLevel(logging.WARNING)
 
@@ -33,6 +35,8 @@ def create_new_model():
 
 with gr.Blocks(theme=small_and_beautiful_theme) as demo:
     user_name = gr.Textbox("", visible=False)
+    # æ¿€æ´»/logoutè·¯ç”±
+    logout_hidden_btn = gr.LogoutButton(visible=False)
     promptTemplates = gr.State(load_template(get_template_names()[0], mode=2))
     user_question = gr.State("")
     assert type(my_api_key) == str
@@ -391,6 +395,8 @@ def create_new_model():
                         single_turn_checkbox = gr.Checkbox(label=i18n(
                             "å•è½®å¯¹è¯"), value=False, elem_classes="switch-checkbox", elem_id="gr-single-session-cb", visible=False)
                         # checkUpdateBtn = gr.Button(i18n("ðŸ”„ æ£€æŸ¥æ›´æ–°..."), visible=check_update)
+                        logout_btn = gr.Button(
+                            i18n("é€€å‡ºç”¨æˆ·"), variant="primary", visible=authflag)
 
                     with gr.Tab(i18n("ç½‘ç»œ")):
                         gr.Markdown(
@@ -801,7 +807,12 @@ def create_greeting(request: gr.Request):
         outputs=[saveFileName, systemPromptTxt, chatbot, single_turn_checkbox, temperature_slider, top_p_slider, n_choices_slider, stop_sequence_txt, max_context_length_slider, max_generation_slider, presence_penalty_slider, frequency_penalty_slider, logit_bias_txt, user_identifier_txt],
         _js='(a,b)=>{return bgSelectHistory(a,b);}'
     )
-
+    logout_btn.click(
+            fn=None,
+            inputs=[],
+            outputs=[],
+            _js='self.location="/logout"'
+        )
 # é»˜è®¤å¼€å¯æœ¬åœ°æœåŠ¡å™¨ï¼Œé»˜è®¤å¯ä»¥ç›´æŽ¥ä»ŽIPè®¿é—®ï¼Œé»˜è®¤ä¸åˆ›å»ºå…¬å¼€åˆ†äº«é“¾æŽ¥
 demo.title = i18n("å·è™ŽChat ðŸš€")
 
diff --git a/modules/gradio_patch.py b/modules/gradio_patch.py
new file mode 100644
index 00000000..b4c98be2
--- /dev/null
+++ b/modules/gradio_patch.py
@@ -0,0 +1,114 @@
+import logging
+import os
+
+import fastapi
+import gradio
+from fastapi.responses import RedirectResponse
+from gradio.oauth import MOCKED_OAUTH_TOKEN
+
+from modules.presets import i18n
+
+OAUTH_CLIENT_ID = os.environ.get("OAUTH_CLIENT_ID")
+OAUTH_CLIENT_SECRET = os.environ.get("OAUTH_CLIENT_SECRET")
+OAUTH_SCOPES = os.environ.get("OAUTH_SCOPES")
+OPENID_PROVIDER_URL = os.environ.get("OPENID_PROVIDER_URL")
+def _add_oauth_routes(app: fastapi.FastAPI) -> None:
+    """Add OAuth routes to the FastAPI app (login, callback handler and logout)."""
+    try:
+        from authlib.integrations.starlette_client import OAuth
+    except ImportError as e:
+        raise ImportError(
+            "Cannot initialize OAuth to due a missing library. Please run `pip install gradio[oauth]` or add "
+            "`gradio[oauth]` to your requirements.txt file in order to install the required dependencies."
+        ) from e
+
+    # Check environment variables
+    msg = (
+        "OAuth is required but {} environment variable is not set. Make sure you've enabled OAuth in your Space by"
+        " setting `hf_oauth: true` in the Space metadata."
+    )
+    if OAUTH_CLIENT_ID is None:
+        raise ValueError(msg.format("OAUTH_CLIENT_ID"))
+    if OAUTH_CLIENT_SECRET is None:
+        raise ValueError(msg.format("OAUTH_CLIENT_SECRET"))
+    if OAUTH_SCOPES is None:
+        raise ValueError(msg.format("OAUTH_SCOPES"))
+    if OPENID_PROVIDER_URL is None:
+        raise ValueError(msg.format("OPENID_PROVIDER_URL"))
+
+    # Register OAuth server
+    oauth = OAuth()
+    oauth.register(
+        name="huggingface",
+        client_id=OAUTH_CLIENT_ID,
+        client_secret=OAUTH_CLIENT_SECRET,
+        client_kwargs={"scope": OAUTH_SCOPES},
+        server_metadata_url=OPENID_PROVIDER_URL + "/.well-known/openid-configuration",
+    )
+
+    # Define OAuth routes
+    @app.get("/login/huggingface")
+    async def oauth_login(request: fastapi.Request):
+        """Endpoint that redirects to HF OAuth page."""
+        redirect_uri = str(request.url_for("oauth_redirect_callback"))
+        if ".hf.space" in redirect_uri:
+            # In Space, FastAPI redirect as http but we want https
+            redirect_uri = redirect_uri.replace("http://", "https://")
+        return await oauth.huggingface.authorize_redirect(request, redirect_uri)
+
+    @app.get("/login/callback")
+    async def oauth_redirect_callback(request: fastapi.Request) -> RedirectResponse:
+        """Endpoint that handles the OAuth callback."""
+        token = await oauth.huggingface.authorize_access_token(request)
+        request.session["oauth_profile"] = token["userinfo"]
+        request.session["oauth_token"] = token
+        return RedirectResponse("/")
+
+    @app.get("/logout")
+    async def oauth_logout(request: fastapi.Request) -> RedirectResponse:
+        """Endpoint that logs out the user (e.g. delete cookie session)."""
+        request.session.pop("oauth_profile", None)
+        request.session.pop("oauth_token", None)
+        # æ¸…é™¤cookieå¹¶è·³è½¬åˆ°é¦–é¡µ
+        response = RedirectResponse(url="/", status_code=302)
+        response.delete_cookie(key=f"access-token")
+        response.delete_cookie(key=f"access-token-unsecure")
+        return response
+
+
+def _add_mocked_oauth_routes(app: fastapi.FastAPI) -> None:
+    """Add fake oauth routes if Gradio is run locally and OAuth is enabled.
+
+    Clicking on a gr.LoginButton will have the same behavior as in a Space (i.e. gets redirected in a new tab) but
+    instead of authenticating with HF, a mocked user profile is added to the session.
+    """
+
+    # Define OAuth routes
+    @app.get("/login/huggingface")
+    async def oauth_login(request: fastapi.Request):
+        """Fake endpoint that redirects to HF OAuth page."""
+        return RedirectResponse("/login/callback")
+
+    @app.get("/login/callback")
+    async def oauth_redirect_callback(request: fastapi.Request) -> RedirectResponse:
+        """Endpoint that handles the OAuth callback."""
+        request.session["oauth_profile"] = MOCKED_OAUTH_TOKEN["userinfo"]
+        request.session["oauth_token"] = MOCKED_OAUTH_TOKEN
+        return RedirectResponse("/")
+
+    @app.get("/logout")
+    async def oauth_logout(request: fastapi.Request) -> RedirectResponse:
+        """Endpoint that logs out the user (e.g. delete cookie session)."""
+        request.session.pop("oauth_profile", None)
+        request.session.pop("oauth_token", None)
+        # æ¸…é™¤cookieå¹¶è·³è½¬åˆ°é¦–é¡µ
+        response = RedirectResponse(url="/", status_code=302)
+        response.delete_cookie(key=f"access-token")
+        response.delete_cookie(key=f"access-token-unsecure")
+        return response
+
+
+def reg_patch():
+    gradio.oauth._add_mocked_oauth_routes = _add_mocked_oauth_routes
+    gradio.oauth._add_oauth_routes = _add_oauth_routes
+    logging.info(i18n("è¦†ç›–gradio.oauth /logoutè·¯ç”±"))
