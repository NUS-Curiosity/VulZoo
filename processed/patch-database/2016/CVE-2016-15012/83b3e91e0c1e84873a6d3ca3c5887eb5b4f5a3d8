diff --git a/SalesforceSDK/SmartStore/Store/QuerySpec.cs b/SalesforceSDK/SmartStore/Store/QuerySpec.cs
index 5fef823e..69cc0074 100644
--- a/SalesforceSDK/SmartStore/Store/QuerySpec.cs
+++ b/SalesforceSDK/SmartStore/Store/QuerySpec.cs
@@ -45,12 +45,15 @@ public enum SqlOrder
             DESC
         };
 
-        private const string SelectCount = "SELECT count(*) ";
         private const string Select = "SELECT ";
         private const string From = "FROM ";
         private const string Where = "WHERE ";
         private const string OrderBy = "ORDER BY ";
 
+        private const string SelectCount = "SELECT count(*) ";
+        private const string SelectCountFrom = SelectCount + "FROM ({0})";
+
+
         public readonly string BeginKey;
         public readonly string CountSmartSql;
         public readonly string EndKey;
@@ -148,8 +151,7 @@ private String ComputeCountSql()
         /// <returns></returns>
         private string ComputeCountSql(string smartSql)
         {
-            int fromLocation = smartSql.ToLower().IndexOf(" from ", StringComparison.CurrentCultureIgnoreCase);
-            return SelectCount + smartSql.Substring(fromLocation);
+            return string.Format(SelectCountFrom, smartSql);
         }
 
         /// <summary>
